!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.screenShooter=t.screenShooter||{})}(this,function(t){"use strict";function e(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function n(t,e){return e={exports:{}},t(e,e.exports),e.exports}function r(t){var e,n;this.promise=new t(function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r}),this.resolve=T(e),this.reject=T(n)}function a(t){throw new RangeError(sa[t])}function o(t,e){for(var n=[],r=t.length;r--;)n[r]=e(t[r]);return n}function s(t,e){var n=t.split("@"),r="";return n.length>1&&(r=n[0]+"@",t=n[1]),r+o((t=t.replace(oa,".")).split("."),e).join(".")}function l(t){for(var e=[],n=0,r=t.length;n<r;){var i=t.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var a=t.charCodeAt(n++);56320==(64512&a)?e.push(((1023&i)<<10)+(1023&a)+65536):(e.push(i),n--)}else e.push(i)}return e}function u(t,e,n){return t.length>0?e+n.toUpperCase():t}function h(t){this.ok=!1,"#"==t.charAt(0)&&(t=t.substr(1,6)),t=(t=t.replace(/ /g,"")).toLowerCase();var e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};for(var n in e)t==n&&(t=e[n]);for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}}],i=0;i<r.length;i++){var a=r[i].re,o=r[i].process,s=a.exec(t);s&&(channels=o(s),this.r=channels[0],this.g=channels[1],this.b=channels[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var t=this.r.toString(16),e=this.g.toString(16),n=this.b.toString(16);return 1==t.length&&(t="0"+t),1==e.length&&(e="0"+e),1==n.length&&(n="0"+n),"#"+t+e+n},this.getHelpXML=function(){for(var t=new Array,n=0;n<r.length;n++)for(var i=r[n].example,a=0;a<i.length;a++)t[t.length]=i[a];for(var o in e)t[t.length]=o;var s=document.createElement("ul");s.setAttribute("id","rgbcolor-examples");for(n=0;n<t.length;n++)try{var l=document.createElement("li"),u=new h(t[n]),c=document.createElement("div");c.style.cssText="margin: 3px; border: 1px solid black; background:"+u.toHex()+"; color:"+u.toHex(),c.appendChild(document.createTextNode("test"));var f=document.createTextNode(" "+t[n]+" -> "+u.toRGB()+" -> "+u.toHex());l.appendChild(c),l.appendChild(f),s.appendChild(l)}catch(t){}return s}}function c(t){for(var e=t.data,n=t.width*t.height*4,r=0;r<n;r+=4){var i=e[r+3]/255;e[r]*=i,e[r+1]*=i,e[r+2]*=i}}function f(t){for(var e=t.data,n=t.width*t.height*4,r=0;r<n;r+=4){var i=e[r+3];0!=i&&(i=255/i,e[r]*=i,e[r+1]*=i,e[r+2]*=i)}}function d(t,e,n,r,i,a){if(!(isNaN(a)||a<1)){a|=0;var o,s=document.getElementById(t).getContext("2d");try{try{o=s.getImageData(e,n,r,i)}catch(t){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead"),o=s.getImageData(e,n,r,i)}catch(t){throw alert("Cannot access local image"),new Error("unable to access local image data: "+t)}}}catch(t){throw alert("Cannot access image"),new Error("unable to access image data: "+t)}c(o);var l,u,h,d,p,g,y,v,b,w,x,E,T,P,C,S,O,k,I,R,M,N,A,B,_=o.data,L=a+a+1,V=r-1,D=i-1,F=a+1,U=F*(F+1)/2,G=new m,W=G;for(h=1;h<L;h++)if(W=W.next=new m,h==F)var X=W;W.next=G;var j=null,H=null;y=g=0;var z=gs[a],Y=ys[a];for(u=0;u<i;u++){for(S=O=k=I=v=b=w=x=0,E=F*(R=_[g]),T=F*(M=_[g+1]),P=F*(N=_[g+2]),C=F*(A=_[g+3]),v+=U*R,b+=U*M,w+=U*N,x+=U*A,W=G,h=0;h<F;h++)W.r=R,W.g=M,W.b=N,W.a=A,W=W.next;for(h=1;h<F;h++)d=g+((V<h?V:h)<<2),v+=(W.r=R=_[d])*(B=F-h),b+=(W.g=M=_[d+1])*B,w+=(W.b=N=_[d+2])*B,x+=(W.a=A=_[d+3])*B,S+=R,O+=M,k+=N,I+=A,W=W.next;for(j=G,H=X,l=0;l<r;l++)_[g]=v*z>>Y,_[g+1]=b*z>>Y,_[g+2]=w*z>>Y,_[g+3]=x*z>>Y,v-=E,b-=T,w-=P,x-=C,E-=j.r,T-=j.g,P-=j.b,C-=j.a,d=y+((d=l+a+1)<V?d:V)<<2,v+=S+=j.r=_[d],b+=O+=j.g=_[d+1],w+=k+=j.b=_[d+2],x+=I+=j.a=_[d+3],j=j.next,E+=R=H.r,T+=M=H.g,P+=N=H.b,C+=A=H.a,S-=R,O-=M,k-=N,I-=A,H=H.next,g+=4;y+=r}for(l=0;l<r;l++){for(O=k=I=S=b=w=x=v=0,E=F*(R=_[g=l<<2]),T=F*(M=_[g+1]),P=F*(N=_[g+2]),C=F*(A=_[g+3]),v+=U*R,b+=U*M,w+=U*N,x+=U*A,W=G,h=0;h<F;h++)W.r=R,W.g=M,W.b=N,W.a=A,W=W.next;for(p=r,h=1;h<=a;h++)g=p+l<<2,v+=(W.r=R=_[g])*(B=F-h),b+=(W.g=M=_[g+1])*B,w+=(W.b=N=_[g+2])*B,x+=(W.a=A=_[g+3])*B,S+=R,O+=M,k+=N,I+=A,W=W.next,h<D&&(p+=r);for(g=l,j=G,H=X,u=0;u<i;u++)_[d=g<<2]=v*z>>Y,_[d+1]=b*z>>Y,_[d+2]=w*z>>Y,_[d+3]=x*z>>Y,v-=E,b-=T,w-=P,x-=C,E-=j.r,T-=j.g,P-=j.b,C-=j.a,d=l+((d=u+F)<D?d:D)*r<<2,v+=S+=j.r=_[d],b+=O+=j.g=_[d+1],w+=k+=j.b=_[d+2],x+=I+=j.a=_[d+3],j=j.next,E+=R=H.r,T+=M=H.g,P+=N=H.b,C+=A=H.a,S-=R,O-=M,k-=N,I-=A,H=H.next,g+=r}f(o),s.putImageData(o,e,n)}}function p(t,e,n,r,i,a){if(!(isNaN(a)||a<1)){a|=0;var o,s=document.getElementById(t).getContext("2d");try{try{o=s.getImageData(e,n,r,i)}catch(t){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead"),o=s.getImageData(e,n,r,i)}catch(t){throw alert("Cannot access local image"),new Error("unable to access local image data: "+t)}}}catch(t){throw alert("Cannot access image"),new Error("unable to access image data: "+t)}var l,u,h,c,f,d,p,g,y,v,b,w,x,E,T,P,C,S,O,k,I=o.data,R=a+a+1,M=r-1,N=i-1,A=a+1,B=A*(A+1)/2,_=new m,L=_;for(h=1;h<R;h++)if(L=L.next=new m,h==A)var V=L;L.next=_;var D=null,F=null;p=d=0;var U=gs[a],G=ys[a];for(u=0;u<i;u++){for(E=T=P=g=y=v=0,b=A*(C=I[d]),w=A*(S=I[d+1]),x=A*(O=I[d+2]),g+=B*C,y+=B*S,v+=B*O,L=_,h=0;h<A;h++)L.r=C,L.g=S,L.b=O,L=L.next;for(h=1;h<A;h++)c=d+((M<h?M:h)<<2),g+=(L.r=C=I[c])*(k=A-h),y+=(L.g=S=I[c+1])*k,v+=(L.b=O=I[c+2])*k,E+=C,T+=S,P+=O,L=L.next;for(D=_,F=V,l=0;l<r;l++)I[d]=g*U>>G,I[d+1]=y*U>>G,I[d+2]=v*U>>G,g-=b,y-=w,v-=x,b-=D.r,w-=D.g,x-=D.b,c=p+((c=l+a+1)<M?c:M)<<2,g+=E+=D.r=I[c],y+=T+=D.g=I[c+1],v+=P+=D.b=I[c+2],D=D.next,b+=C=F.r,w+=S=F.g,x+=O=F.b,E-=C,T-=S,P-=O,F=F.next,d+=4;p+=r}for(l=0;l<r;l++){for(T=P=E=y=v=g=0,b=A*(C=I[d=l<<2]),w=A*(S=I[d+1]),x=A*(O=I[d+2]),g+=B*C,y+=B*S,v+=B*O,L=_,h=0;h<A;h++)L.r=C,L.g=S,L.b=O,L=L.next;for(f=r,h=1;h<=a;h++)d=f+l<<2,g+=(L.r=C=I[d])*(k=A-h),y+=(L.g=S=I[d+1])*k,v+=(L.b=O=I[d+2])*k,E+=C,T+=S,P+=O,L=L.next,h<N&&(f+=r);for(d=l,D=_,F=V,u=0;u<i;u++)I[c=d<<2]=g*U>>G,I[c+1]=y*U>>G,I[c+2]=v*U>>G,g-=b,y-=w,v-=x,b-=D.r,w-=D.g,x-=D.b,c=l+((c=u+A)<N?c:N)*r<<2,g+=E+=D.r=I[c],y+=T+=D.g=I[c+1],v+=P+=D.b=I[c+2],D=D.next,b+=C=F.r,w+=S=F.g,x+=O=F.b,E-=C,T-=S,P-=O,F=F.next,d+=r}s.putImageData(o,e,n)}}function m(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}function g(t){var e=[0,0,0],n=function(n,r){var i=t.match(n);null!=i&&(e[r]+=i.length,t=t.replace(n," "))};return t=t.replace(/:not\(([^\)]*)\)/g,"     $1 "),t=t.replace(/{[^]*/gm," "),n(ws,1),n(xs,0),n(Es,1),n(Ts,2),n(Ps,1),n(Cs,1),t=t.replace(/[\*\s\+>~]/g," "),t=t.replace(/[#\.]/g," "),n(Ss,2),e.join("")}function y(t){var e={opts:t};e.FRAMERATE=30,e.MAX_VIRTUAL_PIXELS=3e4,e.log=function(t){},1==e.opts.log&&"undefined"!=typeof console&&(e.log=function(t){console.log(t)}),e.init=function(t){var n=0;e.UniqueId=function(){return"canvg"+ ++n},e.Definitions={},e.Styles={},e.StylesSpecificity={},e.Animations=[],e.Images=[],e.ctx=t,e.ViewPort=new function(){this.viewPorts=[],this.Clear=function(){this.viewPorts=[]},this.SetCurrent=function(t,e){this.viewPorts.push({width:t,height:e})},this.RemoveCurrent=function(){this.viewPorts.pop()},this.Current=function(){return this.viewPorts[this.viewPorts.length-1]},this.width=function(){return this.Current().width},this.height=function(){return this.Current().height},this.ComputeSize=function(t){return null!=t&&"number"==typeof t?t:"x"==t?this.width():"y"==t?this.height():Math.sqrt(Math.pow(this.width(),2)+Math.pow(this.height(),2))/Math.sqrt(2)}}},e.init(),e.ImagesLoaded=function(){for(var t=0;t<e.Images.length;t++)if(!e.Images[t].loaded)return!1;return!0},e.trim=function(t){return t.replace(/^\s+|\s+$/g,"")},e.compressSpaces=function(t){return t.replace(/[\s\r\t\n]+/gm," ")},e.ajax=function(t){var e;return(e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"))?(e.open("GET",t,!1),e.send(null),e.responseText):null},e.parseXml=function(t){if("undefined"!=typeof Windows&&void 0!==Windows.Data&&void 0!==Windows.Data.Xml){var e=new Windows.Data.Xml.Dom.XmlDocument,n=new Windows.Data.Xml.Dom.XmlLoadSettings;return n.prohibitDtd=!1,e.loadXml(t,n),e}return window.DOMParser?(new DOMParser).parseFromString(t,"text/xml"):(t=t.replace(/<!DOCTYPE svg[^>]*>/,""),(e=new ActiveXObject("Microsoft.XMLDOM")).async="false",e.loadXML(t),e)},e.Property=function(t,e){this.name=t,this.value=e},e.Property.prototype.getValue=function(){return this.value},e.Property.prototype.hasValue=function(){return null!=this.value&&""!==this.value},e.Property.prototype.numValue=function(){if(!this.hasValue())return 0;var t=parseFloat(this.value);return(this.value+"").match(/%$/)&&(t/=100),t},e.Property.prototype.valueOrDefault=function(t){return this.hasValue()?this.value:t},e.Property.prototype.numValueOrDefault=function(t){return this.hasValue()?this.numValue():t},e.Property.prototype.addOpacity=function(t){var n=this.value;if(null!=t.value&&""!=t.value&&"string"==typeof this.value){var r=new h(this.value);r.ok&&(n="rgba("+r.r+", "+r.g+", "+r.b+", "+t.numValue()+")")}return new e.Property(this.name,n)},e.Property.prototype.getDefinition=function(){var t=this.value.match(/#([^\)'"]+)/);return t&&(t=t[1]),t||(t=this.value),e.Definitions[t]},e.Property.prototype.isUrlDefinition=function(){return 0==this.value.indexOf("url(")},e.Property.prototype.getFillStyleDefinition=function(t,n){var r=this.getDefinition();if(null!=r&&r.createGradient)return r.createGradient(e.ctx,t,n);if(null!=r&&r.createPattern){if(r.getHrefAttribute().hasValue()){var i=r.attribute("patternTransform");r=r.getHrefAttribute().getDefinition(),i.hasValue()&&(r.attribute("patternTransform",!0).value=i.value)}return r.createPattern(e.ctx,t)}return null},e.Property.prototype.getDPI=function(t){return 96},e.Property.prototype.getEM=function(t){var n=12,r=new e.Property("fontSize",e.Font.Parse(e.ctx.font).fontSize);return r.hasValue()&&(n=r.toPixels(t)),n},e.Property.prototype.getUnits=function(){return(this.value+"").replace(/[0-9\.\-]/g,"")},e.Property.prototype.toPixels=function(t,n){if(!this.hasValue())return 0;var r=this.value+"";if(r.match(/em$/))return this.numValue()*this.getEM(t);if(r.match(/ex$/))return this.numValue()*this.getEM(t)/2;if(r.match(/px$/))return this.numValue();if(r.match(/pt$/))return this.numValue()*this.getDPI(t)*(1/72);if(r.match(/pc$/))return 15*this.numValue();if(r.match(/cm$/))return this.numValue()*this.getDPI(t)/2.54;if(r.match(/mm$/))return this.numValue()*this.getDPI(t)/25.4;if(r.match(/in$/))return this.numValue()*this.getDPI(t);if(r.match(/%$/))return this.numValue()*e.ViewPort.ComputeSize(t);var i=this.numValue();return n&&i<1?i*e.ViewPort.ComputeSize(t):i},e.Property.prototype.toMilliseconds=function(){if(!this.hasValue())return 0;var t=this.value+"";return t.match(/s$/)?1e3*this.numValue():(t.match(/ms$/),this.numValue())},e.Property.prototype.toRadians=function(){if(!this.hasValue())return 0;var t=this.value+"";return t.match(/deg$/)?this.numValue()*(Math.PI/180):t.match(/grad$/)?this.numValue()*(Math.PI/200):t.match(/rad$/)?this.numValue():this.numValue()*(Math.PI/180)};var n={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};return e.Property.prototype.toTextBaseline=function(){return this.hasValue()?n[this.value]:null},e.Font=new function(){this.Styles="normal|italic|oblique|inherit",this.Variants="normal|small-caps|inherit",this.Weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit",this.CreateFont=function(t,n,r,i,a,o){var s=null!=o?this.Parse(o):this.CreateFont("","","","","",e.ctx.font);return{fontFamily:a||s.fontFamily,fontSize:i||s.fontSize,fontStyle:t||s.fontStyle,fontWeight:r||s.fontWeight,fontVariant:n||s.fontVariant,toString:function(){return[this.fontStyle,this.fontVariant,this.fontWeight,this.fontSize,this.fontFamily].join(" ")}}};var t=this;this.Parse=function(n){for(var r={},i=e.trim(e.compressSpaces(n||"")).split(" "),a={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1},o="",s=0;s<i.length;s++)a.fontStyle||-1==t.Styles.indexOf(i[s])?a.fontVariant||-1==t.Variants.indexOf(i[s])?a.fontWeight||-1==t.Weights.indexOf(i[s])?a.fontSize?"inherit"!=i[s]&&(o+=i[s]):("inherit"!=i[s]&&(r.fontSize=i[s].split("/")[0]),a.fontStyle=a.fontVariant=a.fontWeight=a.fontSize=!0):("inherit"!=i[s]&&(r.fontWeight=i[s]),a.fontStyle=a.fontVariant=a.fontWeight=!0):("inherit"!=i[s]&&(r.fontVariant=i[s]),a.fontStyle=a.fontVariant=!0):("inherit"!=i[s]&&(r.fontStyle=i[s]),a.fontStyle=!0);return""!=o&&(r.fontFamily=o),r}},e.ToNumberArray=function(t){for(var n=e.trim(e.compressSpaces((t||"").replace(/,/g," "))).split(" "),r=0;r<n.length;r++)n[r]=parseFloat(n[r]);return n},e.Point=function(t,e){this.x=t,this.y=e},e.Point.prototype.angleTo=function(t){return Math.atan2(t.y-this.y,t.x-this.x)},e.Point.prototype.applyTransform=function(t){var e=this.x*t[0]+this.y*t[2]+t[4],n=this.x*t[1]+this.y*t[3]+t[5];this.x=e,this.y=n},e.CreatePoint=function(t){var n=e.ToNumberArray(t);return new e.Point(n[0],n[1])},e.CreatePath=function(t){for(var n=e.ToNumberArray(t),r=[],i=0;i<n.length;i+=2)r.push(new e.Point(n[i],n[i+1]));return r},e.BoundingBox=function(t,e,n,r){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN,this.x=function(){return this.x1},this.y=function(){return this.y1},this.width=function(){return this.x2-this.x1},this.height=function(){return this.y2-this.y1},this.addPoint=function(t,e){null!=t&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=t,this.x2=t),t<this.x1&&(this.x1=t),t>this.x2&&(this.x2=t)),null!=e&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=e,this.y2=e),e<this.y1&&(this.y1=e),e>this.y2&&(this.y2=e))},this.addX=function(t){this.addPoint(t,null)},this.addY=function(t){this.addPoint(null,t)},this.addBoundingBox=function(t){this.addPoint(t.x1,t.y1),this.addPoint(t.x2,t.y2)},this.addQuadraticCurve=function(t,e,n,r,i,a){var o=t+2/3*(n-t),s=e+2/3*(r-e),l=o+1/3*(i-t),u=s+1/3*(a-e);this.addBezierCurve(t,e,o,l,s,u,i,a)},this.addBezierCurve=function(t,e,n,r,a,o,s,l){var u=[t,e],h=[n,r],c=[a,o],f=[s,l];for(this.addPoint(u[0],u[1]),this.addPoint(f[0],f[1]),i=0;i<=1;i++){var d=function(t){return Math.pow(1-t,3)*u[i]+3*Math.pow(1-t,2)*t*h[i]+3*(1-t)*Math.pow(t,2)*c[i]+Math.pow(t,3)*f[i]},p=6*u[i]-12*h[i]+6*c[i],m=-3*u[i]+9*h[i]-9*c[i]+3*f[i],g=3*h[i]-3*u[i];if(0!=m){var y=Math.pow(p,2)-4*g*m;if(!(y<0)){var v=(-p+Math.sqrt(y))/(2*m);0<v&&v<1&&(0==i&&this.addX(d(v)),1==i&&this.addY(d(v)));var b=(-p-Math.sqrt(y))/(2*m);0<b&&b<1&&(0==i&&this.addX(d(b)),1==i&&this.addY(d(b)))}}else{if(0==p)continue;var w=-g/p;0<w&&w<1&&(0==i&&this.addX(d(w)),1==i&&this.addY(d(w)))}}},this.isPointInBox=function(t,e){return this.x1<=t&&t<=this.x2&&this.y1<=e&&e<=this.y2},this.addPoint(t,e),this.addPoint(n,r)},e.Transform=function(t){var n=this;this.Type={},this.Type.translate=function(t){this.p=e.CreatePoint(t),this.apply=function(t){t.translate(this.p.x||0,this.p.y||0)},this.unapply=function(t){t.translate(-1*this.p.x||0,-1*this.p.y||0)},this.applyToPoint=function(t){t.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0])}},this.Type.rotate=function(t){var n=e.ToNumberArray(t);this.angle=new e.Property("angle",n[0]),this.cx=n[1]||0,this.cy=n[2]||0,this.apply=function(t){t.translate(this.cx,this.cy),t.rotate(this.angle.toRadians()),t.translate(-this.cx,-this.cy)},this.unapply=function(t){t.translate(this.cx,this.cy),t.rotate(-1*this.angle.toRadians()),t.translate(-this.cx,-this.cy)},this.applyToPoint=function(t){var e=this.angle.toRadians();t.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0]),t.applyTransform([Math.cos(e),Math.sin(e),-Math.sin(e),Math.cos(e),0,0]),t.applyTransform([1,0,0,1,-this.p.x||0,-this.p.y||0])}},this.Type.scale=function(t){this.p=e.CreatePoint(t),this.apply=function(t){t.scale(this.p.x||1,this.p.y||this.p.x||1)},this.unapply=function(t){t.scale(1/this.p.x||1,1/this.p.y||this.p.x||1)},this.applyToPoint=function(t){t.applyTransform([this.p.x||0,0,0,this.p.y||0,0,0])}},this.Type.matrix=function(t){this.m=e.ToNumberArray(t),this.apply=function(t){t.transform(this.m[0],this.m[1],this.m[2],this.m[3],this.m[4],this.m[5])},this.unapply=function(t){var e=this.m[0],n=this.m[2],r=this.m[4],i=this.m[1],a=this.m[3],o=this.m[5],s=1/(e*(1*a-0*o)-n*(1*i-0*o)+r*(0*i-0*a));t.transform(s*(1*a-0*o),s*(0*o-1*i),s*(0*r-1*n),s*(1*e-0*r),s*(n*o-r*a),s*(r*i-e*o))},this.applyToPoint=function(t){t.applyTransform(this.m)}},this.Type.SkewBase=function(t){this.base=n.Type.matrix,this.base(t),this.angle=new e.Property("angle",t)},this.Type.SkewBase.prototype=new this.Type.matrix,this.Type.skewX=function(t){this.base=n.Type.SkewBase,this.base(t),this.m=[1,0,Math.tan(this.angle.toRadians()),1,0,0]},this.Type.skewX.prototype=new this.Type.SkewBase,this.Type.skewY=function(t){this.base=n.Type.SkewBase,this.base(t),this.m=[1,Math.tan(this.angle.toRadians()),0,1,0,0]},this.Type.skewY.prototype=new this.Type.SkewBase,this.transforms=[],this.apply=function(t){for(var e=0;e<this.transforms.length;e++)this.transforms[e].apply(t)},this.unapply=function(t){for(var e=this.transforms.length-1;e>=0;e--)this.transforms[e].unapply(t)},this.applyToPoint=function(t){for(var e=0;e<this.transforms.length;e++)this.transforms[e].applyToPoint(t)};for(var r=e.trim(e.compressSpaces(t)).replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/),i=0;i<r.length;i++){var a=e.trim(r[i].split("(")[0]),o=r[i].split("(")[1].replace(")",""),s=new this.Type[a](o);s.type=a,this.transforms.push(s)}},e.AspectRatio=function(t,n,r,i,a,o,s,l,u,h){var c=(n=(n=e.compressSpaces(n)).replace(/^defer\s/,"")).split(" ")[0]||"xMidYMid",f=n.split(" ")[1]||"meet",d=r/i,p=a/o,m=Math.min(d,p),g=Math.max(d,p);"meet"==f&&(i*=m,o*=m),"slice"==f&&(i*=g,o*=g),u=new e.Property("refX",u),h=new e.Property("refY",h),u.hasValue()&&h.hasValue()?t.translate(-m*u.toPixels("x"),-m*h.toPixels("y")):(c.match(/^xMid/)&&("meet"==f&&m==p||"slice"==f&&g==p)&&t.translate(r/2-i/2,0),c.match(/YMid$/)&&("meet"==f&&m==d||"slice"==f&&g==d)&&t.translate(0,a/2-o/2),c.match(/^xMax/)&&("meet"==f&&m==p||"slice"==f&&g==p)&&t.translate(r-i,0),c.match(/YMax$/)&&("meet"==f&&m==d||"slice"==f&&g==d)&&t.translate(0,a-o)),"none"==c?t.scale(d,p):"meet"==f?t.scale(m,m):"slice"==f&&t.scale(g,g),t.translate(null==s?0:-s,null==l?0:-l)},e.Element={},e.EmptyProperty=new e.Property("EMPTY",""),e.Element.ElementBase=function(t){if(this.attributes={},this.styles={},this.stylesSpecificity={},this.children=[],this.attribute=function(t,n){var r=this.attributes[t];return null!=r?r:(1==n&&(r=new e.Property(t,""),this.attributes[t]=r),r||e.EmptyProperty)},this.getHrefAttribute=function(){for(var t in this.attributes)if("href"==t||t.match(/:href$/))return this.attributes[t];return e.EmptyProperty},this.style=function(t,n,r){var i=this.styles[t];if(null!=i)return i;var a=this.attribute(t);if(null!=a&&a.hasValue())return this.styles[t]=a,a;if(1!=r){var o=this.parent;if(null!=o){var s=o.style(t);if(null!=s&&s.hasValue())return s}}return 1==n&&(i=new e.Property(t,""),this.styles[t]=i),i||e.EmptyProperty},this.render=function(t){if("none"!=this.style("display").value&&"hidden"!=this.style("visibility").value){if(t.save(),this.style("mask").hasValue()){var e=this.style("mask").getDefinition();null!=e&&e.apply(t,this)}else if(this.style("filter").hasValue()){var n=this.style("filter").getDefinition();null!=n&&n.apply(t,this)}else this.setContext(t),this.renderChildren(t),this.clearContext(t);t.restore()}},this.setContext=function(t){},this.clearContext=function(t){},this.renderChildren=function(t){for(var e=0;e<this.children.length;e++)this.children[e].render(t)},this.addChild=function(t,n){var r=t;n&&(r=e.CreateElement(t)),r.parent=this,"title"!=r.type&&this.children.push(r)},this.addStylesFromStyleDefinition=function(){for(var n in e.Styles)if("@"!=n[0]&&ms(t,n)){var r=e.Styles[n],i=e.StylesSpecificity[n];if(null!=r)for(var a in r){var o=this.stylesSpecificity[a];void 0===o&&(o="000"),i>o&&(this.styles[a]=r[a],this.stylesSpecificity[a]=i)}}},null!=t&&1==t.nodeType){for(i=0;i<t.attributes.length;i++){var n=t.attributes[i];this.attributes[n.nodeName]=new e.Property(n.nodeName,n.value)}if(this.addStylesFromStyleDefinition(),this.attribute("style").hasValue())for(var r=this.attribute("style").value.split(";"),i=0;i<r.length;i++)if(""!=e.trim(r[i])){var a=r[i].split(":"),o=e.trim(a[0]),s=e.trim(a[1]);this.styles[o]=new e.Property(o,s)}this.attribute("id").hasValue()&&null==e.Definitions[this.attribute("id").value]&&(e.Definitions[this.attribute("id").value]=this);for(i=0;i<t.childNodes.length;i++){var l=t.childNodes[i];if(1==l.nodeType&&this.addChild(l,!0),this.captureTextNodes&&(3==l.nodeType||4==l.nodeType)){var u=l.value||l.text||l.textContent||"";""!=e.compressSpaces(u)&&this.addChild(new e.Element.tspan(l),!1)}}}},e.Element.RenderedElementBase=function(t){this.base=e.Element.ElementBase,this.base(t),this.setContext=function(t){if(this.style("fill").isUrlDefinition()?null!=(r=this.style("fill").getFillStyleDefinition(this,this.style("fill-opacity")))&&(t.fillStyle=r):this.style("fill").hasValue()&&("currentColor"==(n=this.style("fill")).value&&(n.value=this.style("color").value),"inherit"!=n.value&&(t.fillStyle="none"==n.value?"rgba(0,0,0,0)":n.value)),this.style("fill-opacity").hasValue()){var n=new e.Property("fill",t.fillStyle);n=n.addOpacity(this.style("fill-opacity")),t.fillStyle=n.value}if(this.style("stroke").isUrlDefinition()){var r=this.style("stroke").getFillStyleDefinition(this,this.style("stroke-opacity"));null!=r&&(t.strokeStyle=r)}else this.style("stroke").hasValue()&&("currentColor"==(i=this.style("stroke")).value&&(i.value=this.style("color").value),"inherit"!=i.value&&(t.strokeStyle="none"==i.value?"rgba(0,0,0,0)":i.value));if(this.style("stroke-opacity").hasValue()){var i=new e.Property("stroke",t.strokeStyle);i=i.addOpacity(this.style("stroke-opacity")),t.strokeStyle=i.value}if(this.style("stroke-width").hasValue()){var a=this.style("stroke-width").toPixels();t.lineWidth=0==a?.001:a}if(this.style("stroke-linecap").hasValue()&&(t.lineCap=this.style("stroke-linecap").value),this.style("stroke-linejoin").hasValue()&&(t.lineJoin=this.style("stroke-linejoin").value),this.style("stroke-miterlimit").hasValue()&&(t.miterLimit=this.style("stroke-miterlimit").value),this.style("stroke-dasharray").hasValue()&&"none"!=this.style("stroke-dasharray").value){var o=e.ToNumberArray(this.style("stroke-dasharray").value);void 0!==t.setLineDash?t.setLineDash(o):void 0!==t.webkitLineDash?t.webkitLineDash=o:void 0===t.mozDash||1==o.length&&0==o[0]||(t.mozDash=o);var s=this.style("stroke-dashoffset").numValueOrDefault(1);void 0!==t.lineDashOffset?t.lineDashOffset=s:void 0!==t.webkitLineDashOffset?t.webkitLineDashOffset=s:void 0!==t.mozDashOffset&&(t.mozDashOffset=s)}if(void 0!==t.font&&(t.font=e.Font.CreateFont(this.style("font-style").value,this.style("font-variant").value,this.style("font-weight").value,this.style("font-size").hasValue()?this.style("font-size").toPixels()+"px":"",this.style("font-family").value).toString()),this.style("transform",!1,!0).hasValue()&&new e.Transform(this.style("transform",!1,!0).value).apply(t),this.style("clip-path",!1,!0).hasValue()){var l=this.style("clip-path",!1,!0).getDefinition();null!=l&&l.apply(t)}this.style("opacity").hasValue()&&(t.globalAlpha=this.style("opacity").numValue())}},e.Element.RenderedElementBase.prototype=new e.Element.ElementBase,e.Element.PathElementBase=function(t){this.base=e.Element.RenderedElementBase,this.base(t),this.path=function(t){return null!=t&&t.beginPath(),new e.BoundingBox},this.renderChildren=function(t){this.path(t),e.Mouse.checkPath(this,t),""!=t.fillStyle&&("inherit"!=this.style("fill-rule").valueOrDefault("inherit")?t.fill(this.style("fill-rule").value):t.fill()),""!=t.strokeStyle&&t.stroke();var n=this.getMarkers();if(null!=n){if(this.style("marker-start").isUrlDefinition()&&(r=this.style("marker-start").getDefinition()).render(t,n[0][0],n[0][1]),this.style("marker-mid").isUrlDefinition())for(var r=this.style("marker-mid").getDefinition(),i=1;i<n.length-1;i++)r.render(t,n[i][0],n[i][1]);this.style("marker-end").isUrlDefinition()&&(r=this.style("marker-end").getDefinition()).render(t,n[n.length-1][0],n[n.length-1][1])}},this.getBoundingBox=function(){return this.path()},this.getMarkers=function(){return null}},e.Element.PathElementBase.prototype=new e.Element.RenderedElementBase,e.Element.svg=function(t){this.base=e.Element.RenderedElementBase,this.base(t),this.baseClearContext=this.clearContext,this.clearContext=function(t){this.baseClearContext(t),e.ViewPort.RemoveCurrent()},this.baseSetContext=this.setContext,this.setContext=function(t){t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4,void 0!==t.font&&void 0!==window.getComputedStyle&&(t.font=window.getComputedStyle(t.canvas).getPropertyValue("font")),this.baseSetContext(t),this.attribute("x").hasValue()||(this.attribute("x",!0).value=0),this.attribute("y").hasValue()||(this.attribute("y",!0).value=0),t.translate(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y"));var n=e.ViewPort.width(),r=e.ViewPort.height();if(this.attribute("width").hasValue()||(this.attribute("width",!0).value="100%"),this.attribute("height").hasValue()||(this.attribute("height",!0).value="100%"),void 0===this.root){n=this.attribute("width").toPixels("x"),r=this.attribute("height").toPixels("y");var i=0,a=0;this.attribute("refX").hasValue()&&this.attribute("refY").hasValue()&&(i=-this.attribute("refX").toPixels("x"),a=-this.attribute("refY").toPixels("y")),"visible"!=this.attribute("overflow").valueOrDefault("hidden")&&(t.beginPath(),t.moveTo(i,a),t.lineTo(n,a),t.lineTo(n,r),t.lineTo(i,r),t.closePath(),t.clip())}if(e.ViewPort.SetCurrent(n,r),this.attribute("viewBox").hasValue()){var o=e.ToNumberArray(this.attribute("viewBox").value),s=o[0],l=o[1];n=o[2],r=o[3],e.AspectRatio(t,this.attribute("preserveAspectRatio").value,e.ViewPort.width(),n,e.ViewPort.height(),r,s,l,this.attribute("refX").value,this.attribute("refY").value),e.ViewPort.RemoveCurrent(),e.ViewPort.SetCurrent(o[2],o[3])}}},e.Element.svg.prototype=new e.Element.RenderedElementBase,e.Element.rect=function(t){this.base=e.Element.PathElementBase,this.base(t),this.path=function(t){var n=this.attribute("x").toPixels("x"),r=this.attribute("y").toPixels("y"),i=this.attribute("width").toPixels("x"),a=this.attribute("height").toPixels("y"),o=this.attribute("rx").toPixels("x"),s=this.attribute("ry").toPixels("y");return this.attribute("rx").hasValue()&&!this.attribute("ry").hasValue()&&(s=o),this.attribute("ry").hasValue()&&!this.attribute("rx").hasValue()&&(o=s),o=Math.min(o,i/2),s=Math.min(s,a/2),null!=t&&(t.beginPath(),t.moveTo(n+o,r),t.lineTo(n+i-o,r),t.quadraticCurveTo(n+i,r,n+i,r+s),t.lineTo(n+i,r+a-s),t.quadraticCurveTo(n+i,r+a,n+i-o,r+a),t.lineTo(n+o,r+a),t.quadraticCurveTo(n,r+a,n,r+a-s),t.lineTo(n,r+s),t.quadraticCurveTo(n,r,n+o,r),t.closePath()),new e.BoundingBox(n,r,n+i,r+a)}},e.Element.rect.prototype=new e.Element.PathElementBase,e.Element.circle=function(t){this.base=e.Element.PathElementBase,this.base(t),this.path=function(t){var n=this.attribute("cx").toPixels("x"),r=this.attribute("cy").toPixels("y"),i=this.attribute("r").toPixels();return null!=t&&(t.beginPath(),t.arc(n,r,i,0,2*Math.PI,!0),t.closePath()),new e.BoundingBox(n-i,r-i,n+i,r+i)}},e.Element.circle.prototype=new e.Element.PathElementBase,e.Element.ellipse=function(t){this.base=e.Element.PathElementBase,this.base(t),this.path=function(t){var n=(Math.sqrt(2)-1)/3*4,r=this.attribute("rx").toPixels("x"),i=this.attribute("ry").toPixels("y"),a=this.attribute("cx").toPixels("x"),o=this.attribute("cy").toPixels("y");return null!=t&&(t.beginPath(),t.moveTo(a,o-i),t.bezierCurveTo(a+n*r,o-i,a+r,o-n*i,a+r,o),t.bezierCurveTo(a+r,o+n*i,a+n*r,o+i,a,o+i),t.bezierCurveTo(a-n*r,o+i,a-r,o+n*i,a-r,o),t.bezierCurveTo(a-r,o-n*i,a-n*r,o-i,a,o-i),t.closePath()),new e.BoundingBox(a-r,o-i,a+r,o+i)}},e.Element.ellipse.prototype=new e.Element.PathElementBase,e.Element.line=function(t){this.base=e.Element.PathElementBase,this.base(t),this.getPoints=function(){return[new e.Point(this.attribute("x1").toPixels("x"),this.attribute("y1").toPixels("y")),new e.Point(this.attribute("x2").toPixels("x"),this.attribute("y2").toPixels("y"))]},this.path=function(t){var n=this.getPoints();return null!=t&&(t.beginPath(),t.moveTo(n[0].x,n[0].y),t.lineTo(n[1].x,n[1].y)),new e.BoundingBox(n[0].x,n[0].y,n[1].x,n[1].y)},this.getMarkers=function(){var t=this.getPoints(),e=t[0].angleTo(t[1]);return[[t[0],e],[t[1],e]]}},e.Element.line.prototype=new e.Element.PathElementBase,e.Element.polyline=function(t){this.base=e.Element.PathElementBase,this.base(t),this.points=e.CreatePath(this.attribute("points").value),this.path=function(t){var n=new e.BoundingBox(this.points[0].x,this.points[0].y);null!=t&&(t.beginPath(),t.moveTo(this.points[0].x,this.points[0].y));for(var r=1;r<this.points.length;r++)n.addPoint(this.points[r].x,this.points[r].y),null!=t&&t.lineTo(this.points[r].x,this.points[r].y);return n},this.getMarkers=function(){for(var t=[],e=0;e<this.points.length-1;e++)t.push([this.points[e],this.points[e].angleTo(this.points[e+1])]);return t.push([this.points[this.points.length-1],t[t.length-1][1]]),t}},e.Element.polyline.prototype=new e.Element.PathElementBase,e.Element.polygon=function(t){this.base=e.Element.polyline,this.base(t),this.basePath=this.path,this.path=function(t){var e=this.basePath(t);return null!=t&&(t.lineTo(this.points[0].x,this.points[0].y),t.closePath()),e}},e.Element.polygon.prototype=new e.Element.polyline,e.Element.path=function(t){this.base=e.Element.PathElementBase,this.base(t);var n=this.attribute("d").value;n=n.replace(/,/gm," ");for(r=0;r<2;r++)n=n.replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2");n=(n=n.replace(/([^\s])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2")).replace(/([0-9])([+\-])/gm,"$1 $2");for(var r=0;r<2;r++)n=n.replace(/(\.[0-9]*)(\.)/gm,"$1 $2");n=n.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 "),n=e.compressSpaces(n),n=e.trim(n),this.PathParser=new function(t){this.tokens=t.split(" "),this.reset=function(){this.i=-1,this.command="",this.previousCommand="",this.start=new e.Point(0,0),this.control=new e.Point(0,0),this.current=new e.Point(0,0),this.points=[],this.angles=[]},this.isEnd=function(){return this.i>=this.tokens.length-1},this.isCommandOrEnd=function(){return!!this.isEnd()||null!=this.tokens[this.i+1].match(/^[A-Za-z]$/)},this.isRelativeCommand=function(){switch(this.command){case"m":case"l":case"h":case"v":case"c":case"s":case"q":case"t":case"a":case"z":return!0}return!1},this.getToken=function(){return this.i++,this.tokens[this.i]},this.getScalar=function(){return parseFloat(this.getToken())},this.nextCommand=function(){this.previousCommand=this.command,this.command=this.getToken()},this.getPoint=function(){var t=new e.Point(this.getScalar(),this.getScalar());return this.makeAbsolute(t)},this.getAsControlPoint=function(){var t=this.getPoint();return this.control=t,t},this.getAsCurrentPoint=function(){var t=this.getPoint();return this.current=t,t},this.getReflectedControlPoint=function(){return"c"!=this.previousCommand.toLowerCase()&&"s"!=this.previousCommand.toLowerCase()&&"q"!=this.previousCommand.toLowerCase()&&"t"!=this.previousCommand.toLowerCase()?this.current:new e.Point(2*this.current.x-this.control.x,2*this.current.y-this.control.y)},this.makeAbsolute=function(t){return this.isRelativeCommand()&&(t.x+=this.current.x,t.y+=this.current.y),t},this.addMarker=function(t,e,n){null!=n&&this.angles.length>0&&null==this.angles[this.angles.length-1]&&(this.angles[this.angles.length-1]=this.points[this.points.length-1].angleTo(n)),this.addMarkerAngle(t,null==e?null:e.angleTo(t))},this.addMarkerAngle=function(t,e){this.points.push(t),this.angles.push(e)},this.getMarkerPoints=function(){return this.points},this.getMarkerAngles=function(){for(var t=0;t<this.angles.length;t++)if(null==this.angles[t])for(var e=t+1;e<this.angles.length;e++)if(null!=this.angles[e]){this.angles[t]=this.angles[e];break}return this.angles}}(n),this.path=function(t){var n=this.PathParser;n.reset();var r=new e.BoundingBox;for(null!=t&&t.beginPath();!n.isEnd();)switch(n.nextCommand(),n.command){case"M":case"m":a=n.getAsCurrentPoint();for(n.addMarker(a),r.addPoint(a.x,a.y),null!=t&&t.moveTo(a.x,a.y),n.start=n.current;!n.isCommandOrEnd();){a=n.getAsCurrentPoint();n.addMarker(a,n.start),r.addPoint(a.x,a.y),null!=t&&t.lineTo(a.x,a.y)}break;case"L":case"l":for(;!n.isCommandOrEnd();){var i=n.current,a=n.getAsCurrentPoint();n.addMarker(a,i),r.addPoint(a.x,a.y),null!=t&&t.lineTo(a.x,a.y)}break;case"H":case"h":for(;!n.isCommandOrEnd();){o=new e.Point((n.isRelativeCommand()?n.current.x:0)+n.getScalar(),n.current.y);n.addMarker(o,n.current),n.current=o,r.addPoint(n.current.x,n.current.y),null!=t&&t.lineTo(n.current.x,n.current.y)}break;case"V":case"v":for(;!n.isCommandOrEnd();){var o=new e.Point(n.current.x,(n.isRelativeCommand()?n.current.y:0)+n.getScalar());n.addMarker(o,n.current),n.current=o,r.addPoint(n.current.x,n.current.y),null!=t&&t.lineTo(n.current.x,n.current.y)}break;case"C":case"c":for(;!n.isCommandOrEnd();){var s=n.current,l=n.getPoint(),u=n.getAsControlPoint(),h=n.getAsCurrentPoint();n.addMarker(h,u,l),r.addBezierCurve(s.x,s.y,l.x,l.y,u.x,u.y,h.x,h.y),null!=t&&t.bezierCurveTo(l.x,l.y,u.x,u.y,h.x,h.y)}break;case"S":case"s":for(;!n.isCommandOrEnd();){var s=n.current,l=n.getReflectedControlPoint(),u=n.getAsControlPoint(),h=n.getAsCurrentPoint();n.addMarker(h,u,l),r.addBezierCurve(s.x,s.y,l.x,l.y,u.x,u.y,h.x,h.y),null!=t&&t.bezierCurveTo(l.x,l.y,u.x,u.y,h.x,h.y)}break;case"Q":case"q":for(;!n.isCommandOrEnd();){var s=n.current,u=n.getAsControlPoint(),h=n.getAsCurrentPoint();n.addMarker(h,u,u),r.addQuadraticCurve(s.x,s.y,u.x,u.y,h.x,h.y),null!=t&&t.quadraticCurveTo(u.x,u.y,h.x,h.y)}break;case"T":case"t":for(;!n.isCommandOrEnd();){var s=n.current,u=n.getReflectedControlPoint();n.control=u;h=n.getAsCurrentPoint();n.addMarker(h,u,u),r.addQuadraticCurve(s.x,s.y,u.x,u.y,h.x,h.y),null!=t&&t.quadraticCurveTo(u.x,u.y,h.x,h.y)}break;case"A":case"a":for(;!n.isCommandOrEnd();){var s=n.current,c=n.getScalar(),f=n.getScalar(),d=n.getScalar()*(Math.PI/180),p=n.getScalar(),m=n.getScalar(),h=n.getAsCurrentPoint(),g=new e.Point(Math.cos(d)*(s.x-h.x)/2+Math.sin(d)*(s.y-h.y)/2,-Math.sin(d)*(s.x-h.x)/2+Math.cos(d)*(s.y-h.y)/2),y=Math.pow(g.x,2)/Math.pow(c,2)+Math.pow(g.y,2)/Math.pow(f,2);y>1&&(c*=Math.sqrt(y),f*=Math.sqrt(y));var v=(p==m?-1:1)*Math.sqrt((Math.pow(c,2)*Math.pow(f,2)-Math.pow(c,2)*Math.pow(g.y,2)-Math.pow(f,2)*Math.pow(g.x,2))/(Math.pow(c,2)*Math.pow(g.y,2)+Math.pow(f,2)*Math.pow(g.x,2)));isNaN(v)&&(v=0);var b=new e.Point(v*c*g.y/f,v*-f*g.x/c),w=new e.Point((s.x+h.x)/2+Math.cos(d)*b.x-Math.sin(d)*b.y,(s.y+h.y)/2+Math.sin(d)*b.x+Math.cos(d)*b.y),x=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2))},E=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(x(t)*x(e))},T=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(E(t,e))},P=T([1,0],[(g.x-b.x)/c,(g.y-b.y)/f]),C=[(g.x-b.x)/c,(g.y-b.y)/f],S=[(-g.x-b.x)/c,(-g.y-b.y)/f],O=T(C,S);E(C,S)<=-1&&(O=Math.PI),E(C,S)>=1&&(O=0);var k=1-m?1:-1,I=P+k*(O/2),R=new e.Point(w.x+c*Math.cos(I),w.y+f*Math.sin(I));if(n.addMarkerAngle(R,I-k*Math.PI/2),n.addMarkerAngle(h,I-k*Math.PI),r.addPoint(h.x,h.y),null!=t){var E=c>f?c:f,M=c>f?1:c/f,N=c>f?f/c:1;t.translate(w.x,w.y),t.rotate(d),t.scale(M,N),t.arc(0,0,E,P,P+O,1-m),t.scale(1/M,1/N),t.rotate(-d),t.translate(-w.x,-w.y)}}break;case"Z":case"z":null!=t&&t.closePath(),n.current=n.start}return r},this.getMarkers=function(){for(var t=this.PathParser.getMarkerPoints(),e=this.PathParser.getMarkerAngles(),n=[],r=0;r<t.length;r++)n.push([t[r],e[r]]);return n}},e.Element.path.prototype=new e.Element.PathElementBase,e.Element.pattern=function(t){this.base=e.Element.ElementBase,this.base(t),this.createPattern=function(t,n){var r=this.attribute("width").toPixels("x",!0),i=this.attribute("height").toPixels("y",!0),a=new e.Element.svg;a.attributes.viewBox=new e.Property("viewBox",this.attribute("viewBox").value),a.attributes.width=new e.Property("width",r+"px"),a.attributes.height=new e.Property("height",i+"px"),a.attributes.transform=new e.Property("transform",this.attribute("patternTransform").value),a.children=this.children;var o=document.createElement("canvas");o.width=r,o.height=i;var s=o.getContext("2d");this.attribute("x").hasValue()&&this.attribute("y").hasValue()&&s.translate(this.attribute("x").toPixels("x",!0),this.attribute("y").toPixels("y",!0));for(var l=-1;l<=1;l++)for(var u=-1;u<=1;u++)s.save(),a.attributes.x=new e.Property("x",l*o.width),a.attributes.y=new e.Property("y",u*o.height),a.render(s),s.restore();return t.createPattern(o,"repeat")}},e.Element.pattern.prototype=new e.Element.ElementBase,e.Element.marker=function(t){this.base=e.Element.ElementBase,this.base(t),this.baseRender=this.render,this.render=function(t,n,r){t.translate(n.x,n.y),"auto"==this.attribute("orient").valueOrDefault("auto")&&t.rotate(r),"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&t.scale(t.lineWidth,t.lineWidth),t.save();var i=new e.Element.svg;i.attributes.viewBox=new e.Property("viewBox",this.attribute("viewBox").value),i.attributes.refX=new e.Property("refX",this.attribute("refX").value),i.attributes.refY=new e.Property("refY",this.attribute("refY").value),i.attributes.width=new e.Property("width",this.attribute("markerWidth").value),i.attributes.height=new e.Property("height",this.attribute("markerHeight").value),i.attributes.fill=new e.Property("fill",this.attribute("fill").valueOrDefault("black")),i.attributes.stroke=new e.Property("stroke",this.attribute("stroke").valueOrDefault("none")),i.children=this.children,i.render(t),t.restore(),"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&t.scale(1/t.lineWidth,1/t.lineWidth),"auto"==this.attribute("orient").valueOrDefault("auto")&&t.rotate(-r),t.translate(-n.x,-n.y)}},e.Element.marker.prototype=new e.Element.ElementBase,e.Element.defs=function(t){this.base=e.Element.ElementBase,this.base(t),this.render=function(t){}},e.Element.defs.prototype=new e.Element.ElementBase,e.Element.GradientBase=function(t){this.base=e.Element.ElementBase,this.base(t),this.stops=[];for(var n=0;n<this.children.length;n++){var r=this.children[n];"stop"==r.type&&this.stops.push(r)}this.getGradient=function(){},this.gradientUnits=function(){return this.attribute("gradientUnits").valueOrDefault("objectBoundingBox")},this.attributesToInherit=["gradientUnits"],this.inheritStopContainer=function(t){for(var e=0;e<this.attributesToInherit.length;e++){var n=this.attributesToInherit[e];!this.attribute(n).hasValue()&&t.attribute(n).hasValue()&&(this.attribute(n,!0).value=t.attribute(n).value)}},this.createGradient=function(t,n,r){var i=this;this.getHrefAttribute().hasValue()&&(i=this.getHrefAttribute().getDefinition(),this.inheritStopContainer(i));var a=function(t){return r.hasValue()?new e.Property("color",t).addOpacity(r).value:t},o=this.getGradient(t,n);if(null==o)return a(i.stops[i.stops.length-1].color);for(var s=0;s<i.stops.length;s++)o.addColorStop(i.stops[s].offset,a(i.stops[s].color));if(this.attribute("gradientTransform").hasValue()){var l=e.ViewPort.viewPorts[0],u=new e.Element.rect;u.attributes.x=new e.Property("x",-e.MAX_VIRTUAL_PIXELS/3),u.attributes.y=new e.Property("y",-e.MAX_VIRTUAL_PIXELS/3),u.attributes.width=new e.Property("width",e.MAX_VIRTUAL_PIXELS),u.attributes.height=new e.Property("height",e.MAX_VIRTUAL_PIXELS);var h=new e.Element.g;h.attributes.transform=new e.Property("transform",this.attribute("gradientTransform").value),h.children=[u];var c=new e.Element.svg;c.attributes.x=new e.Property("x",0),c.attributes.y=new e.Property("y",0),c.attributes.width=new e.Property("width",l.width),c.attributes.height=new e.Property("height",l.height),c.children=[h];var f=document.createElement("canvas");f.width=l.width,f.height=l.height;var d=f.getContext("2d");return d.fillStyle=o,c.render(d),d.createPattern(f,"no-repeat")}return o}},e.Element.GradientBase.prototype=new e.Element.ElementBase,e.Element.linearGradient=function(t){this.base=e.Element.GradientBase,this.base(t),this.attributesToInherit.push("x1"),this.attributesToInherit.push("y1"),this.attributesToInherit.push("x2"),this.attributesToInherit.push("y2"),this.getGradient=function(t,e){var n="objectBoundingBox"==this.gradientUnits()?e.getBoundingBox():null;this.attribute("x1").hasValue()||this.attribute("y1").hasValue()||this.attribute("x2").hasValue()||this.attribute("y2").hasValue()||(this.attribute("x1",!0).value=0,this.attribute("y1",!0).value=0,this.attribute("x2",!0).value=1,this.attribute("y2",!0).value=0);var r="objectBoundingBox"==this.gradientUnits()?n.x()+n.width()*this.attribute("x1").numValue():this.attribute("x1").toPixels("x"),i="objectBoundingBox"==this.gradientUnits()?n.y()+n.height()*this.attribute("y1").numValue():this.attribute("y1").toPixels("y"),a="objectBoundingBox"==this.gradientUnits()?n.x()+n.width()*this.attribute("x2").numValue():this.attribute("x2").toPixels("x"),o="objectBoundingBox"==this.gradientUnits()?n.y()+n.height()*this.attribute("y2").numValue():this.attribute("y2").toPixels("y");return r==a&&i==o?null:t.createLinearGradient(r,i,a,o)}},e.Element.linearGradient.prototype=new e.Element.GradientBase,e.Element.radialGradient=function(t){this.base=e.Element.GradientBase,this.base(t),this.attributesToInherit.push("cx"),this.attributesToInherit.push("cy"),this.attributesToInherit.push("r"),this.attributesToInherit.push("fx"),this.attributesToInherit.push("fy"),this.getGradient=function(t,e){var n=e.getBoundingBox();this.attribute("cx").hasValue()||(this.attribute("cx",!0).value="50%"),this.attribute("cy").hasValue()||(this.attribute("cy",!0).value="50%"),this.attribute("r").hasValue()||(this.attribute("r",!0).value="50%");var r="objectBoundingBox"==this.gradientUnits()?n.x()+n.width()*this.attribute("cx").numValue():this.attribute("cx").toPixels("x"),i="objectBoundingBox"==this.gradientUnits()?n.y()+n.height()*this.attribute("cy").numValue():this.attribute("cy").toPixels("y"),a=r,o=i;this.attribute("fx").hasValue()&&(a="objectBoundingBox"==this.gradientUnits()?n.x()+n.width()*this.attribute("fx").numValue():this.attribute("fx").toPixels("x")),this.attribute("fy").hasValue()&&(o="objectBoundingBox"==this.gradientUnits()?n.y()+n.height()*this.attribute("fy").numValue():this.attribute("fy").toPixels("y"));var s="objectBoundingBox"==this.gradientUnits()?(n.width()+n.height())/2*this.attribute("r").numValue():this.attribute("r").toPixels();return t.createRadialGradient(a,o,0,r,i,s)}},e.Element.radialGradient.prototype=new e.Element.GradientBase,e.Element.stop=function(t){this.base=e.Element.ElementBase,this.base(t),this.offset=this.attribute("offset").numValue(),this.offset<0&&(this.offset=0),this.offset>1&&(this.offset=1);var n=this.style("stop-color",!0);""===n.value&&(n.value="#000"),this.style("stop-opacity").hasValue()&&(n=n.addOpacity(this.style("stop-opacity"))),this.color=n.value},e.Element.stop.prototype=new e.Element.ElementBase,e.Element.AnimateBase=function(t){this.base=e.Element.ElementBase,this.base(t),e.Animations.push(this),this.duration=0,this.begin=this.attribute("begin").toMilliseconds(),this.maxDuration=this.begin+this.attribute("dur").toMilliseconds(),this.getProperty=function(){var t=this.attribute("attributeType").value,e=this.attribute("attributeName").value;return"CSS"==t?this.parent.style(e,!0):this.parent.attribute(e,!0)},this.initialValue=null,this.initialUnits="",this.removed=!1,this.calcValue=function(){return""},this.update=function(t){if(null==this.initialValue&&(this.initialValue=this.getProperty().value,this.initialUnits=this.getProperty().getUnits()),this.duration>this.maxDuration){if("indefinite"==this.attribute("repeatCount").value||"indefinite"==this.attribute("repeatDur").value)this.duration=0;else if("freeze"!=this.attribute("fill").valueOrDefault("remove")||this.frozen){if("remove"==this.attribute("fill").valueOrDefault("remove")&&!this.removed)return this.removed=!0,this.getProperty().value=this.parent.animationFrozen?this.parent.animationFrozenValue:this.initialValue,!0}else this.frozen=!0,this.parent.animationFrozen=!0,this.parent.animationFrozenValue=this.getProperty().value;return!1}this.duration=this.duration+t;var e=!1;if(this.begin<this.duration){var n=this.calcValue();this.attribute("type").hasValue()&&(n=this.attribute("type").value+"("+n+")"),this.getProperty().value=n,e=!0}return e},this.from=this.attribute("from"),this.to=this.attribute("to"),this.values=this.attribute("values"),this.values.hasValue()&&(this.values.value=this.values.value.split(";")),this.progress=function(){var t={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(this.values.hasValue()){var n=t.progress*(this.values.value.length-1),r=Math.floor(n),i=Math.ceil(n);t.from=new e.Property("from",parseFloat(this.values.value[r])),t.to=new e.Property("to",parseFloat(this.values.value[i])),t.progress=(n-r)/(i-r)}else t.from=this.from,t.to=this.to;return t}},e.Element.AnimateBase.prototype=new e.Element.ElementBase,e.Element.animate=function(t){this.base=e.Element.AnimateBase,this.base(t),this.calcValue=function(){var t=this.progress();return t.from.numValue()+(t.to.numValue()-t.from.numValue())*t.progress+this.initialUnits}},e.Element.animate.prototype=new e.Element.AnimateBase,e.Element.animateColor=function(t){this.base=e.Element.AnimateBase,this.base(t),this.calcValue=function(){var t=this.progress(),e=new h(t.from.value),n=new h(t.to.value);if(e.ok&&n.ok){var r=e.r+(n.r-e.r)*t.progress,i=e.g+(n.g-e.g)*t.progress,a=e.b+(n.b-e.b)*t.progress;return"rgb("+parseInt(r,10)+","+parseInt(i,10)+","+parseInt(a,10)+")"}return this.attribute("from").value}},e.Element.animateColor.prototype=new e.Element.AnimateBase,e.Element.animateTransform=function(t){this.base=e.Element.AnimateBase,this.base(t),this.calcValue=function(){for(var t=this.progress(),n=e.ToNumberArray(t.from.value),r=e.ToNumberArray(t.to.value),i="",a=0;a<n.length;a++)i+=n[a]+(r[a]-n[a])*t.progress+" ";return i}},e.Element.animateTransform.prototype=new e.Element.animate,e.Element.font=function(t){this.base=e.Element.ElementBase,this.base(t),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.isRTL=!1,this.isArabic=!1,this.fontFace=null,this.missingGlyph=null,this.glyphs=[];for(var n=0;n<this.children.length;n++){var r=this.children[n];"font-face"==r.type?(this.fontFace=r,r.style("font-family").hasValue()&&(e.Definitions[r.style("font-family").value]=this)):"missing-glyph"==r.type?this.missingGlyph=r:"glyph"==r.type&&(""!=r.arabicForm?(this.isRTL=!0,this.isArabic=!0,void 0===this.glyphs[r.unicode]&&(this.glyphs[r.unicode]=[]),this.glyphs[r.unicode][r.arabicForm]=r):this.glyphs[r.unicode]=r)}},e.Element.font.prototype=new e.Element.ElementBase,e.Element.fontface=function(t){this.base=e.Element.ElementBase,this.base(t),this.ascent=this.attribute("ascent").value,this.descent=this.attribute("descent").value,this.unitsPerEm=this.attribute("units-per-em").numValue()},e.Element.fontface.prototype=new e.Element.ElementBase,e.Element.missingglyph=function(t){this.base=e.Element.path,this.base(t),this.horizAdvX=0},e.Element.missingglyph.prototype=new e.Element.path,e.Element.glyph=function(t){this.base=e.Element.path,this.base(t),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.unicode=this.attribute("unicode").value,this.arabicForm=this.attribute("arabic-form").value},e.Element.glyph.prototype=new e.Element.path,e.Element.text=function(t){this.captureTextNodes=!0,this.base=e.Element.RenderedElementBase,this.base(t),this.baseSetContext=this.setContext,this.setContext=function(t){this.baseSetContext(t);var e=this.style("dominant-baseline").toTextBaseline();null==e&&(e=this.style("alignment-baseline").toTextBaseline()),null!=e&&(t.textBaseline=e)},this.getBoundingBox=function(){var t=this.attribute("x").toPixels("x"),n=this.attribute("y").toPixels("y"),r=this.parent.style("font-size").numValueOrDefault(e.Font.Parse(e.ctx.font).fontSize);return new e.BoundingBox(t,n-r,t+Math.floor(2*r/3)*this.children[0].getText().length,n)},this.renderChildren=function(t){this.x=this.attribute("x").toPixels("x"),this.y=this.attribute("y").toPixels("y"),this.attribute("dx").hasValue()&&(this.x+=this.attribute("dx").toPixels("x")),this.attribute("dy").hasValue()&&(this.y+=this.attribute("dy").toPixels("y")),this.x+=this.getAnchorDelta(t,this,0);for(var e=0;e<this.children.length;e++)this.renderChild(t,this,e)},this.getAnchorDelta=function(t,e,n){var r=this.style("text-anchor").valueOrDefault("start");if("start"!=r){for(var i=0,a=n;a<e.children.length;a++){var o=e.children[a];if(a>n&&o.attribute("x").hasValue())break;i+=o.measureTextRecursive(t)}return-1*("end"==r?i:i/2)}return 0},this.renderChild=function(t,e,n){var r=e.children[n];r.attribute("x").hasValue()?(r.x=r.attribute("x").toPixels("x")+e.getAnchorDelta(t,e,n),r.attribute("dx").hasValue()&&(r.x+=r.attribute("dx").toPixels("x"))):(r.attribute("dx").hasValue()&&(e.x+=r.attribute("dx").toPixels("x")),r.x=e.x),e.x=r.x+r.measureText(t),r.attribute("y").hasValue()?(r.y=r.attribute("y").toPixels("y"),r.attribute("dy").hasValue()&&(r.y+=r.attribute("dy").toPixels("y"))):(r.attribute("dy").hasValue()&&(e.y+=r.attribute("dy").toPixels("y")),r.y=e.y),e.y=r.y,r.render(t);for(var n=0;n<r.children.length;n++)e.renderChild(t,r,n)}},e.Element.text.prototype=new e.Element.RenderedElementBase,e.Element.TextElementBase=function(t){this.base=e.Element.RenderedElementBase,this.base(t),this.getGlyph=function(t,e,n){var r=e[n],i=null;if(t.isArabic){var a="isolated";(0==n||" "==e[n-1])&&n<e.length-2&&" "!=e[n+1]&&(a="terminal"),n>0&&" "!=e[n-1]&&n<e.length-2&&" "!=e[n+1]&&(a="medial"),n>0&&" "!=e[n-1]&&(n==e.length-1||" "==e[n+1])&&(a="initial"),void 0!==t.glyphs[r]&&null==(i=t.glyphs[r][a])&&"glyph"==t.glyphs[r].type&&(i=t.glyphs[r])}else i=t.glyphs[r];return null==i&&(i=t.missingGlyph),i},this.renderChildren=function(t){var n=this.parent.style("font-family").getDefinition();if(null==n)""!=t.fillStyle&&t.fillText(e.compressSpaces(this.getText()),this.x,this.y),""!=t.strokeStyle&&t.strokeText(e.compressSpaces(this.getText()),this.x,this.y);else{var r=this.parent.style("font-size").numValueOrDefault(e.Font.Parse(e.ctx.font).fontSize),i=this.parent.style("font-style").valueOrDefault(e.Font.Parse(e.ctx.font).fontStyle),a=this.getText();n.isRTL&&(a=a.split("").reverse().join(""));for(var o=e.ToNumberArray(this.parent.attribute("dx").value),s=0;s<a.length;s++){var l=this.getGlyph(n,a,s),u=r/n.fontFace.unitsPerEm;t.translate(this.x,this.y),t.scale(u,-u);var h=t.lineWidth;t.lineWidth=t.lineWidth*n.fontFace.unitsPerEm/r,"italic"==i&&t.transform(1,0,.4,1,0,0),l.render(t),"italic"==i&&t.transform(1,0,-.4,1,0,0),t.lineWidth=h,t.scale(1/u,-1/u),t.translate(-this.x,-this.y),this.x+=r*(l.horizAdvX||n.horizAdvX)/n.fontFace.unitsPerEm,void 0===o[s]||isNaN(o[s])||(this.x+=o[s])}}},this.getText=function(){},this.measureTextRecursive=function(t){for(var e=this.measureText(t),n=0;n<this.children.length;n++)e+=this.children[n].measureTextRecursive(t);return e},this.measureText=function(t){var n=this.parent.style("font-family").getDefinition();if(null!=n){var r=this.parent.style("font-size").numValueOrDefault(e.Font.Parse(e.ctx.font).fontSize),i=0,a=this.getText();n.isRTL&&(a=a.split("").reverse().join(""));for(var o=e.ToNumberArray(this.parent.attribute("dx").value),s=0;s<a.length;s++)i+=(this.getGlyph(n,a,s).horizAdvX||n.horizAdvX)*r/n.fontFace.unitsPerEm,void 0===o[s]||isNaN(o[s])||(i+=o[s]);return i}var l=e.compressSpaces(this.getText());if(!t.measureText)return 10*l.length;t.save(),this.setContext(t);var u=t.measureText(l).width;return t.restore(),u}},e.Element.TextElementBase.prototype=new e.Element.RenderedElementBase,e.Element.tspan=function(t){this.captureTextNodes=!0,this.base=e.Element.TextElementBase,this.base(t),this.text=e.compressSpaces(t.value||t.text||t.textContent||""),this.getText=function(){return this.children.length>0?"":this.text}},e.Element.tspan.prototype=new e.Element.TextElementBase,e.Element.tref=function(t){this.base=e.Element.TextElementBase,this.base(t),this.getText=function(){var t=this.getHrefAttribute().getDefinition();if(null!=t)return t.children[0].getText()}},e.Element.tref.prototype=new e.Element.TextElementBase,e.Element.a=function(t){this.base=e.Element.TextElementBase,this.base(t),this.hasText=t.childNodes.length>0;for(var n=0;n<t.childNodes.length;n++)3!=t.childNodes[n].nodeType&&(this.hasText=!1);this.text=this.hasText?t.childNodes[0].value:"",this.getText=function(){return this.text},this.baseRenderChildren=this.renderChildren,this.renderChildren=function(t){if(this.hasText){this.baseRenderChildren(t);var n=new e.Property("fontSize",e.Font.Parse(e.ctx.font).fontSize);e.Mouse.checkBoundingBox(this,new e.BoundingBox(this.x,this.y-n.toPixels("y"),this.x+this.measureText(t),this.y))}else if(this.children.length>0){var r=new e.Element.g;r.children=this.children,r.parent=this,r.render(t)}},this.onclick=function(){window.open(this.getHrefAttribute().value)},this.onmousemove=function(){e.ctx.canvas.style.cursor="pointer"}},e.Element.a.prototype=new e.Element.TextElementBase,e.Element.image=function(t){this.base=e.Element.RenderedElementBase,this.base(t);var n=this.getHrefAttribute().value;if(""!=n){var r=n.match(/\.svg$/);if(e.Images.push(this),this.loaded=!1,r)this.img=e.ajax(n),this.loaded=!0;else{this.img=document.createElement("img"),1==e.opts.useCORS&&(this.img.crossOrigin="Anonymous");var i=this;this.img.onload=function(){i.loaded=!0},this.img.onerror=function(){e.log('ERROR: image "'+n+'" not found'),i.loaded=!0},this.img.src=n}this.renderChildren=function(t){var n=this.attribute("x").toPixels("x"),i=this.attribute("y").toPixels("y"),a=this.attribute("width").toPixels("x"),o=this.attribute("height").toPixels("y");0!=a&&0!=o&&(t.save(),r?t.drawSvg(this.img,n,i,a,o):(t.translate(n,i),e.AspectRatio(t,this.attribute("preserveAspectRatio").value,a,this.img.width,o,this.img.height,0,0),t.drawImage(this.img,0,0)),t.restore())},this.getBoundingBox=function(){var t=this.attribute("x").toPixels("x"),n=this.attribute("y").toPixels("y"),r=this.attribute("width").toPixels("x"),i=this.attribute("height").toPixels("y");return new e.BoundingBox(t,n,t+r,n+i)}}},e.Element.image.prototype=new e.Element.RenderedElementBase,e.Element.g=function(t){this.base=e.Element.RenderedElementBase,this.base(t),this.getBoundingBox=function(){for(var t=new e.BoundingBox,n=0;n<this.children.length;n++)t.addBoundingBox(this.children[n].getBoundingBox());return t}},e.Element.g.prototype=new e.Element.RenderedElementBase,e.Element.symbol=function(t){this.base=e.Element.RenderedElementBase,this.base(t),this.render=function(t){}},e.Element.symbol.prototype=new e.Element.RenderedElementBase,e.Element.style=function(t){this.base=e.Element.ElementBase,this.base(t);for(var n="",r=0;r<t.childNodes.length;r++)n+=t.childNodes[r].data;n=n.replace(/(\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,"");for(var i=(n=e.compressSpaces(n)).split("}"),r=0;r<i.length;r++)if(""!=e.trim(i[r]))for(var a=i[r].split("{"),o=a[0].split(","),s=a[1].split(";"),l=0;l<o.length;l++){var u=e.trim(o[l]);if(""!=u){for(var h=e.Styles[u]||{},c=0;c<s.length;c++){var f=s[c].indexOf(":"),d=s[c].substr(0,f),p=s[c].substr(f+1,s[c].length-f);null!=d&&null!=p&&(h[e.trim(d)]=new e.Property(e.trim(d),e.trim(p)))}if(e.Styles[u]=h,e.StylesSpecificity[u]=g(u),"@font-face"==u)for(var m=h["font-family"].value.replace(/"/g,""),y=h.src.value.split(","),v=0;v<y.length;v++)if(y[v].indexOf('format("svg")')>0)for(var b=y[v].indexOf("url"),w=y[v].indexOf(")",b),x=y[v].substr(b+5,w-b-6),E=e.parseXml(e.ajax(x)).getElementsByTagName("font"),T=0;T<E.length;T++){var P=e.CreateElement(E[T]);e.Definitions[m]=P}}}},e.Element.style.prototype=new e.Element.ElementBase,e.Element.use=function(t){this.base=e.Element.RenderedElementBase,this.base(t),this.baseSetContext=this.setContext,this.setContext=function(t){this.baseSetContext(t),this.attribute("x").hasValue()&&t.translate(this.attribute("x").toPixels("x"),0),this.attribute("y").hasValue()&&t.translate(0,this.attribute("y").toPixels("y"))};var n=this.getHrefAttribute().getDefinition();this.path=function(t){null!=n&&n.path(t)},this.getBoundingBox=function(){if(null!=n)return n.getBoundingBox()},this.renderChildren=function(t){if(null!=n){var r=n;"symbol"==n.type&&((r=new e.Element.svg).type="svg",r.attributes.viewBox=new e.Property("viewBox",n.attribute("viewBox").value),r.attributes.preserveAspectRatio=new e.Property("preserveAspectRatio",n.attribute("preserveAspectRatio").value),r.attributes.overflow=new e.Property("overflow",n.attribute("overflow").value),r.children=n.children),"svg"==r.type&&(this.attribute("width").hasValue()&&(r.attributes.width=new e.Property("width",this.attribute("width").value)),this.attribute("height").hasValue()&&(r.attributes.height=new e.Property("height",this.attribute("height").value)));var i=r.parent;r.parent=null,r.render(t),r.parent=i}}},e.Element.use.prototype=new e.Element.RenderedElementBase,e.Element.mask=function(t){this.base=e.Element.ElementBase,this.base(t),this.apply=function(t,n){var r=this.attribute("x").toPixels("x"),i=this.attribute("y").toPixels("y"),a=this.attribute("width").toPixels("x"),o=this.attribute("height").toPixels("y");if(0==a&&0==o){for(var s=new e.BoundingBox,l=0;l<this.children.length;l++)s.addBoundingBox(this.children[l].getBoundingBox());var r=Math.floor(s.x1),i=Math.floor(s.y1),a=Math.floor(s.width()),o=Math.floor(s.height())}var u=n.attribute("mask").value;n.attribute("mask").value="";var h=document.createElement("canvas");h.width=r+a,h.height=i+o;var c=h.getContext("2d");this.renderChildren(c);var f=document.createElement("canvas");f.width=r+a,f.height=i+o;var d=f.getContext("2d");n.render(d),d.globalCompositeOperation="destination-in",d.fillStyle=c.createPattern(h,"no-repeat"),d.fillRect(0,0,r+a,i+o),t.fillStyle=d.createPattern(f,"no-repeat"),t.fillRect(0,0,r+a,i+o),n.attribute("mask").value=u},this.render=function(t){}},e.Element.mask.prototype=new e.Element.ElementBase,e.Element.clipPath=function(t){this.base=e.Element.ElementBase,this.base(t),this.apply=function(t){var n=CanvasRenderingContext2D.prototype.beginPath;CanvasRenderingContext2D.prototype.beginPath=function(){};var r=CanvasRenderingContext2D.prototype.closePath;CanvasRenderingContext2D.prototype.closePath=function(){},n.call(t);for(var i=0;i<this.children.length;i++){var a=this.children[i];if(void 0!==a.path){var o=null;a.style("transform",!1,!0).hasValue()&&(o=new e.Transform(a.style("transform",!1,!0).value)).apply(t),a.path(t),CanvasRenderingContext2D.prototype.closePath=r,o&&o.unapply(t)}}r.call(t),t.clip(),CanvasRenderingContext2D.prototype.beginPath=n,CanvasRenderingContext2D.prototype.closePath=r},this.render=function(t){}},e.Element.clipPath.prototype=new e.Element.ElementBase,e.Element.filter=function(t){this.base=e.Element.ElementBase,this.base(t),this.apply=function(t,e){var n=e.getBoundingBox(),r=Math.floor(n.x1),i=Math.floor(n.y1),a=Math.floor(n.width()),o=Math.floor(n.height()),s=e.style("filter").value;e.style("filter").value="";for(var l=0,u=0,h=0;h<this.children.length;h++){var c=this.children[h].extraFilterDistance||0;l=Math.max(l,c),u=Math.max(u,c)}var f=document.createElement("canvas");f.width=a+2*l,f.height=o+2*u;var d=f.getContext("2d");d.translate(-r+l,-i+u),e.render(d);for(h=0;h<this.children.length;h++)"function"==typeof this.children[h].apply&&this.children[h].apply(d,0,0,a+2*l,o+2*u);t.drawImage(f,0,0,a+2*l,o+2*u,r-l,i-u,a+2*l,o+2*u),e.style("filter",!0).value=s},this.render=function(t){}},e.Element.filter.prototype=new e.Element.ElementBase,e.Element.feMorphology=function(t){this.base=e.Element.ElementBase,this.base(t),this.apply=function(t,e,n,r,i){}},e.Element.feMorphology.prototype=new e.Element.ElementBase,e.Element.feComposite=function(t){this.base=e.Element.ElementBase,this.base(t),this.apply=function(t,e,n,r,i){}},e.Element.feComposite.prototype=new e.Element.ElementBase,e.Element.feColorMatrix=function(t){function n(t,e,n,r,i,a){return t[n*r*4+4*e+a]}function r(t,e,n,r,i,a,o){t[n*r*4+4*e+a]=o}function i(t,e){var n=a[t];return n*(n<0?e-255:e)}this.base=e.Element.ElementBase,this.base(t);var a=e.ToNumberArray(this.attribute("values").value);switch(this.attribute("type").valueOrDefault("matrix")){case"saturate":var o=a[0];a=[.213+.787*o,.715-.715*o,.072-.072*o,0,0,.213-.213*o,.715+.285*o,.072-.072*o,0,0,.213-.213*o,.715-.715*o,.072+.928*o,0,0,0,0,0,1,0,0,0,0,0,1];break;case"hueRotate":var s=a[0]*Math.PI/180,l=function(t,e,n){return t+Math.cos(s)*e+Math.sin(s)*n};a=[l(.213,.787,-.213),l(.715,-.715,-.715),l(.072,-.072,.928),0,0,l(.213,-.213,.143),l(.715,.285,.14),l(.072,-.072,-.283),0,0,l(.213,-.213,-.787),l(.715,-.715,.715),l(.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break;case"luminanceToAlpha":a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1]}this.apply=function(t,e,a,o,s){for(var l=t.getImageData(0,0,o,s),a=0;a<s;a++)for(var e=0;e<o;e++){var u=n(l.data,e,a,o,0,0),h=n(l.data,e,a,o,0,1),c=n(l.data,e,a,o,0,2),f=n(l.data,e,a,o,0,3);r(l.data,e,a,o,0,0,i(0,u)+i(1,h)+i(2,c)+i(3,f)+i(4,1)),r(l.data,e,a,o,0,1,i(5,u)+i(6,h)+i(7,c)+i(8,f)+i(9,1)),r(l.data,e,a,o,0,2,i(10,u)+i(11,h)+i(12,c)+i(13,f)+i(14,1)),r(l.data,e,a,o,0,3,i(15,u)+i(16,h)+i(17,c)+i(18,f)+i(19,1))}t.clearRect(0,0,o,s),t.putImageData(l,0,0)}},e.Element.feColorMatrix.prototype=new e.Element.ElementBase,e.Element.feGaussianBlur=function(t){this.base=e.Element.ElementBase,this.base(t),this.blurRadius=Math.floor(this.attribute("stdDeviation").numValue()),this.extraFilterDistance=this.blurRadius,this.apply=function(t,n,r,i,a){void 0!==vs.canvasRGBA?(t.canvas.id=e.UniqueId(),t.canvas.style.display="none",document.body.appendChild(t.canvas),vs.canvasRGBA(t.canvas.id,n,r,i,a,this.blurRadius),document.body.removeChild(t.canvas)):e.log("ERROR: StackBlur.js must be included for blur to work")}},e.Element.feGaussianBlur.prototype=new e.Element.ElementBase,e.Element.title=function(t){},e.Element.title.prototype=new e.Element.ElementBase,e.Element.desc=function(t){},e.Element.desc.prototype=new e.Element.ElementBase,e.Element.MISSING=function(t){e.log("ERROR: Element '"+t.nodeName+"' not yet implemented.")},e.Element.MISSING.prototype=new e.Element.ElementBase,e.CreateElement=function(t){var n=t.nodeName.replace(/^[^:]+:/,"");n=n.replace(/\-/g,"");var r=null;return r=void 0!==e.Element[n]?new e.Element[n](t):new e.Element.MISSING(t),r.type=t.nodeName,r},e.load=function(t,n){e.loadXml(t,e.ajax(n))},e.loadXml=function(t,n){e.loadXmlDoc(t,e.parseXml(n))},e.loadXmlDoc=function(t,n){e.init(t);var r=function(e){for(var n=t.canvas;n;)e.x-=n.offsetLeft,e.y-=n.offsetTop,n=n.offsetParent;return window.scrollX&&(e.x+=window.scrollX),window.scrollY&&(e.y+=window.scrollY),e};1!=e.opts.ignoreMouse&&(t.canvas.onclick=function(t){var n=r(new e.Point(null!=t?t.clientX:event.clientX,null!=t?t.clientY:event.clientY));e.Mouse.onclick(n.x,n.y)},t.canvas.onmousemove=function(t){var n=r(new e.Point(null!=t?t.clientX:event.clientX,null!=t?t.clientY:event.clientY));e.Mouse.onmousemove(n.x,n.y)});var i=e.CreateElement(n.documentElement);i.root=!0,i.addStylesFromStyleDefinition();var a=!0,o=function(){e.ViewPort.Clear(),t.canvas.parentNode&&e.ViewPort.SetCurrent(t.canvas.parentNode.clientWidth,t.canvas.parentNode.clientHeight),1!=e.opts.ignoreDimensions&&(i.style("width").hasValue()&&(t.canvas.width=i.style("width").toPixels("x"),t.canvas.style.width=t.canvas.width+"px"),i.style("height").hasValue()&&(t.canvas.height=i.style("height").toPixels("y"),t.canvas.style.height=t.canvas.height+"px"));var r=t.canvas.clientWidth||t.canvas.width,o=t.canvas.clientHeight||t.canvas.height;if(1==e.opts.ignoreDimensions&&i.style("width").hasValue()&&i.style("height").hasValue()&&(r=i.style("width").toPixels("x"),o=i.style("height").toPixels("y")),e.ViewPort.SetCurrent(r,o),null!=e.opts.offsetX&&(i.attribute("x",!0).value=e.opts.offsetX),null!=e.opts.offsetY&&(i.attribute("y",!0).value=e.opts.offsetY),null!=e.opts.scaleWidth||null!=e.opts.scaleHeight){var s=null,l=null,u=e.ToNumberArray(i.attribute("viewBox").value);null!=e.opts.scaleWidth&&(i.attribute("width").hasValue()?s=i.attribute("width").toPixels("x")/e.opts.scaleWidth:isNaN(u[2])||(s=u[2]/e.opts.scaleWidth)),null!=e.opts.scaleHeight&&(i.attribute("height").hasValue()?l=i.attribute("height").toPixels("y")/e.opts.scaleHeight:isNaN(u[3])||(l=u[3]/e.opts.scaleHeight)),null==s&&(s=l),null==l&&(l=s),i.attribute("width",!0).value=e.opts.scaleWidth,i.attribute("height",!0).value=e.opts.scaleHeight,i.style("transform",!0,!0).value+=" scale("+1/s+","+1/l+")"}1!=e.opts.ignoreClear&&t.clearRect(0,0,r,o),i.render(t),a&&(a=!1,"function"==typeof e.opts.renderCallback&&e.opts.renderCallback(n))},s=!0;e.ImagesLoaded()&&(s=!1,o()),e.intervalID=setInterval(function(){var t=!1;if(s&&e.ImagesLoaded()&&(s=!1,t=!0),1!=e.opts.ignoreMouse&&(t|=e.Mouse.hasEvents()),1!=e.opts.ignoreAnimation)for(var n=0;n<e.Animations.length;n++)t|=e.Animations[n].update(1e3/e.FRAMERATE);"function"==typeof e.opts.forceRedraw&&1==e.opts.forceRedraw()&&(t=!0),t&&(o(),e.Mouse.runEvents())},1e3/e.FRAMERATE)},e.stop=function(){e.intervalID&&clearInterval(e.intervalID)},e.Mouse=new function(){this.events=[],this.hasEvents=function(){return 0!=this.events.length},this.onclick=function(t,e){this.events.push({type:"onclick",x:t,y:e,run:function(t){t.onclick&&t.onclick()}})},this.onmousemove=function(t,e){this.events.push({type:"onmousemove",x:t,y:e,run:function(t){t.onmousemove&&t.onmousemove()}})},this.eventElements=[],this.checkPath=function(t,e){for(var n=0;n<this.events.length;n++){var r=this.events[n];e.isPointInPath&&e.isPointInPath(r.x,r.y)&&(this.eventElements[n]=t)}},this.checkBoundingBox=function(t,e){for(var n=0;n<this.events.length;n++){var r=this.events[n];e.isPointInBox(r.x,r.y)&&(this.eventElements[n]=t)}},this.runEvents=function(){e.ctx.canvas.style.cursor="";for(var t=0;t<this.events.length;t++)for(var n=this.events[t],r=this.eventElements[t];r;)n.run(r),r=r.parent;this.events=[],this.eventElements=[]}},e}function v(t,e,n){void 0!==e&&null!==e||(e=.5);var r=t.find("svg");{if(0!==r.length){t.find("svg").find("text").css("font","10px sans-serif"),t.find("path").attr("fill","none"),t.find(".tick line, path.domain").attr("stroke","black");var i=(new XMLSerializer).serializeToString(r[0]);r.hide();var a=document.createElement("canvas");a.setAttribute("id","elcanvas"),t[0].appendChild(a),bs("elcanvas",i,{ignoreMouse:!0,ignoreAnimation:!0,log:!0}),t.find(".laimg").remove();var o=new Image;return o.className="laimg",t[0].appendChild(o),o.src=a.toDataURL("image/png",e),t.find("#elcanvas").remove(),n&&n(o),o}n&&n()}}function b(t,e){var n=t.find("svg");{if(0!==n.length){t.find("svg").find("text").css("font","10px sans-serif"),t.find("path").attr("fill","none"),t.find(".tick line, path.domain").attr("stroke","black"),t.find("canvas").remove();var r=t.find(".c3-tooltip-container").detach(),i=t.html().trim(),a=document.createElement("canvas");return t[0].appendChild(a),n.hide(),t.append(r),bs(a,i),e&&e(a),a}e&&e()}}function w(t){var e=t[0].cloneNode(!0),n=e.style;return n.position="relative",n["box-sizing"]="content-box",n.width=t.width()+"px",n.height=t.height()+"px",n.top=window.innerHeight+"px",n.left=0,document.body.appendChild(e),e}var x=n(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),E=n(function(t){var e=t.exports={version:"2.5.1"};"number"==typeof __e&&(__e=e)}),T=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},P=function(t,e,n){if(T(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}},C=function(t){return"object"==typeof t?null!==t:"function"==typeof t},S=function(t){if(!C(t))throw TypeError(t+" is not an object!");return t},O=function(t){try{return!!t()}catch(t){return!0}},k=!O(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),I=x.document,R=C(I)&&C(I.createElement),M=function(t){return R?I.createElement(t):{}},N=!k&&!O(function(){return 7!=Object.defineProperty(M("div"),"a",{get:function(){return 7}}).a}),A=function(t,e){if(!C(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!C(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!C(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!C(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},B=Object.defineProperty,_={f:k?Object.defineProperty:function(t,e,n){if(S(t),e=A(e,!0),S(n),N)try{return B(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},L=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},V=k?function(t,e,n){return _.f(t,e,L(1,n))}:function(t,e,n){return t[e]=n,t},D=function(t,e,n){var r,i,a,o=t&D.F,s=t&D.G,l=t&D.S,u=t&D.P,h=t&D.B,c=t&D.W,f=s?E:E[e]||(E[e]={}),d=f.prototype,p=s?x:l?x[e]:(x[e]||{}).prototype;s&&(n=e);for(r in n)(i=!o&&p&&void 0!==p[r])&&r in f||(a=i?p[r]:n[r],f[r]=s&&"function"!=typeof p[r]?n[r]:h&&i?P(a,x):c&&p[r]==a?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(a):u&&"function"==typeof a?P(Function.call,a):a,u&&((f.virtual||(f.virtual={}))[r]=a,t&D.R&&d&&!d[r]&&V(d,r,a)))};D.F=1,D.G=2,D.S=4,D.P=8,D.B=16,D.W=32,D.U=64,D.R=128;var F=D,U={}.hasOwnProperty,G=function(t,e){return U.call(t,e)},W={}.toString,X=function(t){return W.call(t).slice(8,-1)},j=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==X(t)?t.split(""):Object(t)},H=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t},z=function(t){return j(H(t))},Y=Math.ceil,q=Math.floor,K=function(t){return isNaN(t=+t)?0:(t>0?q:Y)(t)},Z=Math.min,J=function(t){return t>0?Z(K(t),9007199254740991):0},Q=Math.max,tt=Math.min,et=function(t,e){return(t=K(t))<0?Q(t+e,0):tt(t,e)},nt=x["__core-js_shared__"]||(x["__core-js_shared__"]={}),rt=function(t){return nt[t]||(nt[t]={})},it=0,at=Math.random(),ot=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++it+at).toString(36))},st=rt("keys"),lt=function(t){return st[t]||(st[t]=ot(t))},ut=function(t){return function(e,n,r){var i,a=z(e),o=J(a.length),s=et(r,o);if(t&&n!=n){for(;o>s;)if((i=a[s++])!=i)return!0}else for(;o>s;s++)if((t||s in a)&&a[s]===n)return t||s||0;return!t&&-1}}(!1),ht=lt("IE_PROTO"),ct=function(t,e){var n,r=z(t),i=0,a=[];for(n in r)n!=ht&&G(r,n)&&a.push(n);for(;e.length>i;)G(r,n=e[i++])&&(~ut(a,n)||a.push(n));return a},ft="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),dt=Object.keys||function(t){return ct(t,ft)},pt={f:Object.getOwnPropertySymbols},mt={f:{}.propertyIsEnumerable},gt=function(t){return Object(H(t))},yt=Object.assign,vt=!yt||O(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=yt({},t)[n]||Object.keys(yt({},e)).join("")!=r})?function(t,e){for(var n=gt(t),r=arguments.length,i=1,a=pt.f,o=mt.f;r>i;)for(var s,l=j(arguments[i++]),u=a?dt(l).concat(a(l)):dt(l),h=u.length,c=0;h>c;)o.call(l,s=u[c++])&&(n[s]=l[s]);return n}:yt;F(F.S+F.F,"Object",{assign:vt});var bt=E.Object.assign,wt=n(function(t){t.exports={default:bt,__esModule:!0}});e(wt);var xt=e(n(function(t,e){e.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(wt);e.default=n.default||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}})),Et=V,Tt={},Pt=k?Object.defineProperties:function(t,e){S(t);for(var n,r=dt(e),i=r.length,a=0;i>a;)_.f(t,n=r[a++],e[n]);return t},Ct=x.document,St=Ct&&Ct.documentElement,Ot=lt("IE_PROTO"),kt=function(){},It=function(){var t,e=M("iframe"),n=ft.length;for(e.style.display="none",St.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),It=t.F;n--;)delete It.prototype[ft[n]];return It()},Rt=Object.create||function(t,e){var n;return null!==t?(kt.prototype=S(t),n=new kt,kt.prototype=null,n[Ot]=t):n=It(),void 0===e?n:Pt(n,e)},Mt=n(function(t){var e=rt("wks"),n=x.Symbol,r="function"==typeof n;(t.exports=function(t){return e[t]||(e[t]=r&&n[t]||(r?n:ot)("Symbol."+t))}).store=e}),Nt=_.f,At=Mt("toStringTag"),Bt=function(t,e,n){t&&!G(t=n?t:t.prototype,At)&&Nt(t,At,{configurable:!0,value:e})},_t={};V(_t,Mt("iterator"),function(){return this});var Lt=function(t,e,n){t.prototype=Rt(_t,{next:L(1,n)}),Bt(t,e+" Iterator")},Vt=lt("IE_PROTO"),Dt=Object.prototype,Ft=Object.getPrototypeOf||function(t){return t=gt(t),G(t,Vt)?t[Vt]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Dt:null},Ut=Mt("iterator"),Gt=!([].keys&&"next"in[].keys()),Wt=function(){return this},Xt=function(t,e,n,r,i,a,o){Lt(n,e,r);var s,l,u,h=function(t){if(!Gt&&t in p)return p[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},c=e+" Iterator",f="values"==i,d=!1,p=t.prototype,m=p[Ut]||p["@@iterator"]||i&&p[i],g=m||h(i),y=i?f?h("entries"):g:void 0,v="Array"==e?p.entries||m:m;if(v&&(u=Ft(v.call(new t)))!==Object.prototype&&u.next&&Bt(u,c,!0),f&&m&&"values"!==m.name&&(d=!0,g=function(){return m.call(this)}),o&&(Gt||d||!p[Ut])&&V(p,Ut,g),Tt[e]=g,Tt[c]=Wt,i)if(s={values:f?g:h("values"),keys:a?g:h("keys"),entries:y},o)for(l in s)l in p||Et(p,l,s[l]);else F(F.P+F.F*(Gt||d),e,s);return s},jt=function(t){return function(e,n){var r,i,a=String(H(e)),o=K(n),s=a.length;return o<0||o>=s?t?"":void 0:(r=a.charCodeAt(o))<55296||r>56319||o+1===s||(i=a.charCodeAt(o+1))<56320||i>57343?t?a.charAt(o):r:t?a.slice(o,o+2):i-56320+(r-55296<<10)+65536}}(!0);Xt(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=jt(e,n),this._i+=t.length,{value:t,done:!1})});var Ht=function(t,e){return{value:e,done:!!t}};Xt(Array,"Array",function(t,e){this._t=z(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,Ht(1)):"keys"==e?Ht(0,n):"values"==e?Ht(0,t[n]):Ht(0,[n,t[n]])},"values");Tt.Arguments=Tt.Array;for(var zt=Mt("toStringTag"),Yt="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),qt=0;qt<Yt.length;qt++){var $t=Yt[qt],Kt=x[$t],Zt=Kt&&Kt.prototype;Zt&&!Zt[zt]&&V(Zt,zt,$t),Tt[$t]=Tt.Array}var Jt={f:Mt},Qt=Jt.f("iterator"),te=n(function(t){t.exports={default:Qt,__esModule:!0}});e(te);var ee=n(function(t){var e=ot("meta"),n=_.f,r=0,i=Object.isExtensible||function(){return!0},a=!O(function(){return i(Object.preventExtensions({}))}),o=function(t){n(t,e,{value:{i:"O"+ ++r,w:{}}})},s=t.exports={KEY:e,NEED:!1,fastKey:function(t,n){if(!C(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!G(t,e)){if(!i(t))return"F";if(!n)return"E";o(t)}return t[e].i},getWeak:function(t,n){if(!G(t,e)){if(!i(t))return!0;if(!n)return!1;o(t)}return t[e].w},onFreeze:function(t){return a&&s.NEED&&i(t)&&!G(t,e)&&o(t),t}}}),ne=_.f,re=function(t){var e=E.Symbol||(E.Symbol={});"_"==t.charAt(0)||t in e||ne(e,t,{value:Jt.f(t)})},ie=function(t){var e=dt(t),n=pt.f;if(n)for(var r,i=n(t),a=mt.f,o=0;i.length>o;)a.call(t,r=i[o++])&&e.push(r);return e},ae=Array.isArray||function(t){return"Array"==X(t)},oe=ft.concat("length","prototype"),se={f:Object.getOwnPropertyNames||function(t){return ct(t,oe)}},le=se.f,ue={}.toString,he="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],ce=function(t){try{return le(t)}catch(t){return he.slice()}},fe={f:function(t){return he&&"[object Window]"==ue.call(t)?ce(t):le(z(t))}},de=Object.getOwnPropertyDescriptor,pe={f:k?de:function(t,e){if(t=z(t),e=A(e,!0),N)try{return de(t,e)}catch(t){}if(G(t,e))return L(!mt.f.call(t,e),t[e])}},me=ee.KEY,ge=pe.f,ye=_.f,ve=fe.f,be=x.Symbol,we=x.JSON,xe=we&&we.stringify,Ee=Mt("_hidden"),Te=Mt("toPrimitive"),Pe={}.propertyIsEnumerable,Ce=rt("symbol-registry"),Se=rt("symbols"),Oe=rt("op-symbols"),ke=Object.prototype,Ie="function"==typeof be,Re=x.QObject,Me=!Re||!Re.prototype||!Re.prototype.findChild,Ne=k&&O(function(){return 7!=Rt(ye({},"a",{get:function(){return ye(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=ge(ke,e);r&&delete ke[e],ye(t,e,n),r&&t!==ke&&ye(ke,e,r)}:ye,Ae=function(t){var e=Se[t]=Rt(be.prototype);return e._k=t,e},Be=Ie&&"symbol"==typeof be.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof be},_e=function(t,e,n){return t===ke&&_e(Oe,e,n),S(t),e=A(e,!0),S(n),G(Se,e)?(n.enumerable?(G(t,Ee)&&t[Ee][e]&&(t[Ee][e]=!1),n=Rt(n,{enumerable:L(0,!1)})):(G(t,Ee)||ye(t,Ee,L(1,{})),t[Ee][e]=!0),Ne(t,e,n)):ye(t,e,n)},Le=function(t,e){S(t);for(var n,r=ie(e=z(e)),i=0,a=r.length;a>i;)_e(t,n=r[i++],e[n]);return t},Ve=function(t){var e=Pe.call(this,t=A(t,!0));return!(this===ke&&G(Se,t)&&!G(Oe,t))&&(!(e||!G(this,t)||!G(Se,t)||G(this,Ee)&&this[Ee][t])||e)},De=function(t,e){if(t=z(t),e=A(e,!0),t!==ke||!G(Se,e)||G(Oe,e)){var n=ge(t,e);return!n||!G(Se,e)||G(t,Ee)&&t[Ee][e]||(n.enumerable=!0),n}},Fe=function(t){for(var e,n=ve(z(t)),r=[],i=0;n.length>i;)G(Se,e=n[i++])||e==Ee||e==me||r.push(e);return r},Ue=function(t){for(var e,n=t===ke,r=ve(n?Oe:z(t)),i=[],a=0;r.length>a;)!G(Se,e=r[a++])||n&&!G(ke,e)||i.push(Se[e]);return i};Ie||(Et((be=function(){if(this instanceof be)throw TypeError("Symbol is not a constructor!");var t=ot(arguments.length>0?arguments[0]:void 0),e=function(n){this===ke&&e.call(Oe,n),G(this,Ee)&&G(this[Ee],t)&&(this[Ee][t]=!1),Ne(this,t,L(1,n))};return k&&Me&&Ne(ke,t,{configurable:!0,set:e}),Ae(t)}).prototype,"toString",function(){return this._k}),pe.f=De,_.f=_e,se.f=fe.f=Fe,mt.f=Ve,pt.f=Ue,Jt.f=function(t){return Ae(Mt(t))}),F(F.G+F.W+F.F*!Ie,{Symbol:be});for(var Ge="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),We=0;Ge.length>We;)Mt(Ge[We++]);for(var Xe=dt(Mt.store),je=0;Xe.length>je;)re(Xe[je++]);F(F.S+F.F*!Ie,"Symbol",{for:function(t){return G(Ce,t+="")?Ce[t]:Ce[t]=be(t)},keyFor:function(t){if(!Be(t))throw TypeError(t+" is not a symbol!");for(var e in Ce)if(Ce[e]===t)return e},useSetter:function(){Me=!0},useSimple:function(){Me=!1}}),F(F.S+F.F*!Ie,"Object",{create:function(t,e){return void 0===e?Rt(t):Le(Rt(t),e)},defineProperty:_e,defineProperties:Le,getOwnPropertyDescriptor:De,getOwnPropertyNames:Fe,getOwnPropertySymbols:Ue}),we&&F(F.S+F.F*(!Ie||O(function(){var t=be();return"[null]"!=xe([t])||"{}"!=xe({a:t})||"{}"!=xe(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!Be(t)){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);return"function"==typeof(e=r[1])&&(n=e),!n&&ae(e)||(e=function(t,e){if(n&&(e=n.call(this,t,e)),!Be(e))return e}),r[1]=e,xe.apply(we,r)}}}),be.prototype[Te]||V(be.prototype,Te,be.prototype.valueOf),Bt(be,"Symbol"),Bt(Math,"Math",!0),Bt(x.JSON,"JSON",!0),re("asyncIterator"),re("observable");var He=E.Symbol,ze=n(function(t){t.exports={default:He,__esModule:!0}});e(ze);var Ye,qe,$e,Ke=e(n(function(t,e){function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=n(te),i=n(ze),a="function"==typeof i.default&&"symbol"==typeof r.default?function(t){return typeof t}:function(t){return t&&"function"==typeof i.default&&t.constructor===i.default&&t!==i.default.prototype?"symbol":typeof t};e.default="function"==typeof i.default&&"symbol"===a(r.default)?function(t){return void 0===t?"undefined":a(t)}:function(t){return t&&"function"==typeof i.default&&t.constructor===i.default&&t!==i.default.prototype?"symbol":void 0===t?"undefined":a(t)}})),Ze=Mt("toStringTag"),Je="Arguments"==X(function(){return arguments}()),Qe=function(t,e){try{return t[e]}catch(t){}},tn=function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=Qe(e=Object(t),Ze))?n:Je?X(e):"Object"==(r=X(e))&&"function"==typeof e.callee?"Arguments":r},en=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t},nn=function(t,e,n,r){try{return r?e(S(n)[0],n[1]):e(n)}catch(e){var i=t.return;throw void 0!==i&&S(i.call(t)),e}},rn=Mt("iterator"),an=Array.prototype,on=function(t){return void 0!==t&&(Tt.Array===t||an[rn]===t)},sn=Mt("iterator"),ln=E.getIteratorMethod=function(t){if(void 0!=t)return t[sn]||t["@@iterator"]||Tt[tn(t)]},un=n(function(t){var e={},n={},r=t.exports=function(t,r,i,a,o){var s,l,u,h,c=o?function(){return t}:ln(t),f=P(i,a,r?2:1),d=0;if("function"!=typeof c)throw TypeError(t+" is not iterable!");if(on(c)){for(s=J(t.length);s>d;d++)if((h=r?f(S(l=t[d])[0],l[1]):f(t[d]))===e||h===n)return h}else for(u=c.call(t);!(l=u.next()).done;)if((h=nn(u,f,l.value,r))===e||h===n)return h};r.BREAK=e,r.RETURN=n}),hn=Mt("species"),cn=function(t,e){var n,r=S(t).constructor;return void 0===r||void 0==(n=S(r)[hn])?e:T(n)},fn=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)},dn=x.process,pn=x.setImmediate,mn=x.clearImmediate,gn=x.MessageChannel,yn=x.Dispatch,vn=0,bn={},wn=function(){var t=+this;if(bn.hasOwnProperty(t)){var e=bn[t];delete bn[t],e()}},xn=function(t){wn.call(t.data)};pn&&mn||(pn=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return bn[++vn]=function(){fn("function"==typeof t?t:Function(t),e)},Ye(vn),vn},mn=function(t){delete bn[t]},"process"==X(dn)?Ye=function(t){dn.nextTick(P(wn,t,1))}:yn&&yn.now?Ye=function(t){yn.now(P(wn,t,1))}:gn?($e=(qe=new gn).port2,qe.port1.onmessage=xn,Ye=P($e.postMessage,$e,1)):x.addEventListener&&"function"==typeof postMessage&&!x.importScripts?(Ye=function(t){x.postMessage(t+"","*")},x.addEventListener("message",xn,!1)):Ye="onreadystatechange"in M("script")?function(t){St.appendChild(M("script")).onreadystatechange=function(){St.removeChild(this),wn.call(t)}}:function(t){setTimeout(P(wn,t,1),0)});var En={set:pn,clear:mn},Tn=En.set,Pn=x.MutationObserver||x.WebKitMutationObserver,Cn=x.process,Sn=x.Promise,On="process"==X(Cn),kn={f:function(t){return new r(t)}},In=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}},Rn=function(t,e){if(S(t),C(e)&&e.constructor===t)return e;var n=kn.f(t);return(0,n.resolve)(e),n.promise},Mn=Mt("species"),Nn=Mt("iterator"),An=!1;try{[7][Nn]().return=function(){An=!0}}catch(t){}var Bn,_n,Ln,Vn,Dn=function(t,e){if(!e&&!An)return!1;var n=!1;try{var r=[7],i=r[Nn]();i.next=function(){return{done:n=!0}},r[Nn]=function(){return i},t(r)}catch(t){}return n},Fn=En.set,Un=function(){var t,e,n,r=function(){var r,i;for(On&&(r=Cn.domain)&&r.exit();t;){i=t.fn,t=t.next;try{i()}catch(r){throw t?n():e=void 0,r}}e=void 0,r&&r.enter()};if(On)n=function(){Cn.nextTick(r)};else if(Pn){var i=!0,a=document.createTextNode("");new Pn(r).observe(a,{characterData:!0}),n=function(){a.data=i=!i}}else if(Sn&&Sn.resolve){var o=Sn.resolve();n=function(){o.then(r)}}else n=function(){Tn.call(x,r)};return function(r){var i={fn:r,next:void 0};e&&(e.next=i),t||(t=i,n()),e=i}}(),Gn=x.TypeError,Wn=x.process,Xn=x.Promise,jn="process"==tn(Wn),Hn=function(){},zn=_n=kn.f,Yn=!!function(){try{var t=Xn.resolve(1),e=(t.constructor={})[Mt("species")]=function(t){t(Hn,Hn)};return(jn||"function"==typeof PromiseRejectionEvent)&&t.then(Hn)instanceof e}catch(t){}}(),qn=function(t){var e;return!(!C(t)||"function"!=typeof(e=t.then))&&e},$n=function(t,e){if(!t._n){t._n=!0;var n=t._c;Un(function(){for(var r=t._v,i=1==t._s,a=0;n.length>a;)!function(e){var n,a,o=i?e.ok:e.fail,s=e.resolve,l=e.reject,u=e.domain;try{o?(i||(2==t._h&&Jn(t),t._h=1),!0===o?n=r:(u&&u.enter(),n=o(r),u&&u.exit()),n===e.promise?l(Gn("Promise-chain cycle")):(a=qn(n))?a.call(n,s,l):s(n)):l(r)}catch(t){l(t)}}(n[a++]);t._c=[],t._n=!1,e&&!t._h&&Kn(t)})}},Kn=function(t){Fn.call(x,function(){var e,n,r,i=t._v,a=Zn(t);if(a&&(e=In(function(){jn?Wn.emit("unhandledRejection",i,t):(n=x.onunhandledrejection)?n({promise:t,reason:i}):(r=x.console)&&r.error&&r.error("Unhandled promise rejection",i)}),t._h=jn||Zn(t)?2:1),t._a=void 0,a&&e.e)throw e.v})},Zn=function(t){if(1==t._h)return!1;for(var e,n=t._a||t._c,r=0;n.length>r;)if((e=n[r++]).fail||!Zn(e.promise))return!1;return!0},Jn=function(t){Fn.call(x,function(){var e;jn?Wn.emit("rejectionHandled",t):(e=x.onrejectionhandled)&&e({promise:t,reason:t._v})})},Qn=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),$n(e,!0))},tr=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw Gn("Promise can't be resolved itself");(e=qn(t))?Un(function(){var r={_w:n,_d:!1};try{e.call(t,P(tr,r,1),P(Qn,r,1))}catch(t){Qn.call(r,t)}}):(n._v=t,n._s=1,$n(n,!1))}catch(t){Qn.call({_w:n,_d:!1},t)}}};Yn||(Xn=function(t){en(this,Xn,"Promise","_h"),T(t),Bn.call(this);try{t(P(tr,this,1),P(Qn,this,1))}catch(t){Qn.call(this,t)}},(Bn=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=function(t,e,n){for(var r in e)n&&t[r]?t[r]=e[r]:V(t,r,e[r]);return t}(Xn.prototype,{then:function(t,e){var n=zn(cn(this,Xn));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=jn?Wn.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&$n(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),Ln=function(){var t=new Bn;this.promise=t,this.resolve=P(tr,t,1),this.reject=P(Qn,t,1)},kn.f=zn=function(t){return t===Xn||t===Vn?new Ln(t):_n(t)}),F(F.G+F.W+F.F*!Yn,{Promise:Xn}),Bt(Xn,"Promise"),function(t){var e="function"==typeof E[t]?E[t]:x[t];k&&e&&!e[Mn]&&_.f(e,Mn,{configurable:!0,get:function(){return this}})}("Promise"),Vn=E.Promise,F(F.S+F.F*!Yn,"Promise",{reject:function(t){var e=zn(this);return(0,e.reject)(t),e.promise}}),F(F.S+!0*F.F,"Promise",{resolve:function(t){return Rn(this===Vn?Xn:this,t)}}),F(F.S+F.F*!(Yn&&Dn(function(t){Xn.all(t).catch(Hn)})),"Promise",{all:function(t){var e=this,n=zn(e),r=n.resolve,i=n.reject,a=In(function(){var n=[],a=0,o=1;un(t,!1,function(t){var s=a++,l=!1;n.push(void 0),o++,e.resolve(t).then(function(t){l||(l=!0,n[s]=t,--o||r(n))},i)}),--o||r(n)});return a.e&&i(a.v),n.promise},race:function(t){var e=this,n=zn(e),r=n.reject,i=In(function(){un(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return i.e&&r(i.v),n.promise}}),F(F.P+F.R,"Promise",{finally:function(t){var e=cn(this,E.Promise||x.Promise),n="function"==typeof t;return this.then(n?function(n){return Rn(e,t()).then(function(){return n})}:t,n?function(n){return Rn(e,t()).then(function(){throw n})}:t)}}),F(F.S,"Promise",{try:function(t){var e=kn.f(this),n=In(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}});var er=E.Promise,nr=e(n(function(t){t.exports={default:er,__esModule:!0}})),rr=e(n(function(t,e){e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}}));F(F.S+F.F*!k,"Object",{defineProperty:_.f});var ir=E.Object,ar=function(t,e,n){return ir.defineProperty(t,e,n)},or=n(function(t){t.exports={default:ar,__esModule:!0}});e(or);var sr=e(n(function(t,e){e.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(or);e.default=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),(0,n.default)(t,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()})),lr={VECTOR:0,BEZIER_CURVE:1,CIRCLE:2},ur=Mt("iterator"),hr=E.isIterable=function(t){var e=Object(t);return void 0!==e[ur]||"@@iterator"in e||Tt.hasOwnProperty(tn(e))},cr=n(function(t){t.exports={default:hr,__esModule:!0}});e(cr);var fr=E.getIterator=function(t){var e=ln(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return S(e.call(t))},dr=n(function(t){t.exports={default:fr,__esModule:!0}});e(dr);var pr=e(n(function(t,e){function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=n(cr),i=n(dr);e.default=function(){function t(t,e){var n=[],r=!0,a=!1,o=void 0;try{for(var s,l=(0,i.default)(t);!(r=(s=l.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){a=!0,o=t}finally{try{!r&&l.return&&l.return()}finally{if(a)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if((0,r.default)(Object(e)))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()})),mr=/^#([a-f0-9]{3})$/i,gr=function(t){var e=t.match(mr);return!!e&&[parseInt(e[1][0]+e[1][0],16),parseInt(e[1][1]+e[1][1],16),parseInt(e[1][2]+e[1][2],16),null]},yr=/^#([a-f0-9]{6})$/i,vr=function(t){var e=t.match(yr);return!!e&&[parseInt(e[1].substring(0,2),16),parseInt(e[1].substring(2,4),16),parseInt(e[1].substring(4,6),16),null]},br=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/,wr=function(t){var e=t.match(br);return!!e&&[Number(e[1]),Number(e[2]),Number(e[3]),null]},xr=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d?\.?\d+)\s*\)$/,Er=function(t){var e=t.match(xr);return!!(e&&e.length>4)&&[Number(e[1]),Number(e[2]),Number(e[3]),Number(e[4])]},Tr=function(t){return[Math.min(t[0],255),Math.min(t[1],255),Math.min(t[2],255),t.length>3?t[3]:null]},Pr=function(t){var e=Sr[t.toLowerCase()];return e||!1},Cr=function(){function t(e){rr(this,t);var n=Array.isArray(e)?Tr(e):gr(e)||wr(e)||Er(e)||Pr(e)||vr(e)||[0,0,0,null],r=pr(n,4),i=r[0],a=r[1],o=r[2],s=r[3];this.r=i,this.g=a,this.b=o,this.a=s}return sr(t,[{key:"isTransparent",value:function(){return 0===this.a}},{key:"toString",value:function(){return null!==this.a&&1!==this.a?"rgba("+this.r+","+this.g+","+this.b+","+this.a+")":"rgb("+this.r+","+this.g+","+this.b+")"}}]),t}(),Sr={transparent:[0,0,0,0],aliceblue:[240,248,255,null],antiquewhite:[250,235,215,null],aqua:[0,255,255,null],aquamarine:[127,255,212,null],azure:[240,255,255,null],beige:[245,245,220,null],bisque:[255,228,196,null],black:[0,0,0,null],blanchedalmond:[255,235,205,null],blue:[0,0,255,null],blueviolet:[138,43,226,null],brown:[165,42,42,null],burlywood:[222,184,135,null],cadetblue:[95,158,160,null],chartreuse:[127,255,0,null],chocolate:[210,105,30,null],coral:[255,127,80,null],cornflowerblue:[100,149,237,null],cornsilk:[255,248,220,null],crimson:[220,20,60,null],cyan:[0,255,255,null],darkblue:[0,0,139,null],darkcyan:[0,139,139,null],darkgoldenrod:[184,134,11,null],darkgray:[169,169,169,null],darkgreen:[0,100,0,null],darkgrey:[169,169,169,null],darkkhaki:[189,183,107,null],darkmagenta:[139,0,139,null],darkolivegreen:[85,107,47,null],darkorange:[255,140,0,null],darkorchid:[153,50,204,null],darkred:[139,0,0,null],darksalmon:[233,150,122,null],darkseagreen:[143,188,143,null],darkslateblue:[72,61,139,null],darkslategray:[47,79,79,null],darkslategrey:[47,79,79,null],darkturquoise:[0,206,209,null],darkviolet:[148,0,211,null],deeppink:[255,20,147,null],deepskyblue:[0,191,255,null],dimgray:[105,105,105,null],dimgrey:[105,105,105,null],dodgerblue:[30,144,255,null],firebrick:[178,34,34,null],floralwhite:[255,250,240,null],forestgreen:[34,139,34,null],fuchsia:[255,0,255,null],gainsboro:[220,220,220,null],ghostwhite:[248,248,255,null],gold:[255,215,0,null],goldenrod:[218,165,32,null],gray:[128,128,128,null],green:[0,128,0,null],greenyellow:[173,255,47,null],grey:[128,128,128,null],honeydew:[240,255,240,null],hotpink:[255,105,180,null],indianred:[205,92,92,null],indigo:[75,0,130,null],ivory:[255,255,240,null],khaki:[240,230,140,null],lavender:[230,230,250,null],lavenderblush:[255,240,245,null],lawngreen:[124,252,0,null],lemonchiffon:[255,250,205,null],lightblue:[173,216,230,null],lightcoral:[240,128,128,null],lightcyan:[224,255,255,null],lightgoldenrodyellow:[250,250,210,null],lightgray:[211,211,211,null],lightgreen:[144,238,144,null],lightgrey:[211,211,211,null],lightpink:[255,182,193,null],lightsalmon:[255,160,122,null],lightseagreen:[32,178,170,null],lightskyblue:[135,206,250,null],lightslategray:[119,136,153,null],lightslategrey:[119,136,153,null],lightsteelblue:[176,196,222,null],lightyellow:[255,255,224,null],lime:[0,255,0,null],limegreen:[50,205,50,null],linen:[250,240,230,null],magenta:[255,0,255,null],maroon:[128,0,0,null],mediumaquamarine:[102,205,170,null],mediumblue:[0,0,205,null],mediumorchid:[186,85,211,null],mediumpurple:[147,112,219,null],mediumseagreen:[60,179,113,null],mediumslateblue:[123,104,238,null],mediumspringgreen:[0,250,154,null],mediumturquoise:[72,209,204,null],mediumvioletred:[199,21,133,null],midnightblue:[25,25,112,null],mintcream:[245,255,250,null],mistyrose:[255,228,225,null],moccasin:[255,228,181,null],navajowhite:[255,222,173,null],navy:[0,0,128,null],oldlace:[253,245,230,null],olive:[128,128,0,null],olivedrab:[107,142,35,null],orange:[255,165,0,null],orangered:[255,69,0,null],orchid:[218,112,214,null],palegoldenrod:[238,232,170,null],palegreen:[152,251,152,null],paleturquoise:[175,238,238,null],palevioletred:[219,112,147,null],papayawhip:[255,239,213,null],peachpuff:[255,218,185,null],peru:[205,133,63,null],pink:[255,192,203,null],plum:[221,160,221,null],powderblue:[176,224,230,null],purple:[128,0,128,null],rebeccapurple:[102,51,153,null],red:[255,0,0,null],rosybrown:[188,143,143,null],royalblue:[65,105,225,null],saddlebrown:[139,69,19,null],salmon:[250,128,114,null],sandybrown:[244,164,96,null],seagreen:[46,139,87,null],seashell:[255,245,238,null],sienna:[160,82,45,null],silver:[192,192,192,null],skyblue:[135,206,235,null],slateblue:[106,90,205,null],slategray:[112,128,144,null],slategrey:[112,128,144,null],snow:[255,250,250,null],springgreen:[0,255,127,null],steelblue:[70,130,180,null],tan:[210,180,140,null],teal:[0,128,128,null],thistle:[216,191,216,null],tomato:[255,99,71,null],turquoise:[64,224,208,null],violet:[238,130,238,null],wheat:[245,222,179,null],white:[255,255,255,null],whitesmoke:[245,245,245,null],yellow:[255,255,0,null],yellowgreen:[154,205,50,null]},Or=new Cr([0,0,0,0]),kr={SOLID:0,DOUBLE:1,DOTTED:2,DASHED:3,WAVY:4},Ir={NONE:null},Rr={UNDERLINE:1,OVERLINE:2,LINE_THROUGH:3,BLINK:4},Mr=function(t){switch(t){case"underline":return Rr.UNDERLINE;case"overline":return Rr.OVERLINE;case"line-through":return Rr.LINE_THROUGH}return Rr.BLINK},Nr=function(t){return"none"===t?null:t.split(" ").map(Mr)},Ar=function(t){switch(t){case"double":return kr.DOUBLE;case"dotted":return kr.DOTTED;case"dashed":return kr.DASHED;case"wavy":return kr.WAVY}return kr.SOLID},Br=function(t){var e=Nr(t.textDecorationLine?t.textDecorationLine:t.textDecoration);return null===e?Ir.NONE:{textDecorationLine:e,textDecorationColor:t.textDecorationColor?new Cr(t.textDecorationColor):null,textDecorationStyle:Ar(t.textDecorationStyle)}},_r=function(){function t(e){rr(this,t),this.canvas=e||document.createElement("canvas")}return sr(t,[{key:"render",value:function(t){this.ctx=this.canvas.getContext("2d"),this.options=t,this.canvas.width=Math.floor(t.width*t.scale),this.canvas.height=Math.floor(t.height*t.scale),this.canvas.style.width=t.width+"px",this.canvas.style.height=t.height+"px",this.ctx.scale(this.options.scale,this.options.scale),this.ctx.translate(-t.x,-t.y),this.ctx.textBaseline="bottom",t.logger.log("Canvas renderer initialized ("+t.width+"x"+t.height+" at "+t.x+","+t.y+") with scale "+this.options.scale)}},{key:"clip",value:function(t,e){var n=this;t.length&&(this.ctx.save(),t.forEach(function(t){n.path(t),n.ctx.clip()})),e(),t.length&&this.ctx.restore()}},{key:"drawImage",value:function(t,e,n){this.ctx.drawImage(t,e.left,e.top,e.width,e.height,n.left,n.top,n.width,n.height)}},{key:"drawShape",value:function(t,e){this.path(t),this.ctx.fillStyle=e.toString(),this.ctx.fill()}},{key:"fill",value:function(t){this.ctx.fillStyle=t.toString(),this.ctx.fill()}},{key:"getTarget",value:function(){return nr.resolve(this.canvas)}},{key:"path",value:function(t){var e=this;this.ctx.beginPath(),Array.isArray(t)?t.forEach(function(t,n){var r=t.type===lr.VECTOR?t:t.start;0===n?e.ctx.moveTo(r.x,r.y):e.ctx.lineTo(r.x,r.y),t.type===lr.BEZIER_CURVE&&e.ctx.bezierCurveTo(t.startControl.x,t.startControl.y,t.endControl.x,t.endControl.y,t.end.x,t.end.y)}):this.ctx.arc(t.x+t.radius,t.y+t.radius,t.radius,0,2*Math.PI,!0),this.ctx.closePath()}},{key:"rectangle",value:function(t,e,n,r,i){this.ctx.fillStyle=i.toString(),this.ctx.fillRect(t,e,n,r)}},{key:"renderLinearGradient",value:function(t,e){var n=this.ctx.createLinearGradient(t.left+e.direction.x1,t.top+e.direction.y1,t.left+e.direction.x0,t.top+e.direction.y0);e.colorStops.forEach(function(t){n.addColorStop(t.stop,t.color.toString())}),this.ctx.fillStyle=n,this.ctx.fillRect(t.left,t.top,t.width,t.height)}},{key:"renderRepeat",value:function(t,e,n,r,i){this.path(t),this.ctx.fillStyle=this.ctx.createPattern(this.resizeImage(e,n),"repeat"),this.ctx.translate(r,i),this.ctx.fill(),this.ctx.translate(-r,-i)}},{key:"renderTextNode",value:function(t,e,n,r,i){var a=this;this.ctx.font=[n.fontStyle,n.fontVariant,n.fontWeight,n.fontSize,n.fontFamily].join(" ").split(",")[0],t.forEach(function(t){if(a.ctx.fillStyle=e.toString(),i&&t.text.trim().length?i.slice(0).reverse().forEach(function(e){a.ctx.shadowColor=e.color.toString(),a.ctx.shadowOffsetX=e.offsetX*a.options.scale,a.ctx.shadowOffsetY=e.offsetY*a.options.scale,a.ctx.shadowBlur=e.blur,a.ctx.fillText(t.text,t.bounds.left,t.bounds.top+t.bounds.height)}):a.ctx.fillText(t.text,t.bounds.left,t.bounds.top+t.bounds.height),null!==r){var o=r.textDecorationColor||e;r.textDecorationLine.forEach(function(e){switch(e){case Rr.UNDERLINE:var r=a.options.fontMetrics.getMetrics(n).baseline;a.rectangle(t.bounds.left,Math.round(t.bounds.top+r),t.bounds.width,1,o);break;case Rr.OVERLINE:a.rectangle(t.bounds.left,Math.round(t.bounds.top),t.bounds.width,1,o);break;case Rr.LINE_THROUGH:var i=a.options.fontMetrics.getMetrics(n).middle;a.rectangle(t.bounds.left,Math.ceil(t.bounds.top+i),t.bounds.width,1,o)}})}})}},{key:"resizeImage",value:function(t,e){if(t.width===e.width&&t.height===e.height)return t;var n=this.canvas.ownerDocument.createElement("canvas");return n.width=e.width,n.height=e.height,n.getContext("2d").drawImage(t,0,0,t.width,t.height,0,0,e.width,e.height),n}},{key:"setOpacity",value:function(t){this.ctx.globalAlpha=t}},{key:"transform",value:function(t,e,n,r){this.ctx.save(),this.ctx.translate(t,e),this.ctx.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this.ctx.translate(-t,-e),r(),this.ctx.restore()}}]),t}(),Lr=function(){function t(e,n){rr(this,t),this.start=n||Date.now(),this.id=e}return sr(t,[{key:"child",value:function(e){return new t(e,this.start)}},{key:"log",value:function(){if(window.console&&window.console.log){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];Function.prototype.bind.call(window.console.log,window.console).apply(window.console,[Date.now()-this.start+"ms",this.id?"html2canvas ("+this.id+"):":"html2canvas:"].concat([].slice.call(e,0)))}}},{key:"error",value:function(){if(window.console&&window.console.error){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];Function.prototype.bind.call(window.console.error,window.console).apply(window.console,[Date.now()-this.start+"ms",this.id?"html2canvas ("+this.id+"):":"html2canvas:"].concat([].slice.call(e,0)))}}}]),t}(),Vr=function(t,e){return 0!=(t&e)},Dr=function(t,e){for(var n=t.length-1;n>=0;n--){var r=t.item(n);"content"!==r&&e.style.setProperty(r,t.getPropertyValue(r))}return e},Fr={PX:0,PERCENTAGE:1},Ur=function(){function t(e){rr(this,t),this.type="%"===e.substr(e.length-1)?Fr.PERCENTAGE:Fr.PX;var n=parseFloat(e);this.value=isNaN(n)?0:n}return sr(t,[{key:"isPercentage",value:function(){return this.type===Fr.PERCENTAGE}},{key:"getAbsoluteValue",value:function(t){return this.isPercentage()?t*(this.value/100):this.value}}],[{key:"create",value:function(e){return new t(e)}}]),t}(),Gr=function t(e,n){rr(this,t),this.width=e,this.height=n},Wr=function t(e,n){rr(this,t),this.type=lr.VECTOR,this.x=e,this.y=n},Xr=function(t,e,n){return new Wr(t.x+(e.x-t.x)*n,t.y+(e.y-t.y)*n)},jr=function(){function t(e,n,r,i){rr(this,t),this.type=lr.BEZIER_CURVE,this.start=e,this.startControl=n,this.endControl=r,this.end=i}return sr(t,[{key:"subdivide",value:function(e,n){var r=Xr(this.start,this.startControl,e),i=Xr(this.startControl,this.endControl,e),a=Xr(this.endControl,this.end,e),o=Xr(r,i,e),s=Xr(i,a,e),l=Xr(o,s,e);return n?new t(this.start,r,o,l):new t(l,s,a,this.end)}},{key:"reverse",value:function(){return new t(this.end,this.endControl,this.startControl,this.start)}}]),t}(),Hr=function(){function t(e,n,r,i){rr(this,t),this.left=e,this.top=n,this.width=r,this.height=i}return sr(t,null,[{key:"fromClientRect",value:function(e,n,r){return new t(e.left+n,e.top+r,e.width,e.height)}}]),t}(),zr=function(t,e,n){return Hr.fromClientRect(t.getBoundingClientRect(),e,n)},Yr=function(t,e){return new Hr(t.left+e[3].borderWidth,t.top+e[0].borderWidth,t.width-(e[1].borderWidth+e[3].borderWidth),t.height-(e[0].borderWidth+e[2].borderWidth))},qr=function(t,e,n){var r=e[0].value,i=e[1].value,a=e[2].value,o=e[3].value;return new Hr(t.left+o+n[3].borderWidth,t.top+r+n[0].borderWidth,t.width-(n[1].borderWidth+n[3].borderWidth+o+i),t.height-(n[0].borderWidth+n[2].borderWidth+r+a))},$r=function(t){var e=t.body,n=t.documentElement;if(!e||!n)throw new Error("");var r=Math.max(Math.max(e.scrollWidth,n.scrollWidth),Math.max(e.offsetWidth,n.offsetWidth),Math.max(e.clientWidth,n.clientWidth)),i=Math.max(Math.max(e.scrollHeight,n.scrollHeight),Math.max(e.offsetHeight,n.offsetHeight),Math.max(e.clientHeight,n.clientHeight));return new Hr(0,0,r,i)},Kr=function(t,e){switch(e){case 0:return Zr(t.topLeftOuter,t.topLeftInner,t.topRightOuter,t.topRightInner);case 1:return Zr(t.topRightOuter,t.topRightInner,t.bottomRightOuter,t.bottomRightInner);case 2:return Zr(t.bottomRightOuter,t.bottomRightInner,t.bottomLeftOuter,t.bottomLeftInner);case 3:default:return Zr(t.bottomLeftOuter,t.bottomLeftInner,t.topLeftOuter,t.topLeftInner)}},Zr=function(t,e,n,r){var i=[];return t instanceof jr?i.push(t.subdivide(.5,!1)):i.push(t),n instanceof jr?i.push(n.subdivide(.5,!0)):i.push(n),r instanceof jr?i.push(r.subdivide(.5,!0).reverse()):i.push(r),e instanceof jr?i.push(e.subdivide(.5,!1).reverse()):i.push(e),i},Jr=function(t){return[t.topLeftOuter,t.topRightOuter,t.bottomRightOuter,t.bottomLeftOuter]},Qr=function(t){return[t.topLeftInner,t.topRightInner,t.bottomRightInner,t.bottomLeftInner]},ti=function(t,e,n){var r=t.width/2,i=t.height/2,a=n[ei.TOP_LEFT][0].getAbsoluteValue(t.width)<r?n[ei.TOP_LEFT][0].getAbsoluteValue(t.width):r,o=n[ei.TOP_LEFT][1].getAbsoluteValue(t.height)<i?n[ei.TOP_LEFT][1].getAbsoluteValue(t.height):i,s=n[ei.TOP_RIGHT][0].getAbsoluteValue(t.width)<r?n[ei.TOP_RIGHT][0].getAbsoluteValue(t.width):r,l=n[ei.TOP_RIGHT][1].getAbsoluteValue(t.height)<i?n[ei.TOP_RIGHT][1].getAbsoluteValue(t.height):i,u=n[ei.BOTTOM_RIGHT][0].getAbsoluteValue(t.width)<r?n[ei.BOTTOM_RIGHT][0].getAbsoluteValue(t.width):r,h=n[ei.BOTTOM_RIGHT][1].getAbsoluteValue(t.height)<i?n[ei.BOTTOM_RIGHT][1].getAbsoluteValue(t.height):i,c=n[ei.BOTTOM_LEFT][0].getAbsoluteValue(t.width)<r?n[ei.BOTTOM_LEFT][0].getAbsoluteValue(t.width):r,f=n[ei.BOTTOM_LEFT][1].getAbsoluteValue(t.height)<i?n[ei.BOTTOM_LEFT][1].getAbsoluteValue(t.height):i,d=t.width-s,p=t.height-h,m=t.width-u,g=t.height-f;return{topLeftOuter:a>0||o>0?ni(t.left,t.top,a,o,ei.TOP_LEFT):new Wr(t.left,t.top),topLeftInner:a>0||o>0?ni(t.left+e[3].borderWidth,t.top+e[0].borderWidth,Math.max(0,a-e[3].borderWidth),Math.max(0,o-e[0].borderWidth),ei.TOP_LEFT):new Wr(t.left+e[3].borderWidth,t.top+e[0].borderWidth),topRightOuter:s>0||l>0?ni(t.left+d,t.top,s,l,ei.TOP_RIGHT):new Wr(t.left+t.width,t.top),topRightInner:s>0||l>0?ni(t.left+Math.min(d,t.width+e[3].borderWidth),t.top+e[0].borderWidth,d>t.width+e[3].borderWidth?0:s-e[3].borderWidth,l-e[0].borderWidth,ei.TOP_RIGHT):new Wr(t.left+t.width-e[1].borderWidth,t.top+e[0].borderWidth),bottomRightOuter:u>0||h>0?ni(t.left+m,t.top+p,u,h,ei.BOTTOM_RIGHT):new Wr(t.left+t.width,t.top+t.height),bottomRightInner:u>0||h>0?ni(t.left+Math.min(m,t.width-e[3].borderWidth),t.top+Math.min(p,t.height+e[0].borderWidth),Math.max(0,u-e[1].borderWidth),h-e[2].borderWidth,ei.BOTTOM_RIGHT):new Wr(t.left+t.width-e[1].borderWidth,t.top+t.height-e[2].borderWidth),bottomLeftOuter:c>0||f>0?ni(t.left,t.top+g,c,f,ei.BOTTOM_LEFT):new Wr(t.left,t.top+t.height),bottomLeftInner:c>0||f>0?ni(t.left+e[3].borderWidth,t.top+g,Math.max(0,c-e[3].borderWidth),f-e[2].borderWidth,ei.BOTTOM_LEFT):new Wr(t.left+e[3].borderWidth,t.top+t.height-e[2].borderWidth)}},ei={TOP_LEFT:0,TOP_RIGHT:1,BOTTOM_RIGHT:2,BOTTOM_LEFT:3},ni=function(t,e,n,r,i){var a=(Math.sqrt(2)-1)/3*4,o=n*a,s=r*a,l=t+n,u=e+r;switch(i){case ei.TOP_LEFT:return new jr(new Wr(t,u),new Wr(t,u-s),new Wr(l-o,e),new Wr(l,e));case ei.TOP_RIGHT:return new jr(new Wr(t,e),new Wr(t+o,e),new Wr(l,u-s),new Wr(l,u));case ei.BOTTOM_RIGHT:return new jr(new Wr(l,e),new Wr(l,e+s),new Wr(t+o,u),new Wr(t,u));case ei.BOTTOM_LEFT:default:return new jr(new Wr(l,u),new Wr(l-o,u),new Wr(t,e+s),new Wr(t,e))}},ri={REPEAT:0,NO_REPEAT:1,REPEAT_X:2,REPEAT_Y:3},ii={AUTO:0,CONTAIN:1,COVER:2,LENGTH:3},ai={BORDER_BOX:0,PADDING_BOX:1,CONTENT_BOX:2},oi=ai,si=function t(e){switch(rr(this,t),e){case"contain":this.size=ii.CONTAIN;break;case"cover":this.size=ii.COVER;break;case"auto":this.size=ii.AUTO;break;default:this.value=new Ur(e)}},li=function(t,e,n){var r=0,i=0,a=t.size;if(a[0].size===ii.CONTAIN||a[0].size===ii.COVER){var o=n.width/n.height,s=e.width/e.height;return o<s!=(a[0].size===ii.COVER)?new Gr(n.width,n.width/s):new Gr(n.height*s,n.height)}return a[0].value&&(r=a[0].value.getAbsoluteValue(n.width)),a[0].size===ii.AUTO&&a[1].size===ii.AUTO?i=e.height:a[1].size===ii.AUTO?i=r/e.width*e.height:a[1].value&&(i=a[1].value.getAbsoluteValue(n.height)),a[0].size===ii.AUTO&&(r=i/e.height*e.width),new Gr(r,i)},ui=new si("auto"),hi=function(t,e){switch(e){case ai.BORDER_BOX:return Jr(t);case ai.PADDING_BOX:default:return Qr(t)}},ci=function(t,e,n){return new Wr(t[0].getAbsoluteValue(n.width-e.width),t[1].getAbsoluteValue(n.height-e.height))},fi=function(t,e,n,r,i){switch(t.repeat){case ri.REPEAT_X:return[new Wr(Math.round(i.left),Math.round(r.top+e.y)),new Wr(Math.round(i.left+i.width),Math.round(r.top+e.y)),new Wr(Math.round(i.left+i.width),Math.round(n.height+r.top+e.y)),new Wr(Math.round(i.left),Math.round(n.height+r.top+e.y))];case ri.REPEAT_Y:return[new Wr(Math.round(r.left+e.x),Math.round(i.top)),new Wr(Math.round(r.left+e.x+n.width),Math.round(i.top)),new Wr(Math.round(r.left+e.x+n.width),Math.round(i.height+i.top)),new Wr(Math.round(r.left+e.x),Math.round(i.height+i.top))];case ri.NO_REPEAT:return[new Wr(Math.round(r.left+e.x),Math.round(r.top+e.y)),new Wr(Math.round(r.left+e.x+n.width),Math.round(r.top+e.y)),new Wr(Math.round(r.left+e.x+n.width),Math.round(r.top+e.y+n.height)),new Wr(Math.round(r.left+e.x),Math.round(r.top+e.y+n.height))];default:return[new Wr(Math.round(i.left),Math.round(i.top)),new Wr(Math.round(i.left+i.width),Math.round(i.top)),new Wr(Math.round(i.left+i.width),Math.round(i.height+i.top)),new Wr(Math.round(i.left),Math.round(i.height+i.top))]}},di=function(t,e){return{backgroundColor:new Cr(t.backgroundColor),backgroundImage:yi(t,e),backgroundClip:pi(t.backgroundClip),backgroundOrigin:mi(t.backgroundOrigin)}},pi=function(t){switch(t){case"padding-box":return ai.PADDING_BOX;case"content-box":return ai.CONTENT_BOX}return ai.BORDER_BOX},mi=function(t){switch(t){case"padding-box":return oi.PADDING_BOX;case"content-box":return oi.CONTENT_BOX}return oi.BORDER_BOX},gi=function(t){switch(t.trim()){case"no-repeat":return ri.NO_REPEAT;case"repeat-x":case"repeat no-repeat":return ri.REPEAT_X;case"repeat-y":case"no-repeat repeat":return ri.REPEAT_Y;case"repeat":return ri.REPEAT}return ri.REPEAT},yi=function(t,e){var n=wi(t.backgroundImage).map(function(t){if("url"===t.method){var n=e.loadImage(t.args[0]);t.args=n?[n]:[]}return t}),r=t.backgroundPosition.split(","),i=t.backgroundRepeat.split(","),a=t.backgroundSize.split(",");return n.map(function(t,e){var n=(a[e]||"auto").trim().split(" ").map(vi),o=(r[e]||"auto").trim().split(" ").map(bi);return{source:t,repeat:gi("string"==typeof i[e]?i[e]:i[0]),size:n.length<2?[n[0],ui]:[n[0],n[1]],position:o.length<2?[o[0],o[0]]:[o[0],o[1]]}})},vi=function(t){return"auto"===t?ui:new si(t)},bi=function(t){switch(t){case"bottom":case"right":return new Ur("100%");case"left":case"top":return new Ur("0%");case"auto":return new Ur("0")}return new Ur(t)},wi=function(t){var e=/^\s$/,n=[],r=[],i="",a=null,o="",s=0,l=0,u=function(){var t="";if(i){'"'===o.substr(0,1)&&(o=o.substr(1,o.length-2)),o&&r.push(o.trim());var e=i.indexOf("-",1)+1;"-"===i.substr(0,1)&&e>0&&(t=i.substr(0,e).toLowerCase(),i=i.substr(e)),"none"!==(i=i.toLowerCase())&&n.push({prefix:t,method:i,args:r})}r=[],i=o=""};return t.split("").forEach(function(t){if(0!==s||!e.test(t)){switch(t){case'"':a?a===t&&(a=null):a=t;break;case"(":if(a)break;if(0===s)return void(s=1);l++;break;case")":if(a)break;if(1===s){if(0===l)return s=0,void u();l--}break;case",":if(a)break;if(0===s)return void u();if(1===s&&0===l&&!i.match(/^url$/i))return r.push(o.trim()),void(o="")}0===s?i+=t:o+=t}}),u(),n};!function(t,e){var n=(E.Object||{})[t]||Object[t],r={};r[t]=e(n),F(F.S+F.F*O(function(){n(1)}),"Object",r)}("keys",function(){return function(t){return dt(gt(t))}});var xi=E.Object.keys,Ei=e(n(function(t){t.exports={default:xi,__esModule:!0}})),Ti={NONE:0,SOLID:1},Pi=Ei({TOP:0,RIGHT:1,BOTTOM:2,LEFT:3}).map(function(t){return t.toLowerCase()}),Ci=function(t){switch(t){case"none":return Ti.NONE}return Ti.SOLID},Si=function(t){return Pi.map(function(e){var n=new Cr(t.getPropertyValue("border-"+e+"-color")),r=Ci(t.getPropertyValue("border-"+e+"-style")),i=parseFloat(t.getPropertyValue("border-"+e+"-width"));return{borderColor:n,borderStyle:r,borderWidth:isNaN(i)?0:i}})},Oi=["top-left","top-right","bottom-right","bottom-left"],ki=function(t){return Oi.map(function(e){var n=t.getPropertyValue("border-"+e+"-radius").split(" ").map(Ur.create),r=pr(n,2),i=r[0],a=r[1];return void 0===a?[i,i]:[i,a]})},Ii={NONE:1,BLOCK:2,INLINE:4,RUN_IN:8,FLOW:16,FLOW_ROOT:32,TABLE:64,FLEX:128,GRID:256,RUBY:512,SUBGRID:1024,LIST_ITEM:2048,TABLE_ROW_GROUP:4096,TABLE_HEADER_GROUP:8192,TABLE_FOOTER_GROUP:16384,TABLE_ROW:32768,TABLE_CELL:65536,TABLE_COLUMN_GROUP:1<<17,TABLE_COLUMN:1<<18,TABLE_CAPTION:1<<19,RUBY_BASE:1<<20,RUBY_TEXT:1<<21,RUBY_BASE_CONTAINER:1<<22,RUBY_TEXT_CONTAINER:1<<23,CONTENTS:1<<24,INLINE_BLOCK:1<<25,INLINE_LIST_ITEM:1<<26,INLINE_TABLE:1<<27,INLINE_FLEX:1<<28,INLINE_GRID:1<<29},Ri=function(t){switch(t){case"block":return Ii.BLOCK;case"inline":return Ii.INLINE;case"run-in":return Ii.RUN_IN;case"flow":return Ii.FLOW;case"flow-root":return Ii.FLOW_ROOT;case"table":return Ii.TABLE;case"flex":return Ii.FLEX;case"grid":return Ii.GRID;case"ruby":return Ii.RUBY;case"subgrid":return Ii.SUBGRID;case"list-item":return Ii.LIST_ITEM;case"table-row-group":return Ii.TABLE_ROW_GROUP;case"table-header-group":return Ii.TABLE_HEADER_GROUP;case"table-footer-group":return Ii.TABLE_FOOTER_GROUP;case"table-row":return Ii.TABLE_ROW;case"table-cell":return Ii.TABLE_CELL;case"table-column-group":return Ii.TABLE_COLUMN_GROUP;case"table-column":return Ii.TABLE_COLUMN;case"table-caption":return Ii.TABLE_CAPTION;case"ruby-base":return Ii.RUBY_BASE;case"ruby-text":return Ii.RUBY_TEXT;case"ruby-base-container":return Ii.RUBY_BASE_CONTAINER;case"ruby-text-container":return Ii.RUBY_TEXT_CONTAINER;case"contents":return Ii.CONTENTS;case"inline-block":return Ii.INLINE_BLOCK;case"inline-list-item":return Ii.INLINE_LIST_ITEM;case"inline-table":return Ii.INLINE_TABLE;case"inline-flex":return Ii.INLINE_FLEX;case"inline-grid":return Ii.INLINE_GRID}return Ii.NONE},Mi=function(t,e){return t|Ri(e)},Ni=function(t){return t.split(" ").reduce(Mi,0)},Ai={NONE:0,LEFT:1,RIGHT:2,INLINE_START:3,INLINE_END:4},Bi=function(t){switch(t){case"left":return Ai.LEFT;case"right":return Ai.RIGHT;case"inline-start":return Ai.INLINE_START;case"inline-end":return Ai.INLINE_END}return Ai.NONE},_i=function(t){switch(t){case"normal":return 400;case"bold":return 700}var e=parseInt(t,10);return isNaN(e)?400:e},Li=function(t){return{fontFamily:t.fontFamily,fontSize:t.fontSize,fontStyle:t.fontStyle,fontVariant:t.fontVariant,fontWeight:_i(t.fontWeight)}},Vi=function(t){if("normal"===t)return 0;var e=parseInt(t,10);return isNaN(e)?0:e},Di={VISIBLE:0,HIDDEN:1,SCROLL:2,AUTO:3},Fi=function(t){switch(t){case"hidden":return Di.HIDDEN;case"scroll":return Di.SCROLL;case"auto":return Di.AUTO;case"visible":default:return Di.VISIBLE}},Ui=["top","right","bottom","left"],Gi=function(t){return Ui.map(function(e){return new Ur(t.getPropertyValue("padding-"+e))})},Wi={STATIC:0,RELATIVE:1,ABSOLUTE:2,FIXED:3,STICKY:4},Xi=function(t){switch(t){case"relative":return Wi.RELATIVE;case"absolute":return Wi.ABSOLUTE;case"fixed":return Wi.FIXED;case"sticky":return Wi.STICKY}return Wi.STATIC},ji=/^([+-]|\d|\.)$/i,Hi=function(t){if("none"===t||"string"!=typeof t)return null;for(var e="",n=!1,r=[],i=[],a=0,o=null,s=function(){e.length&&(n?r.push(parseFloat(e)):o=new Cr(e)),n=!1,e=""},l=function(){r.length&&null!==o&&i.push({color:o,offsetX:r[0]||0,offsetY:r[1]||0,blur:r[2]||0}),r.splice(0,r.length),o=null},u=0;u<t.length;u++){var h=t[u];switch(h){case"(":e+=h,a++;break;case")":e+=h,a--;break;case",":0===a?(s(),l()):e+=h;break;case" ":0===a?s():e+=h;break;default:0===e.length&&ji.test(h)&&(n=!0),e+=h}}return s(),l(),0===i.length?null:i},zi={NONE:0,LOWERCASE:1,UPPERCASE:2,CAPITALIZE:3},Yi=function(t){switch(t){case"uppercase":return zi.UPPERCASE;case"lowercase":return zi.LOWERCASE;case"capitalize":return zi.CAPITALIZE}return zi.NONE},qi=function(t){return parseFloat(t.trim())},$i=/(matrix|matrix3d)\((.+)\)/,Ki=function(t){var e=Ji(t.transform||t.webkitTransform||t.mozTransform||t.msTransform||t.oTransform);return null===e?null:{transform:e,transformOrigin:Zi(t.transformOrigin||t.webkitTransformOrigin||t.mozTransformOrigin||t.msTransformOrigin||t.oTransformOrigin)}},Zi=function(t){if("string"!=typeof t){var e=new Ur("0");return[e,e]}var n=t.split(" ").map(Ur.create);return[n[0],n[1]]},Ji=function(t){if("none"===t||"string"!=typeof t)return null;var e=t.match($i);if(e){if("matrix"===e[1]){var n=e[2].split(",").map(qi);return[n[0],n[1],n[2],n[3],n[4],n[5]]}var r=e[2].split(",").map(qi);return[r[0],r[1],r[4],r[5],r[12],r[13]]}return null},Qi={VISIBLE:0,HIDDEN:1,COLLAPSE:2},ta=function(t){switch(t){case"hidden":return Qi.HIDDEN;case"collapse":return Qi.COLLAPSE;case"visible":default:return Qi.VISIBLE}},ea=function(t){var e="auto"===t;return{auto:e,order:e?0:parseInt(t,10)}},na=(function(){function t(t){this.value=t}function e(e){function n(i,a){try{var o=e[i](a),s=o.value;s instanceof t?Promise.resolve(s.value).then(function(t){n("next",t)},function(t){n("throw",t)}):r(o.done?"return":"normal",o.value)}catch(t){r("throw",t)}}function r(t,e){switch(t){case"return":i.resolve({value:e,done:!0});break;case"throw":i.reject(e);break;default:i.resolve({value:e,done:!1})}(i=i.next)?n(i.key,i.arg):a=null}var i,a;this._invoke=function(t,e){return new Promise(function(r,o){var s={key:t,arg:e,resolve:r,reject:o,next:null};a?a=a.next=s:(i=a=s,n(t,e))})},"function"!=typeof e.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(e.prototype[Symbol.asyncIterator]=function(){return this}),e.prototype.next=function(t){return this._invoke("next",t)},e.prototype.throw=function(t){return this._invoke("throw",t)},e.prototype.return=function(t){return this._invoke("return",t)}}(),function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}),ra=2147483647,ia=/^xn--/,aa=/[^\0-\x7E]/,oa=/[\x2E\u3002\uFF0E\uFF61]/g,sa={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},la=Math.floor,ua=String.fromCharCode,ha=function(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:36},ca=function(t,e){return t+22+75*(t<26)-((0!=e)<<5)},fa=function(t,e,n){var r=0;for(t=n?la(t/700):t>>1,t+=la(t/e);t>455;r+=36)t=la(t/35);return la(r+36*t/(t+38))},da=function(t){var e=[],n=t.length,r=0,i=128,o=72,s=t.lastIndexOf("-");s<0&&(s=0);for(var l=0;l<s;++l)t.charCodeAt(l)>=128&&a("not-basic"),e.push(t.charCodeAt(l));for(var u=s>0?s+1:0;u<n;){for(var h=r,c=1,f=36;;f+=36){u>=n&&a("invalid-input");var d=ha(t.charCodeAt(u++));(d>=36||d>la((ra-r)/c))&&a("overflow"),r+=d*c;var p=f<=o?1:f>=o+26?26:f-o;if(d<p)break;var m=36-p;c>la(ra/m)&&a("overflow"),c*=m}var g=e.length+1;o=fa(r-h,g,0==h),la(r/g)>ra-i&&a("overflow"),i+=la(r/g),r%=g,e.splice(r++,0,i)}return String.fromCodePoint.apply(String,e)},pa=function(t){var e=[],n=(t=l(t)).length,r=128,i=0,o=72,s=!0,u=!1,h=void 0;try{for(var c,f=t[Symbol.iterator]();!(s=(c=f.next()).done);s=!0)(O=c.value)<128&&e.push(ua(O))}catch(t){u=!0,h=t}finally{try{!s&&f.return&&f.return()}finally{if(u)throw h}}var d=e.length,p=d;for(d&&e.push("-");p<n;){var m=ra,g=!0,y=!1,v=void 0;try{for(var b,w=t[Symbol.iterator]();!(g=(b=w.next()).done);g=!0)(O=b.value)>=r&&O<m&&(m=O)}catch(t){y=!0,v=t}finally{try{!g&&w.return&&w.return()}finally{if(y)throw v}}var x=p+1;m-r>la((ra-i)/x)&&a("overflow"),i+=(m-r)*x,r=m;var E=!0,T=!1,P=void 0;try{for(var C,S=t[Symbol.iterator]();!(E=(C=S.next()).done);E=!0){var O=C.value;if(O<r&&++i>ra&&a("overflow"),O==r){for(var k=i,I=36;;I+=36){var R=I<=o?1:I>=o+26?26:I-o;if(k<R)break;var M=k-R,N=36-R;e.push(ua(ca(R+M%N,0))),k=la(M/N)}e.push(ua(ca(k,0))),o=fa(i,x,p==d),i=0,++p}}}catch(t){T=!0,P=t}finally{try{!E&&S.return&&S.return()}finally{if(T)throw P}}++i,++r}return e.join("")},ma={version:"2.1.0",ucs2:{decode:l,encode:function(t){return String.fromCodePoint.apply(String,na(t))}},decode:da,encode:pa,toASCII:function(t){return s(t,function(t){return aa.test(t)?"xn--"+pa(t):t})},toUnicode:function(t){return s(t,function(t){return ia.test(t)?da(t.slice(4).toLowerCase()):t})}}.ucs2,ga=function(t,e,n){e in t?_.f(t,e,L(0,n)):t[e]=n};F(F.S+F.F*!Dn(function(t){}),"Array",{from:function(t){var e,n,r,i,a=gt(t),o="function"==typeof this?this:Array,s=arguments.length,l=s>1?arguments[1]:void 0,u=void 0!==l,h=0,c=ln(a);if(u&&(l=P(l,s>2?arguments[2]:void 0,2)),void 0==c||o==Array&&on(c))for(n=new o(e=J(a.length));e>h;h++)ga(n,h,u?l(a[h],h):a[h]);else for(i=c.call(a),n=new o;!(r=i.next()).done;h++)ga(n,h,u?nn(i,l,[r.value,h],!0):r.value);return n.length=h,n}});var ya=E.Array.from,va=e(n(function(t){t.exports={default:ya,__esModule:!0}})),ba=function(){function t(e){rr(this,t),this.element=e}return sr(t,[{key:"render",value:function(t){var e=this;this.options=t,this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.canvas.width=Math.floor(t.width)*t.scale,this.canvas.height=Math.floor(t.height)*t.scale,this.canvas.style.width=t.width+"px",this.canvas.style.height=t.height+"px",t.logger.log("ForeignObject renderer initialized ("+t.width+"x"+t.height+" at "+t.x+","+t.y+") with scale "+t.scale);var n=wa(Math.max(t.windowWidth,t.width)*t.scale,Math.max(t.windowHeight,t.height)*t.scale,t.scrollX*t.scale,t.scrollY*t.scale,this.element);return xa(n).then(function(n){return t.backgroundColor&&(e.ctx.fillStyle=t.backgroundColor.toString(),e.ctx.fillRect(0,0,t.width*t.scale,t.height*t.scale)),e.ctx.drawImage(n,-t.x*t.scale,-t.y*t.scale),e.canvas})}}]),t}(),wa=function(t,e,n,r,i){var a="http://www.w3.org/2000/svg",o=document.createElementNS(a,"svg"),s=document.createElementNS(a,"foreignObject");return o.setAttributeNS(null,"width",t),o.setAttributeNS(null,"height",e),s.setAttributeNS(null,"width","100%"),s.setAttributeNS(null,"height","100%"),s.setAttributeNS(null,"x",n),s.setAttributeNS(null,"y",r),s.setAttributeNS(null,"externalResourcesRequired","true"),o.appendChild(s),s.appendChild(i),o},xa=function(t){return new nr(function(e,n){var r=new Image;r.onload=function(){return e(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(t))})},Ea=function(t){if(t.createRange){var e=t.createRange();if(e.getBoundingClientRect){var n=t.createElement("boundtest");n.style.height="123px",n.style.display="block",t.body.appendChild(n),e.selectNode(n);var r=e.getBoundingClientRect(),i=Math.round(r.height);if(t.body.removeChild(n),123===i)return!0}}return!1},Ta=function(t,e){var n=new Image,r=t.createElement("canvas"),i=r.getContext("2d");return new nr(function(t){n.src=e;var a=function(){try{i.drawImage(n,0,0),r.toDataURL()}catch(e){return t(!1)}return t(!0)};n.onload=a,n.onerror=function(){return t(!1)},!0===n.complete&&setTimeout(function(){a()},500)})},Pa=function(){return void 0!==(new Image).crossOrigin},Ca=function(){return"string"==typeof(new XMLHttpRequest).responseType},Sa=function(t){var e=new Image,n=t.createElement("canvas"),r=n.getContext("2d");e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(e,0,0),n.toDataURL()}catch(t){return!1}return!0},Oa=function(t){return 0===t[0]&&255===t[1]&&0===t[2]&&255===t[3]},ka=function(t){var e=t.createElement("canvas");e.width=100,e.height=100;var n=e.getContext("2d");n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,100,100);var r=new Image,i=e.toDataURL();r.src=i;var a=wa(100,100,0,0,r);return n.fillStyle="red",n.fillRect(0,0,100,100),xa(a).then(function(e){n.drawImage(e,0,0);var r=n.getImageData(0,0,100,100).data;n.fillStyle="red",n.fillRect(0,0,100,100);var a=t.createElement("div");return a.style.backgroundImage="url("+i+")",a.style.height="100px",Oa(r)?xa(wa(100,100,0,0,a)):nr.reject(!1)}).then(function(t){return n.drawImage(t,0,0),Oa(n.getImageData(0,0,100,100).data)}).catch(function(t){return!1})},Ia={get SUPPORT_RANGE_BOUNDS(){var t=Ea(document);return Object.defineProperty(Ia,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=Sa(document);return Object.defineProperty(Ia,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_BASE64_DRAWING(){return function(t){var e=Ta(document,t);return Object.defineProperty(Ia,"SUPPORT_BASE64_DRAWING",{value:function(){return e}}),e}},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t="function"==typeof va&&"function"==typeof window.fetch?ka(document):nr.resolve(!1);return Object.defineProperty(Ia,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=Pa();return Object.defineProperty(Ia,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=Ca();return Object.defineProperty(Ia,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Ia,"SUPPORT_CORS_XHR",{value:t}),t}},Ra=/[^\u0000-\u00ff]/,Ma=function(t){return Ra.test(t)},Na=function(t){return ma.encode([t])},Aa=function t(e,n){rr(this,t),this.text=e,this.bounds=n},Ba=function(t,e,n){for(var r=ma.decode(t),i=0!==e.style.letterSpacing||Ma(t)?r.map(Na):Va(r),a=i.length,o=n.parentNode?n.parentNode.ownerDocument.defaultView:null,s=o?o.pageXOffset:0,l=o?o.pageYOffset:0,u=[],h=0,c=0;c<a;c++){var f=i[c];if(e.style.textDecoration!==Ir.NONE||f.trim().length>0)if(Ia.SUPPORT_RANGE_BOUNDS)u.push(new Aa(f,La(n,h,f.length,s,l)));else{var d=n.splitText(f.length);u.push(new Aa(f,_a(n,s,l))),n=d}else Ia.SUPPORT_RANGE_BOUNDS||(n=n.splitText(f.length));h+=f.length}return u},_a=function(t,e,n){var r=t.ownerDocument.createElement("html2canvaswrapper");r.appendChild(t.cloneNode(!0));var i=t.parentNode;if(i){i.replaceChild(r,t);var a=zr(r,e,n);return r.firstChild&&i.replaceChild(r.firstChild,r),a}return new Hr(0,0,0,0)},La=function(t,e,n,r,i){var a=t.ownerDocument.createRange();return a.setStart(t,e),a.setEnd(t,e+n),Hr.fromClientRect(a.getBoundingClientRect(),r,i)},Va=function(t){for(var e=[],n=0,r=!1,i=void 0;t.length;)Da(t[n])===r?((i=t.splice(0,n)).length&&e.push(ma.encode(i)),r=!r,n=0):n++,n>=t.length&&(i=t.splice(0,n)).length&&e.push(ma.encode(i));return e},Da=function(t){return-1!==[32,13,10,9,45].indexOf(t)},Fa=function(){function t(e,n,r){rr(this,t),this.text=e,this.parent=n,this.bounds=r}return sr(t,null,[{key:"fromTextNode",value:function(e,n){var r=Ga(e.data,n.style.textTransform);return new t(r,n,Ba(r,n,e))}}]),t}(),Ua=/(^|\s|:|-|\(|\))([a-z])/g,Ga=function(t,e){switch(e){case zi.LOWERCASE:return t.toLowerCase();case zi.CAPITALIZE:return t.replace(Ua,u);case zi.UPPERCASE:return t.toUpperCase();default:return t}},Wa=function t(e,n,r){rr(this,t),this.type=lr.CIRCLE,this.x=e,this.y=n,this.radius=r},Xa=new Cr([42,42,42]),ja=new Cr([165,165,165]),Ha=new Cr([222,222,222]),za={borderWidth:1,borderColor:ja,borderStyle:Ti.SOLID},Ya=[za,za,za,za],qa={backgroundColor:Ha,backgroundImage:[],backgroundClip:ai.PADDING_BOX,backgroundOrigin:oi.PADDING_BOX},$a=new Ur("50%"),Ka=[$a,$a],Za=[Ka,Ka,Ka,Ka],Ja=new Ur("3px"),Qa=[Ja,Ja],to=[Qa,Qa,Qa,Qa],eo=function(t){return"radio"===t.type?Za:to},no=function(t,e){if("radio"===t.type||"checkbox"===t.type){if(t.checked){var n=Math.min(e.bounds.width,e.bounds.height);e.childNodes.push("checkbox"===t.type?[new Wr(e.bounds.left+.39363*n,e.bounds.top+.79*n),new Wr(e.bounds.left+.16*n,e.bounds.top+.5549*n),new Wr(e.bounds.left+.27347*n,e.bounds.top+.44071*n),new Wr(e.bounds.left+.39694*n,e.bounds.top+.5649*n),new Wr(e.bounds.left+.72983*n,e.bounds.top+.23*n),new Wr(e.bounds.left+.84*n,e.bounds.top+.34085*n),new Wr(e.bounds.left+.39363*n,e.bounds.top+.79*n)]:new Wa(e.bounds.left+n/4,e.bounds.top+n/4,n/4))}}else oo(so(t),t,e,!1)},ro=function(t,e){oo(t.value,t,e,!0)},io=function(t,e){var n=t.options[t.selectedIndex||0];oo(n?n.text||"":"",t,e,!1)},ao=function(t){return t.width>t.height?(t.left+=(t.width-t.height)/2,t.width=t.height):t.width<t.height&&(t.top+=(t.height-t.width)/2,t.height=t.width),t},oo=function(t,e,n,r){var i=e.ownerDocument.body;if(t.length>0&&i){var a=e.ownerDocument.createElement("html2canvaswrapper");Dr(e.ownerDocument.defaultView.getComputedStyle(e,null),a),a.style.position="fixed",a.style.left=n.bounds.left+"px",a.style.top=n.bounds.top+"px",r||(a.style.whiteSpace="nowrap");var o=e.ownerDocument.createTextNode(t);a.appendChild(o),i.appendChild(a),n.childNodes.push(Fa.fromTextNode(o,n)),i.removeChild(a)}},so=function(t){var e="password"===t.type?new Array(t.value.length+1).join(""):t.value;return 0===e.length?t.placeholder||"":e},lo=["INPUT","TEXTAREA","SELECT"],uo=function(){function t(e,n,r,i){var a=this;rr(this,t),this.parent=n,this.index=i,this.childNodes=[];var o=e.ownerDocument.defaultView,s=o.pageXOffset,l=o.pageYOffset,u=o.getComputedStyle(e,null),h=Ni(u.display),c="radio"===e.type||"checkbox"===e.type,f=Xi(u.position);this.style={background:c?qa:di(u,r),border:c?Ya:Si(u),borderRadius:(e instanceof o.HTMLInputElement||e instanceof HTMLInputElement)&&c?eo(e):ki(u),color:c?Xa:new Cr(u.color),display:h,float:Bi(u.float),font:Li(u),letterSpacing:Vi(u.letterSpacing),opacity:parseFloat(u.opacity),overflow:-1===lo.indexOf(e.tagName)?Fi(u.overflow):Di.HIDDEN,padding:Gi(u),position:f,textDecoration:Br(u),textShadow:Hi(u.textShadow),textTransform:Yi(u.textTransform),transform:Ki(u),visibility:ta(u.visibility),zIndex:ea(f!==Wi.STATIC?u.zIndex:"auto")},this.isTransformed()&&(e.style.transform="matrix(1,0,0,1,0,0)"),"IMG"===e.tagName&&e.addEventListener("load",function(){a.bounds=zr(e,s,l),a.curvedBounds=ti(a.bounds,a.style.border,a.style.borderRadius)}),this.image=ho(e,r),this.bounds=c?ao(zr(e,s,l)):zr(e,s,l),this.curvedBounds=ti(this.bounds,this.style.border,this.style.borderRadius)}return sr(t,[{key:"getClipPaths",value:function(){var t=this.parent?this.parent.getClipPaths():[];return this.style.overflow===Di.HIDDEN||this.style.overflow===Di.SCROLL?t.concat([Qr(this.curvedBounds)]):t}},{key:"isInFlow",value:function(){return this.isRootElement()&&!this.isFloating()&&!this.isAbsolutelyPositioned()}},{key:"isVisible",value:function(){return!Vr(this.style.display,Ii.NONE)&&this.style.opacity>0&&this.style.visibility===Qi.VISIBLE}},{key:"isAbsolutelyPositioned",value:function(){return this.style.position!==Wi.STATIC&&this.style.position!==Wi.RELATIVE}},{key:"isPositioned",value:function(){return this.style.position!==Wi.STATIC}},{key:"isFloating",value:function(){return this.style.float!==Ai.NONE}},{key:"isRootElement",value:function(){return null===this.parent}},{key:"isTransformed",value:function(){return null!==this.style.transform}},{key:"isPositionedWithZIndex",value:function(){return this.isPositioned()&&!this.style.zIndex.auto}},{key:"isInlineLevel",value:function(){return Vr(this.style.display,Ii.INLINE)||Vr(this.style.display,Ii.INLINE_BLOCK)||Vr(this.style.display,Ii.INLINE_FLEX)||Vr(this.style.display,Ii.INLINE_GRID)||Vr(this.style.display,Ii.INLINE_LIST_ITEM)||Vr(this.style.display,Ii.INLINE_TABLE)}},{key:"isInlineBlockOrInlineTable",value:function(){return Vr(this.style.display,Ii.INLINE_BLOCK)||Vr(this.style.display,Ii.INLINE_TABLE)}}]),t}(),ho=function(t,e){if(t instanceof t.ownerDocument.defaultView.SVGSVGElement||t instanceof SVGSVGElement){var n=new XMLSerializer;return e.loadImage("data:image/svg+xml,"+encodeURIComponent(n.serializeToString(t)))}switch(t.tagName){case"IMG":var r=t;return e.loadImage(r.currentSrc||r.src);case"CANVAS":var i=t;return e.loadCanvas(i);case"IFRAME":var a=t.getAttribute("data-html2canvas-internal-iframe-key");if(a)return a}return null},co=function(){function t(e,n,r){rr(this,t),this.container=e,this.parent=n,this.contexts=[],this.children=[],this.treatAsRealStackingContext=r}return sr(t,[{key:"getOpacity",value:function(){return this.parent?this.container.style.opacity*this.parent.getOpacity():this.container.style.opacity}},{key:"getRealParentStackingContext",value:function(){return!this.parent||this.treatAsRealStackingContext?this:this.parent.getRealParentStackingContext()}}]),t}(),fo=function(t,e,n){var r=0,i=new uo(t,null,e,r++),a=new co(i,null,!0);return mo(t,i,a,e,r),a},po=["SCRIPT","HEAD","TITLE","OBJECT","BR","OPTION"],mo=function t(e,n,r,i,a){for(var o,s=e.firstChild;s;s=o){o=s.nextSibling;var l=s.ownerDocument.defaultView;if(s instanceof l.Text||s instanceof Text||l.parent&&s instanceof l.parent.Text)s.data.trim().length>0&&n.childNodes.push(Fa.fromTextNode(s,n));else if(s instanceof l.HTMLElement||s instanceof HTMLElement||l.parent&&s instanceof l.parent.HTMLElement){if(-1===po.indexOf(s.nodeName)){var u=new uo(s,n,i,a++);if(u.isVisible()){"INPUT"===s.tagName?no(s,u):"TEXTAREA"===s.tagName?ro(s,u):"SELECT"===s.tagName&&io(s,u);var h="TEXTAREA"!==s.tagName,c=go(u,s);if(c||yo(u)){var f=c||u.isPositioned()?r.getRealParentStackingContext():r,d=new co(u,f,c);f.contexts.push(d),h&&t(s,u,d,i,a)}else r.children.push(u),h&&t(s,u,r,i,a)}}}else if(s instanceof l.SVGSVGElement||s instanceof SVGSVGElement||l.parent&&s instanceof l.parent.SVGSVGElement){var p=new uo(s,n,i,a++),m=go(p,s);if(m||yo(p)){var g=m||p.isPositioned()?r.getRealParentStackingContext():r,y=new co(p,g,m);g.contexts.push(y)}else r.children.push(p)}}},go=function(t,e){return t.isRootElement()||t.isPositionedWithZIndex()||t.style.opacity<1||t.isTransformed()||vo(t,e)},yo=function(t){return t.isPositioned()||t.isFloating()},vo=function(t,e){return"BODY"===e.nodeName&&t.parent instanceof uo&&t.parent.style.background.backgroundColor.isTransparent()},bo=function(){function t(e){rr(this,t),this._data={},this._document=e}return sr(t,[{key:"_parseMetrics",value:function(t){var e=this._document.createElement("div"),n=this._document.createElement("img"),r=this._document.createElement("span"),i=this._document.body;if(!i)throw new Error("");e.style.visibility="hidden",e.style.fontFamily=t.fontFamily,e.style.fontSize=t.fontSize,e.style.margin="0",e.style.padding="0",i.appendChild(e),n.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",n.width=1,n.height=1,n.style.margin="0",n.style.padding="0",n.style.verticalAlign="baseline",r.style.fontFamily=t.fontFamily,r.style.fontSize=t.fontSize,r.style.margin="0",r.style.padding="0",r.appendChild(this._document.createTextNode("Hidden Text")),e.appendChild(r),e.appendChild(n);var a=n.offsetTop-r.offsetTop+2;e.removeChild(r),e.appendChild(this._document.createTextNode("Hidden Text")),e.style.lineHeight="normal",n.style.verticalAlign="super";var o=n.offsetTop-e.offsetTop+2;return i.removeChild(e),{baseline:a,middle:o}}},{key:"getMetrics",value:function(t){return void 0===this._data[t.fontFamily+" "+t.fontSize]&&(this._data[t.fontFamily+" "+t.fontSize]=this._parseMetrics(t)),this._data[t.fontFamily+" "+t.fontSize]}}]),t}(),wo=/([+-]?\d*\.?\d+)(deg|grad|rad|turn)/i,xo=function(t){var e=t.match(wo);if(e){var n=parseFloat(e[1]);switch(e[2].toLowerCase()){case"deg":return Math.PI*n/180;case"grad":return Math.PI/200*n;case"rad":return n;case"turn":return 2*Math.PI*n}}return null},Eo=/^(to )?(left|top|right|bottom)( (left|top|right|bottom))?$/i,To=/^([+-]?\d*\.?\d+)% ([+-]?\d*\.?\d+)%$/i,Po=/(px)|%|( 0)$/i,Co=/^(from|to)\((.+)\)$/i,So=function(t,e){var n=t.args,r=t.method;return"linear-gradient"===r?Oo(n,e):"gradient"===r&&"linear"===n[0]?Oo(["to bottom"].concat(n.slice(3).map(function(t){return t.match(Co)}).filter(function(t){return null!==t}).map(function(t){return t[2]})),e):void 0},Oo=function(t,e){for(var n=xo(t[0]),r=Eo.test(t[0]),i=r||null!==n||To.test(t[0]),a=i?null!==n?ko(n,e):r?Ro(t[0],e):Mo(t[0],e):ko(Math.PI,e),o=[],s=i?1:0,l=s;l<t.length;l++){var u=t[l],h=Po.test(u),c=u.lastIndexOf(" "),f=new Cr(h?u.substring(0,c):u),d=h?new Ur(u.substring(c+1)):l===s?new Ur("0%"):l===t.length-1?new Ur("100%"):null;o.push({color:f,stop:d})}for(var p=Math.min(Math.sqrt(Math.pow(Math.abs(a.x0)+Math.abs(a.x1),2)+Math.pow(Math.abs(a.y0)+Math.abs(a.y1),2)),2*e.width,2*e.height),m=o.map(function(t){var e=t.color,n=t.stop;return{color:e,stop:n?n.getAbsoluteValue(p)/p:null}}),g=m[0].stop,y=0;y<m.length;y++)if(null!==g){var v=m[y].stop;if(null===v){for(var b=y;null===m[b].stop;)b++;for(var w=b-y+1,x=(m[b].stop-g)/w;y<b;y++)g=m[y].stop=g+x}else g=v}return{direction:a,colorStops:m}},ko=function(t,e){var n=e.width,r=e.height,i=.5*n,a=.5*r,o=(Math.abs(n*Math.sin(t))+Math.abs(r*Math.cos(t)))/2,s=i+Math.sin(t)*o,l=a-Math.cos(t)*o;return{x0:s,x1:n-s,y0:l,y1:r-l}},Io=function(t){return Math.acos(t.width/2/(Math.sqrt(Math.pow(t.width,2)+Math.pow(t.height,2))/2))},Ro=function(t,e){switch(t){case"bottom":case"to top":return ko(0,e);case"left":case"to right":return ko(Math.PI/2,e);case"right":case"to left":return ko(3*Math.PI/2,e);case"top right":case"right top":case"to bottom left":case"to left bottom":return ko(Math.PI+Io(e),e);case"top left":case"left top":case"to bottom right":case"to right bottom":return ko(Math.PI-Io(e),e);case"bottom left":case"left bottom":case"to top right":case"to right top":return ko(Io(e),e);case"bottom right":case"right bottom":case"to top left":case"to left top":return ko(2*Math.PI-Io(e),e);case"top":case"to bottom":default:return ko(Math.PI,e)}},Mo=function(t,e){var n=t.split(" ").map(parseFloat),r=pr(n,2),i=r[0],a=r[1],o=i/100*e.width/(a/100*e.height);return ko(Math.atan(isNaN(o)?1:o)+Math.PI/2,e)},No=function(){function t(e,n){rr(this,t),this.target=e,this.options=n,e.render(n)}return sr(t,[{key:"renderNode",value:function(t){t.isVisible()&&(this.renderNodeBackgroundAndBorders(t),this.renderNodeContent(t))}},{key:"renderNodeContent",value:function(t){var e=this,n=function(){if(t.childNodes.length&&t.childNodes.forEach(function(n){if(n instanceof Fa){var r=n.parent.style;e.target.renderTextNode(n.bounds,r.color,r.font,r.textDecoration,r.textShadow)}else e.target.drawShape(n,t.style.color)}),t.image){var n=e.options.imageStore.get(t.image);if(n){var r=qr(t.bounds,t.style.padding,t.style.border),i="number"==typeof n.width&&n.width>0?n.width:r.width,a="number"==typeof n.height&&n.height>0?n.height:r.height;i>0&&a>0&&e.target.clip([Qr(t.curvedBounds)],function(){e.target.drawImage(n,new Hr(0,0,i,a),r)})}}},r=t.getClipPaths();r.length?this.target.clip(r,n):n()}},{key:"renderNodeBackgroundAndBorders",value:function(t){var e=this,n=!t.style.background.backgroundColor.isTransparent()||t.style.background.backgroundImage.length,r=t.style.border.filter(function(t){return t.borderStyle!==Ti.NONE&&!t.borderColor.isTransparent()}),i=function(){var i=hi(t.curvedBounds,t.style.background.backgroundClip);n&&e.target.clip([i],function(){t.style.background.backgroundColor.isTransparent()||e.target.fill(t.style.background.backgroundColor),e.renderBackgroundImage(t)}),r.forEach(function(n,r){e.renderBorder(n,r,t.curvedBounds)})};if(n||r.length){var a=t.parent?t.parent.getClipPaths():[];a.length?this.target.clip(a,i):i()}}},{key:"renderBackgroundImage",value:function(t){var e=this;t.style.background.backgroundImage.slice(0).reverse().forEach(function(n){if("url"===n.source.method&&n.source.args.length)e.renderBackgroundRepeat(t,n);else{var r=So(n.source,t.bounds);if(r){var i=t.bounds;e.target.renderLinearGradient(i,r)}}})}},{key:"renderBackgroundRepeat",value:function(t,e){var n=this.options.imageStore.get(e.source.args[0]);if(n){var r=t.bounds,i=Yr(r,t.style.border),a=li(e,n,r),o=t.style.background.backgroundOrigin===oi.BORDER_BOX?r:i,s=ci(e.position,a,o),l=fi(e,s,a,o,r),u=Math.round(i.left+s.x),h=Math.round(i.top+s.y);this.target.renderRepeat(l,n,a,u,h)}}},{key:"renderBorder",value:function(t,e,n){this.target.drawShape(Kr(n,e),t.borderColor)}},{key:"renderStack",value:function(t){var e=this;if(t.container.isVisible()){var n=t.getOpacity();n!==this._opacity&&(this.target.setOpacity(t.getOpacity()),this._opacity=n);var r=t.container.style.transform;null!==r?this.target.transform(t.container.bounds.left+r.transformOrigin[0].value,t.container.bounds.top+r.transformOrigin[1].value,r.transform,function(){return e.renderStackContent(t)}):this.renderStackContent(t)}}},{key:"renderStackContent",value:function(t){var e=Bo(t),n=pr(e,5),r=n[0],i=n[1],a=n[2],o=n[3],s=n[4],l=Ao(t),u=pr(l,2),h=u[0],c=u[1];this.renderNodeBackgroundAndBorders(t.container),r.sort(_o).forEach(this.renderStack,this),this.renderNodeContent(t.container),c.forEach(this.renderNode,this),o.forEach(this.renderStack,this),s.forEach(this.renderStack,this),h.forEach(this.renderNode,this),i.forEach(this.renderStack,this),a.sort(_o).forEach(this.renderStack,this)}},{key:"render",value:function(t){return this.options.backgroundColor&&this.target.rectangle(0,0,this.options.width,this.options.height,this.options.backgroundColor),this.renderStack(t),this.target.getTarget()}}]),t}(),Ao=function(t){for(var e=[],n=[],r=t.children.length,i=0;i<r;i++){var a=t.children[i];a.isInlineLevel()?e.push(a):n.push(a)}return[e,n]},Bo=function(t){for(var e=[],n=[],r=[],i=[],a=[],o=t.contexts.length,s=0;s<o;s++){var l=t.contexts[s];l.container.isPositioned()||l.container.style.opacity<1||l.container.isTransformed()?l.container.style.zIndex.order<0?e.push(l):l.container.style.zIndex.order>0?r.push(l):n.push(l):l.container.isFloating()?i.push(l):a.push(l)}return[e,n,r,i,a]},_o=function(t,e){return t.container.style.zIndex.order>e.container.style.zIndex.order?1:t.container.style.zIndex.order<e.container.style.zIndex.order?-1:t.container.index>e.container.index?1:-1},Lo=function(t,e){if(!e.proxy)return nr.reject(null);var n=e.proxy;return new nr(function(r,i){var a=Ia.SUPPORT_CORS_XHR&&Ia.SUPPORT_RESPONSE_TYPE?"blob":"text",o=Ia.SUPPORT_CORS_XHR?new XMLHttpRequest:new XDomainRequest;if(o.onload=function(){if(o instanceof XMLHttpRequest)if(200===o.status)if("text"===a)r(o.response);else{var t=new FileReader;t.addEventListener("load",function(){return r(t.result)},!1),t.addEventListener("error",function(t){return i(t)},!1),t.readAsDataURL(o.response)}else i("");else r(o.responseText)},o.onerror=i,o.open("GET",n+"?url="+encodeURIComponent(t)+"&responseType="+a),"text"!==a&&o instanceof XMLHttpRequest&&(o.responseType=a),e.imageTimeout){var s=e.imageTimeout;o.timeout=s,o.ontimeout=function(){return i("")}}o.send()})},Vo=function(){function t(e,n,r){rr(this,t),this.options=e,this._window=r,this.origin=this.getOrigin(r.location.href),this.cache={},this.logger=n,this._index=0}return sr(t,[{key:"loadImage",value:function(t){var e=this;if(this.hasResourceInCache(t))return t;if(jo(t)){if(!0===this.options.allowTaint||Ia.SUPPORT_SVG_DRAWING)return this.addImage(t,t,!1)}else{if(!0===this.options.allowTaint||Xo(t)||this.isSameOrigin(t))return this.addImage(t,t,!1);if(!this.isSameOrigin(t)){if("string"==typeof this.options.proxy)return this.cache[t]=Lo(t,this.options).then(function(t){return Ho(t,e.options.imageTimeout||0)}),t;if(!0===this.options.useCORS&&Ia.SUPPORT_CORS_IMAGES)return this.addImage(t,t,!0)}}}},{key:"inlineImage",value:function(t){var e=this;return Wo(t)?Ho(t,this.options.imageTimeout||0):this.hasResourceInCache(t)?this.cache[t]:this.isSameOrigin(t)||"string"!=typeof this.options.proxy?this.xhrImage(t):this.cache[t]=Lo(t,this.options).then(function(t){return Ho(t,e.options.imageTimeout||0)})}},{key:"xhrImage",value:function(t){var e=this;return this.cache[t]=new nr(function(n,r){var i=new XMLHttpRequest;if(i.onreadystatechange=function(){if(4===i.readyState)if(200!==i.status)r("Failed to fetch image "+t.substring(0,256)+" with status code "+i.status);else{var e=new FileReader;e.addEventListener("load",function(){var t=e.result;n(t)},!1),e.addEventListener("error",function(t){return r(t)},!1),e.readAsDataURL(i.response)}},i.responseType="blob",e.options.imageTimeout){var a=e.options.imageTimeout;i.timeout=a,i.ontimeout=function(){return r("")}}i.open("GET",t,!0),i.send()}).then(function(t){return Ho(t,e.options.imageTimeout||0)}),this.cache[t]}},{key:"loadCanvas",value:function(t){var e=String(this._index++);return this.cache[e]=nr.resolve(t),e}},{key:"hasResourceInCache",value:function(t){return void 0!==this.cache[t]}},{key:"addImage",value:function(t,e,n){var r=this,i=function(t){return new nr(function(i,a){var o=new Image;if(o.onload=function(){return i(o)},t&&!n||(o.crossOrigin="anonymous"),o.onerror=a,o.src=e,!0===o.complete&&setTimeout(function(){i(o)},500),r.options.imageTimeout){var s=r.options.imageTimeout;setTimeout(function(){return a("")},s)}})};return this.cache[t]=Xo(e)&&!jo(e)?Ia.SUPPORT_BASE64_DRAWING(e).then(i):i(!0),t}},{key:"isSameOrigin",value:function(t){return this.getOrigin(t)===this.origin}},{key:"getOrigin",value:function(t){var e=this._link||(this._link=this._window.document.createElement("a"));return e.href=t,e.href=e.href,e.protocol+e.hostname+e.port}},{key:"ready",value:function(){var t=this,e=Ei(this.cache),n=e.map(function(e){return t.cache[e].catch(function(t){return null})});return nr.all(n).then(function(t){return new Do(e,t)})}}]),t}(),Do=function(){function t(e,n){rr(this,t),this._keys=e,this._resources=n}return sr(t,[{key:"get",value:function(t){var e=this._keys.indexOf(t);return-1===e?null:this._resources[e]}}]),t}(),Fo=/^data:image\/svg\+xml/i,Uo=/^data:image\/.*;base64,/i,Go=/^data:image\/.*/i,Wo=function(t){return Go.test(t)},Xo=function(t){return Uo.test(t)},jo=function(t){return"svg"===t.substr(-3).toLowerCase()||Fo.test(t)},Ho=function(t,e){return new nr(function(n,r){var i=new Image;i.onload=function(){return n(i)},i.onerror=r,i.src=t,!0===i.complete&&setTimeout(function(){n(i)},500),e&&setTimeout(function(){return r("")},e)})},zo=function(){function t(e,n,r,i,a){rr(this,t),this.referenceElement=e,this.scrolledElements=[],this.copyStyles=i,this.inlineImages=i,this.logger=r,this.options=n,this.renderer=a,this.resourceLoader=new Vo(n,r,window),this.documentElement=this.cloneNode(e.ownerDocument.documentElement)}return sr(t,[{key:"inlineAllImages",value:function(t){var e=this;if(this.inlineImages&&t){var n=t.style;nr.all(wi(n.backgroundImage).map(function(t){return"url"===t.method?e.resourceLoader.inlineImage(t.args[0]).then(function(t){return t&&"string"==typeof t.src?'url("'+t.src+'")':"none"}).catch(function(t){}):nr.resolve(""+t.prefix+t.method+"("+t.args.join(",")+")")})).then(function(t){t.length>1&&(n.backgroundColor=""),n.backgroundImage=t.join(",")}),t instanceof HTMLImageElement&&this.resourceLoader.inlineImage(t.src).then(function(e){if(e&&t instanceof HTMLImageElement&&t.parentNode){var n=t.parentNode,r=Dr(t.style,e.cloneNode(!1));n.replaceChild(r,t)}}).catch(function(t){})}}},{key:"inlineFonts",value:function(t){var e=this;return nr.all(va(t.styleSheets).map(function(e){return e.href?fetch(e.href).then(function(t){return t.text()}).then(function(t){return qo(t,e.href)}).catch(function(t){return[]}):Yo(e,t)})).then(function(t){return t.reduce(function(t,e){return t.concat(e)},[])}).then(function(t){return nr.all(t.map(function(t){return fetch(t.formats[0].src).then(function(t){return t.blob()}).then(function(t){return new nr(function(e,n){var r=new FileReader;r.onerror=n,r.onload=function(){var t=r.result;e(t)},r.readAsDataURL(t)})}).then(function(e){return t.fontFace.setProperty("src",'url("'+e+'")'),"@font-face {"+t.fontFace.cssText+" "})}))}).then(function(n){var r=t.createElement("style");r.textContent=n.join("\n"),e.documentElement.appendChild(r)})}},{key:"createElementClone",value:function(t){var e=this;if(this.copyStyles&&t instanceof HTMLCanvasElement){var n=t.ownerDocument.createElement("img");try{return n.src=t.toDataURL(),n}catch(t){}}if(t instanceof HTMLIFrameElement){var r=t.cloneNode(!1),i=ss();r.setAttribute("data-html2canvas-internal-iframe-key",i);var a=zr(t,0,0),o=a.width,s=a.height;return this.resourceLoader.cache[i]=us(t,this.options).then(function(t){return e.renderer(t,{async:e.options.async,allowTaint:e.options.allowTaint,backgroundColor:"#ffffff",canvas:null,imageTimeout:e.options.imageTimeout,proxy:e.options.proxy,removeContainer:e.options.removeContainer,scale:e.options.scale,foreignObjectRendering:e.options.foreignObjectRendering,target:new _r,width:o,height:s,x:0,y:0,windowWidth:t.ownerDocument.defaultView.innerWidth,windowHeight:t.ownerDocument.defaultView.innerHeight,scrollX:t.ownerDocument.defaultView.pageXOffset,scrollY:t.ownerDocument.defaultView.pageYOffset},e.logger.child(i))}).then(function(e){return new nr(function(n,i){var a=document.createElement("img");a.onload=function(){return n(e)},a.onerror=i,a.src=e.toDataURL(),r.parentNode&&r.parentNode.replaceChild(Dr(t.ownerDocument.defaultView.getComputedStyle(t),a),r)})}),r}return t.cloneNode(!1)}},{key:"cloneNode",value:function(t){var e=t.nodeType===Node.TEXT_NODE?document.createTextNode(t.nodeValue):this.createElementClone(t),n=t.ownerDocument.defaultView;this.referenceElement===t&&e instanceof n.HTMLElement&&(this.clonedReferenceElement=e),e instanceof n.HTMLBodyElement&&is(e);for(var r=t.firstChild;r;r=r.nextSibling)r.nodeType===Node.ELEMENT_NODE&&"SCRIPT"===r.nodeName||this.copyStyles&&"STYLE"===r.nodeName||e.appendChild(this.cloneNode(r));if(t instanceof n.HTMLElement&&e instanceof n.HTMLElement)switch(this.inlineAllImages(Zo(t,e,ts)),this.inlineAllImages(Zo(t,e,es)),!this.copyStyles||t instanceof HTMLIFrameElement||Dr(t.ownerDocument.defaultView.getComputedStyle(t),e),this.inlineAllImages(e),0===t.scrollTop&&0===t.scrollLeft||this.scrolledElements.push([t,t.scrollLeft,t.scrollTop]),t.nodeName){case"CANVAS":this.copyStyles||Ko(t,e);break;case"TEXTAREA":case"SELECT":e.value=t.value}return e}}]),t}(),Yo=function(t,e){return(t.cssRules?va(t.cssRules):[]).filter(function(t){return t.type===CSSRule.FONT_FACE_RULE}).map(function(t){for(var n=wi(t.style.getPropertyValue("src")),r=[],i=0;i<n.length;i++)if("url"===n[i].method&&n[i+1]&&"format"===n[i+1].method){var a=e.createElement("a");a.href=n[i].args[0],e.body&&e.body.appendChild(a);var o={src:a.href,format:n[i+1].args[0]};r.push(o)}return{formats:r.filter(function(t){return/^woff/i.test(t.format)}),fontFace:t.style}}).filter(function(t){return t.formats.length})},qo=function(t,e){var n=document.implementation.createHTMLDocument(""),r=document.createElement("base");r.href=e;var i=document.createElement("style");return i.textContent=t,n.head&&n.head.appendChild(r),n.body&&n.body.appendChild(i),i.sheet?Yo(i.sheet,n):[]},$o=function(t,e,n){!t.defaultView||e===t.defaultView.pageXOffset&&n===t.defaultView.pageYOffset||t.defaultView.scrollTo(e,n)},Ko=function(t,e){try{e&&(e.width=t.width,e.height=t.height,e.getContext("2d").putImageData(t.getContext("2d").getImageData(0,0,t.width,t.height),0,0))}catch(t){}},Zo=function(t,e,n){var r=t.ownerDocument.defaultView.getComputedStyle(t,n);if(r&&r.content&&"none"!==r.content&&"-moz-alt-content"!==r.content&&"none"!==r.display){var i=Jo(r.content),a=i.match(Qo),o=e.ownerDocument.createElement(a?"img":"html2canvaspseudoelement");return a?o.src=Jo(a[1]):o.textContent=i,Dr(r,o),o.className=ns+" "+rs,e.className+=n===ts?" "+ns:" "+rs,n===ts?e.insertBefore(o,e.firstChild):e.appendChild(o),o}},Jo=function(t){var e=t.substr(0,1);return e===t.substr(t.length-1)&&e.match(/['"]/)?t.substr(1,t.length-2):t},Qo=/^url\((.+)\)$/i,ts=":before",es=":after",ns="___html2canvas___pseudoelement_before",rs="___html2canvas___pseudoelement_after",is=function(t){as(t,"."+ns+ts+'{\n    content: "" !important;\n    display: none !important;\n}\n         .'+rs+es+'{\n    content: "" !important;\n    display: none !important;\n}')},as=function(t,e){var n=t.ownerDocument.createElement("style");n.innerHTML=e,t.appendChild(n)},os=function(t){var e=pr(t,3),n=e[0],r=e[1],i=e[2];n.scrollLeft=r,n.scrollTop=i},ss=function(){return Math.ceil(Date.now()+1e7*Math.random()).toString(16)},ls=/^data:text\/(.+);(base64)?,(.*)$/i,us=function(t,e){try{return nr.resolve(t.contentWindow.document.documentElement)}catch(n){return e.proxy?Lo(t.src,e).then(function(t){var e=t.match(ls);return e?"base64"===e[2]?window.atob(decodeURIComponent(e[3])):decodeURIComponent(e[3]):nr.reject()}).then(function(e){return hs(t.ownerDocument,zr(t,0,0)).then(function(t){var n=t.contentWindow.document;n.open(),n.write(e);var r=cs(t).then(function(){return n.documentElement});return n.close(),r})}):nr.reject()}},hs=function(t,e){var n=t.createElement("iframe");return n.className="html2canvas-container",n.style.visibility="hidden",n.style.position="fixed",n.style.left="-10000px",n.style.top="0px",n.style.border="0",n.width=e.width.toString(),n.height=e.height.toString(),n.scrolling="no",t.body?(t.body.appendChild(n),nr.resolve(n)):nr.reject("")},cs=function(t){var e=t.contentWindow,n=e.document;return new nr(function(r,i){e.onload=t.onload=n.onreadystatechange=function(){var e=setInterval(function(){n.body.childNodes.length>0&&"complete"===n.readyState&&(clearInterval(e),r(t))},50)}})},fs=function(t,e,n,r,i,a){var o=new zo(n,r,i,!1,a),s=t.defaultView.pageXOffset,l=t.defaultView.pageYOffset;return hs(t,e).then(function(r){var i=r.contentWindow,a=i.document,u=cs(r).then(function(){return o.scrolledElements.forEach(os),i.scrollTo(e.left,e.top),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||i.scrollY===e.top&&i.scrollX===e.left||(a.documentElement.style.top=-e.top+"px",a.documentElement.style.left=-e.left+"px",a.documentElement.style.position="absolute"),o.clonedReferenceElement instanceof i.HTMLElement||o.clonedReferenceElement instanceof t.defaultView.HTMLElement||o.clonedReferenceElement instanceof HTMLElement?nr.resolve([r,o.clonedReferenceElement,o.resourceLoader]):nr.reject("")});return a.open(),a.write("<!DOCTYPE html><html></html>"),$o(n.ownerDocument,s,l),a.replaceChild(a.adoptNode(o.documentElement),a.documentElement),a.close(),u})},ds=function t(e,n,r){var i=e.ownerDocument,a=new Hr(n.scrollX,n.scrollY,n.windowWidth,n.windowHeight),o=i.documentElement?new Cr(getComputedStyle(i.documentElement).backgroundColor):Or,s=i.body?new Cr(getComputedStyle(i.body).backgroundColor):Or,l=e===i.documentElement?o.isTransparent()?s.isTransparent()?n.backgroundColor?new Cr(n.backgroundColor):null:s:o:n.backgroundColor?new Cr(n.backgroundColor):null;return(n.foreignObjectRendering?Ia.SUPPORT_FOREIGNOBJECT_DRAWING:nr.resolve(!1)).then(function(o){return o?function(t){return t.inlineFonts(i).then(function(){return t.resourceLoader.ready()}).then(function(){return new ba(t.documentElement).render({backgroundColor:l,logger:r,scale:n.scale,x:n.x,y:n.y,width:n.width,height:n.height,windowWidth:n.windowWidth,windowHeight:n.windowHeight,scrollX:n.scrollX,scrollY:n.scrollY})})}(new zo(e,n,r,!0,t)):fs(i,a,e,n,r,t).then(function(t){var e=pr(t,3),i=e[0],a=e[1],o=e[2],s=fo(a,o),u=a.ownerDocument;return l===s.container.style.background.backgroundColor&&(s.container.style.background.backgroundColor=Or),o.ready().then(function(t){!0===n.removeContainer&&i.parentNode&&i.parentNode.removeChild(i);var e=new bo(u),a={backgroundColor:l,fontMetrics:e,imageStore:t,logger:r,scale:n.scale,x:n.x,y:n.y,width:n.width,height:n.height};return Array.isArray(n.target)?nr.all(n.target.map(function(t){return new No(t,a).render(s)})):new No(n.target,a).render(s)})})})},ps=function(t,e){"object"===("undefined"==typeof console?"undefined":Ke(console))&&"function"==typeof console.log&&console.log("html2canvas 1.0.0-alpha.1");var n=e||{},r=new Lr,i=t.ownerDocument,a=i.defaultView,o=a.pageXOffset,s=a.pageYOffset,l="HTML"===t.tagName||"BODY"===t.tagName?$r(i):zr(t,o,s),u=l.width,h=l.height,c=l.left,f=l.top,d={async:!0,allowTaint:!1,imageTimeout:15e3,proxy:null,removeContainer:!0,foreignObjectRendering:!0,scale:a.devicePixelRatio||1,target:new _r(n.canvas),x:c,y:f,width:Math.ceil(u),height:Math.ceil(h),windowWidth:a.innerWidth,windowHeight:a.innerHeight,scrollX:a.pageXOffset,scrollY:a.pageYOffset},p=ds(t,xt({},d,n),r);return p.catch(function(t){throw r.error(t),t})};ps.CanvasRenderer=_r;var ms,gs=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],ys=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24],vs={image:function(t,e,n,r){var i=document.getElementById(t),a=i.naturalWidth,o=i.naturalHeight,s=document.getElementById(e);s.style.width=a+"px",s.style.height=o+"px",s.width=a,s.height=o;var l=s.getContext("2d");l.clearRect(0,0,a,o),l.drawImage(i,0,0),isNaN(n)||n<1||(r?d(e,0,0,a,o,n):p(e,0,0,a,o,n))},canvasRGBA:d,canvasRGB:p},bs=function t(e,n,r){if(null!=e||null!=n||null!=r){"string"==typeof e&&(e=document.getElementById(e)),null!=e.svg&&e.svg.stop();var i=y(r||{});1==e.childNodes.length&&"OBJECT"==e.childNodes[0].nodeName||(e.svg=i);var a=e.getContext("2d");void 0!==n.documentElement?i.loadXmlDoc(a,n):"<"==n.substr(0,1)?i.loadXml(a,n):i.load(a,n)}else for(var o=document.querySelectorAll("svg"),s=0;s<o.length;s++){var l=o[s],u=document.createElement("canvas");u.width=l.clientWidth,u.height=l.clientHeight,l.parentNode.insertBefore(u,l),l.parentNode.removeChild(l);var h=document.createElement("div");h.appendChild(l),t(u,h.innerHTML)}};void 0!==Element.prototype.matches?ms=function(t,e){return t.matches(e)}:void 0!==Element.prototype.webkitMatchesSelector?ms=function(t,e){return t.webkitMatchesSelector(e)}:void 0!==Element.prototype.mozMatchesSelector?ms=function(t,e){return t.mozMatchesSelector(e)}:void 0!==Element.prototype.msMatchesSelector?ms=function(t,e){return t.msMatchesSelector(e)}:void 0!==Element.prototype.oMatchesSelector?ms=function(t,e){return t.oMatchesSelector(e)}:("function"!=typeof jQuery&&"function"!=typeof Zepto||(ms=function(t,e){return $(t).is(e)}),void 0===ms&&(ms=Sizzle.matchesSelector));var ws=/(\[[^\]]+\])/g,xs=/(#[^\s\+>~\.\[:]+)/g,Es=/(\.[^\s\+>~\.\[:]+)/g,Ts=/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi,Ps=/(:[\w-]+\([^\)]*\))/gi,Cs=/(:[^\s\+>~\.\[:]+)/g,Ss=/([^\s\+>~\.\[:]+)/g;"undefined"!=typeof CanvasRenderingContext2D&&(CanvasRenderingContext2D.prototype.drawSvg=function(t,e,n,r,i){bs(this.canvas,t,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:e,offsetY:n,scaleWidth:r,scaleHeight:i})});var Os=function(t,e){var n;return t.find(".canvg").each(function(){b(jQuery(this))}),n=e?w(t):t[0],ps(n,{useCORS:!0,allowTaint:!1,logging:!1}).then(function(t){return e&&document.body.removeChild(n),t})},ks={html2canvas:ps,infoScreenShot:Os,canvg:bs,hiddenClone:w,svgToImg:v,svgToCanvas:b};t.html2canvas=ps,t.infoScreenShot=Os,t.canvg=bs,t.hiddenClone=w,t.svgToImg=v,t.svgToCanvas=b,t.default=ks,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ig_screenshot.min.js.map
