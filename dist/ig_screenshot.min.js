!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.screenShooter=t.screenShooter||{})}(this,function(t){"use strict";function e(t){return t&&t.__esModule?t.default:t}function n(t,e){return e={exports:{}},t(e,e.exports),e.exports}function r(t){var e,n;this.promise=new t(function(t,i){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=i}),this.resolve=T(e),this.reject=T(n)}function a(t){throw new RangeError(aa[t])}function o(t,e){for(var n=[],i=t.length;i--;)n[i]=e(t[i]);return n}function s(t,e){var n=t.split("@"),i="";return n.length>1&&(i=n[0]+"@",t=n[1]),i+o((t=t.replace(ra,".")).split("."),e).join(".")}function l(t){for(var e=[],n=0,i=t.length;n<i;){var r=t.charCodeAt(n++);if(r>=55296&&r<=56319&&n<i){var a=t.charCodeAt(n++);56320==(64512&a)?e.push(((1023&r)<<10)+(1023&a)+65536):(e.push(r),n--)}else e.push(r)}return e}function u(t,e,n){return t.length>0?e+n.toUpperCase():t}function h(t){this.ok=!1,"#"==t.charAt(0)&&(t=t.substr(1,6)),t=(t=t.replace(/ /g,"")).toLowerCase();var e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};for(var n in e)t==n&&(t=e[n]);for(var i=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}}],r=0;r<i.length;r++){var a=i[r].re,o=i[r].process,s=a.exec(t);s&&(channels=o(s),this.r=channels[0],this.g=channels[1],this.b=channels[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var t=this.r.toString(16),e=this.g.toString(16),n=this.b.toString(16);return 1==t.length&&(t="0"+t),1==e.length&&(e="0"+e),1==n.length&&(n="0"+n),"#"+t+e+n},this.getHelpXML=function(){for(var t=new Array,n=0;n<i.length;n++)for(var r=i[n].example,a=0;a<r.length;a++)t[t.length]=r[a];for(var o in e)t[t.length]=o;var s=document.createElement("ul");s.setAttribute("id","rgbcolor-examples");for(n=0;n<t.length;n++)try{var l=document.createElement("li"),u=new h(t[n]),c=document.createElement("div");c.style.cssText="margin: 3px; border: 1px solid black; background:"+u.toHex()+"; color:"+u.toHex(),c.appendChild(document.createTextNode("test"));var f=document.createTextNode(" "+t[n]+" -> "+u.toRGB()+" -> "+u.toHex());l.appendChild(c),l.appendChild(f),s.appendChild(l)}catch(t){}return s}}function c(t){for(var e=t.data,n=t.width*t.height*4,i=0;i<n;i+=4){var r=e[i+3]/255;e[i]*=r,e[i+1]*=r,e[i+2]*=r}}function f(t){for(var e=t.data,n=t.width*t.height*4,i=0;i<n;i+=4){var r=e[i+3];0!=r&&(r=255/r,e[i]*=r,e[i+1]*=r,e[i+2]*=r)}}function d(t,e,n,i,r,a){if(!(isNaN(a)||a<1)){a|=0;var o,s=document.getElementById(t).getContext("2d");try{try{o=s.getImageData(e,n,i,r)}catch(t){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead"),o=s.getImageData(e,n,i,r)}catch(t){throw alert("Cannot access local image"),new Error("unable to access local image data: "+t)}}}catch(t){throw alert("Cannot access image"),new Error("unable to access image data: "+t)}c(o);var l,u,h,d,p,g,y,v,b,w,x,E,T,P,C,S,O,I,k,R,M,N,A,B,_=o.data,L=a+a+1,V=i-1,D=r-1,F=a+1,U=F*(F+1)/2,G=new m,W=G;for(h=1;h<L;h++)if(W=W.next=new m,h==F)var X=W;W.next=G;var H=null,j=null;y=g=0;var z=os[a],Y=ss[a];for(u=0;u<r;u++){for(S=O=I=k=v=b=w=x=0,E=F*(R=_[g]),T=F*(M=_[g+1]),P=F*(N=_[g+2]),C=F*(A=_[g+3]),v+=U*R,b+=U*M,w+=U*N,x+=U*A,W=G,h=0;h<F;h++)W.r=R,W.g=M,W.b=N,W.a=A,W=W.next;for(h=1;h<F;h++)d=g+((V<h?V:h)<<2),v+=(W.r=R=_[d])*(B=F-h),b+=(W.g=M=_[d+1])*B,w+=(W.b=N=_[d+2])*B,x+=(W.a=A=_[d+3])*B,S+=R,O+=M,I+=N,k+=A,W=W.next;for(H=G,j=X,l=0;l<i;l++)_[g]=v*z>>Y,_[g+1]=b*z>>Y,_[g+2]=w*z>>Y,_[g+3]=x*z>>Y,v-=E,b-=T,w-=P,x-=C,E-=H.r,T-=H.g,P-=H.b,C-=H.a,d=y+((d=l+a+1)<V?d:V)<<2,v+=S+=H.r=_[d],b+=O+=H.g=_[d+1],w+=I+=H.b=_[d+2],x+=k+=H.a=_[d+3],H=H.next,E+=R=j.r,T+=M=j.g,P+=N=j.b,C+=A=j.a,S-=R,O-=M,I-=N,k-=A,j=j.next,g+=4;y+=i}for(l=0;l<i;l++){for(O=I=k=S=b=w=x=v=0,E=F*(R=_[g=l<<2]),T=F*(M=_[g+1]),P=F*(N=_[g+2]),C=F*(A=_[g+3]),v+=U*R,b+=U*M,w+=U*N,x+=U*A,W=G,h=0;h<F;h++)W.r=R,W.g=M,W.b=N,W.a=A,W=W.next;for(p=i,h=1;h<=a;h++)g=p+l<<2,v+=(W.r=R=_[g])*(B=F-h),b+=(W.g=M=_[g+1])*B,w+=(W.b=N=_[g+2])*B,x+=(W.a=A=_[g+3])*B,S+=R,O+=M,I+=N,k+=A,W=W.next,h<D&&(p+=i);for(g=l,H=G,j=X,u=0;u<r;u++)_[d=g<<2]=v*z>>Y,_[d+1]=b*z>>Y,_[d+2]=w*z>>Y,_[d+3]=x*z>>Y,v-=E,b-=T,w-=P,x-=C,E-=H.r,T-=H.g,P-=H.b,C-=H.a,d=l+((d=u+F)<D?d:D)*i<<2,v+=S+=H.r=_[d],b+=O+=H.g=_[d+1],w+=I+=H.b=_[d+2],x+=k+=H.a=_[d+3],H=H.next,E+=R=j.r,T+=M=j.g,P+=N=j.b,C+=A=j.a,S-=R,O-=M,I-=N,k-=A,j=j.next,g+=i}f(o),s.putImageData(o,e,n)}}function p(t,e,n,i,r,a){if(!(isNaN(a)||a<1)){a|=0;var o,s=document.getElementById(t).getContext("2d");try{try{o=s.getImageData(e,n,i,r)}catch(t){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead"),o=s.getImageData(e,n,i,r)}catch(t){throw alert("Cannot access local image"),new Error("unable to access local image data: "+t)}}}catch(t){throw alert("Cannot access image"),new Error("unable to access image data: "+t)}var l,u,h,c,f,d,p,g,y,v,b,w,x,E,T,P,C,S,O,I,k=o.data,R=a+a+1,M=i-1,N=r-1,A=a+1,B=A*(A+1)/2,_=new m,L=_;for(h=1;h<R;h++)if(L=L.next=new m,h==A)var V=L;L.next=_;var D=null,F=null;p=d=0;var U=os[a],G=ss[a];for(u=0;u<r;u++){for(E=T=P=g=y=v=0,b=A*(C=k[d]),w=A*(S=k[d+1]),x=A*(O=k[d+2]),g+=B*C,y+=B*S,v+=B*O,L=_,h=0;h<A;h++)L.r=C,L.g=S,L.b=O,L=L.next;for(h=1;h<A;h++)c=d+((M<h?M:h)<<2),g+=(L.r=C=k[c])*(I=A-h),y+=(L.g=S=k[c+1])*I,v+=(L.b=O=k[c+2])*I,E+=C,T+=S,P+=O,L=L.next;for(D=_,F=V,l=0;l<i;l++)k[d]=g*U>>G,k[d+1]=y*U>>G,k[d+2]=v*U>>G,g-=b,y-=w,v-=x,b-=D.r,w-=D.g,x-=D.b,c=p+((c=l+a+1)<M?c:M)<<2,g+=E+=D.r=k[c],y+=T+=D.g=k[c+1],v+=P+=D.b=k[c+2],D=D.next,b+=C=F.r,w+=S=F.g,x+=O=F.b,E-=C,T-=S,P-=O,F=F.next,d+=4;p+=i}for(l=0;l<i;l++){for(T=P=E=y=v=g=0,b=A*(C=k[d=l<<2]),w=A*(S=k[d+1]),x=A*(O=k[d+2]),g+=B*C,y+=B*S,v+=B*O,L=_,h=0;h<A;h++)L.r=C,L.g=S,L.b=O,L=L.next;for(f=i,h=1;h<=a;h++)d=f+l<<2,g+=(L.r=C=k[d])*(I=A-h),y+=(L.g=S=k[d+1])*I,v+=(L.b=O=k[d+2])*I,E+=C,T+=S,P+=O,L=L.next,h<N&&(f+=i);for(d=l,D=_,F=V,u=0;u<r;u++)k[c=d<<2]=g*U>>G,k[c+1]=y*U>>G,k[c+2]=v*U>>G,g-=b,y-=w,v-=x,b-=D.r,w-=D.g,x-=D.b,c=l+((c=u+A)<N?c:N)*i<<2,g+=E+=D.r=k[c],y+=T+=D.g=k[c+1],v+=P+=D.b=k[c+2],D=D.next,b+=C=F.r,w+=S=F.g,x+=O=F.b,E-=C,T-=S,P-=O,F=F.next,d+=i}s.putImageData(o,e,n)}}function m(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}function g(t){var e=[0,0,0],n=function(n,i){var r=t.match(n);null!=r&&(e[i]+=r.length,t=t.replace(n," "))};return t=t.replace(/:not\(([^\)]*)\)/g,"     $1 "),t=t.replace(/{[^]*/gm," "),n(hs,1),n(cs,0),n(fs,1),n(ds,2),n(ps,1),n(ms,1),t=t.replace(/[\*\s\+>~]/g," "),t=t.replace(/[#\.]/g," "),n(gs,2),e.join("")}function y(t){var e={opts:t};e.FRAMERATE=30,e.MAX_VIRTUAL_PIXELS=3e4,e.log=function(t){},1==e.opts.log&&"undefined"!=typeof console&&(e.log=function(t){console.log(t)}),e.init=function(t){var n=0;e.UniqueId=function(){return"canvg"+ ++n},e.Definitions={},e.Styles={},e.StylesSpecificity={},e.Animations=[],e.Images=[],e.ctx=t,e.ViewPort=new function(){this.viewPorts=[],this.Clear=function(){this.viewPorts=[]},this.SetCurrent=function(t,e){this.viewPorts.push({width:t,height:e})},this.RemoveCurrent=function(){this.viewPorts.pop()},this.Current=function(){return this.viewPorts[this.viewPorts.length-1]},this.width=function(){return this.Current().width},this.height=function(){return this.Current().height},this.ComputeSize=function(t){return null!=t&&"number"==typeof t?t:"x"==t?this.width():"y"==t?this.height():Math.sqrt(Math.pow(this.width(),2)+Math.pow(this.height(),2))/Math.sqrt(2)}}},e.init(),e.ImagesLoaded=function(){for(var t=0;t<e.Images.length;t++)if(!e.Images[t].loaded)return!1;return!0},e.trim=function(t){return t.replace(/^\s+|\s+$/g,"")},e.compressSpaces=function(t){return t.replace(/[\s\r\t\n]+/gm," ")},e.ajax=function(t){var e;return(e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"))?(e.open("GET",t,!1),e.send(null),e.responseText):null},e.parseXml=function(t){if("undefined"!=typeof Windows&&void 0!==Windows.Data&&void 0!==Windows.Data.Xml){var e=new Windows.Data.Xml.Dom.XmlDocument,n=new Windows.Data.Xml.Dom.XmlLoadSettings;return n.prohibitDtd=!1,e.loadXml(t,n),e}return window.DOMParser?(new DOMParser).parseFromString(t,"text/xml"):(t=t.replace(/<!DOCTYPE svg[^>]*>/,""),(e=new ActiveXObject("Microsoft.XMLDOM")).async="false",e.loadXML(t),e)},e.Property=function(t,e){this.name=t,this.value=e},e.Property.prototype.getValue=function(){return this.value},e.Property.prototype.hasValue=function(){return null!=this.value&&""!==this.value},e.Property.prototype.numValue=function(){if(!this.hasValue())return 0;var t=parseFloat(this.value);return(this.value+"").match(/%$/)&&(t/=100),t},e.Property.prototype.valueOrDefault=function(t){return this.hasValue()?this.value:t},e.Property.prototype.numValueOrDefault=function(t){return this.hasValue()?this.numValue():t},e.Property.prototype.addOpacity=function(t){var n=this.value;if(null!=t.value&&""!=t.value&&"string"==typeof this.value){var i=new h(this.value);i.ok&&(n="rgba("+i.r+", "+i.g+", "+i.b+", "+t.numValue()+")")}return new e.Property(this.name,n)},e.Property.prototype.getDefinition=function(){var t=this.value.match(/#([^\)'"]+)/);return t&&(t=t[1]),t||(t=this.value),e.Definitions[t]},e.Property.prototype.isUrlDefinition=function(){return 0==this.value.indexOf("url(")},e.Property.prototype.getFillStyleDefinition=function(t,n){var i=this.getDefinition();if(null!=i&&i.createGradient)return i.createGradient(e.ctx,t,n);if(null!=i&&i.createPattern){if(i.getHrefAttribute().hasValue()){var r=i.attribute("patternTransform");i=i.getHrefAttribute().getDefinition(),r.hasValue()&&(i.attribute("patternTransform",!0).value=r.value)}return i.createPattern(e.ctx,t)}return null},e.Property.prototype.getDPI=function(t){return 96},e.Property.prototype.getEM=function(t){var n=12,i=new e.Property("fontSize",e.Font.Parse(e.ctx.font).fontSize);return i.hasValue()&&(n=i.toPixels(t)),n},e.Property.prototype.getUnits=function(){return(this.value+"").replace(/[0-9\.\-]/g,"")},e.Property.prototype.toPixels=function(t,n){if(!this.hasValue())return 0;var i=this.value+"";if(i.match(/em$/))return this.numValue()*this.getEM(t);if(i.match(/ex$/))return this.numValue()*this.getEM(t)/2;if(i.match(/px$/))return this.numValue();if(i.match(/pt$/))return this.numValue()*this.getDPI(t)*(1/72);if(i.match(/pc$/))return 15*this.numValue();if(i.match(/cm$/))return this.numValue()*this.getDPI(t)/2.54;if(i.match(/mm$/))return this.numValue()*this.getDPI(t)/25.4;if(i.match(/in$/))return this.numValue()*this.getDPI(t);if(i.match(/%$/))return this.numValue()*e.ViewPort.ComputeSize(t);var r=this.numValue();return n&&r<1?r*e.ViewPort.ComputeSize(t):r},e.Property.prototype.toMilliseconds=function(){if(!this.hasValue())return 0;var t=this.value+"";return t.match(/s$/)?1e3*this.numValue():(t.match(/ms$/),this.numValue())},e.Property.prototype.toRadians=function(){if(!this.hasValue())return 0;var t=this.value+"";return t.match(/deg$/)?this.numValue()*(Math.PI/180):t.match(/grad$/)?this.numValue()*(Math.PI/200):t.match(/rad$/)?this.numValue():this.numValue()*(Math.PI/180)};var n={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};return e.Property.prototype.toTextBaseline=function(){return this.hasValue()?n[this.value]:null},e.Font=new function(){this.Styles="normal|italic|oblique|inherit",this.Variants="normal|small-caps|inherit",this.Weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit",this.CreateFont=function(t,n,i,r,a,o){var s=null!=o?this.Parse(o):this.CreateFont("","","","","",e.ctx.font);return{fontFamily:a||s.fontFamily,fontSize:r||s.fontSize,fontStyle:t||s.fontStyle,fontWeight:i||s.fontWeight,fontVariant:n||s.fontVariant,toString:function(){return[this.fontStyle,this.fontVariant,this.fontWeight,this.fontSize,this.fontFamily].join(" ")}}};var t=this;this.Parse=function(n){for(var i={},r=e.trim(e.compressSpaces(n||"")).split(" "),a={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1},o="",s=0;s<r.length;s++)a.fontStyle||-1==t.Styles.indexOf(r[s])?a.fontVariant||-1==t.Variants.indexOf(r[s])?a.fontWeight||-1==t.Weights.indexOf(r[s])?a.fontSize?"inherit"!=r[s]&&(o+=r[s]):("inherit"!=r[s]&&(i.fontSize=r[s].split("/")[0]),a.fontStyle=a.fontVariant=a.fontWeight=a.fontSize=!0):("inherit"!=r[s]&&(i.fontWeight=r[s]),a.fontStyle=a.fontVariant=a.fontWeight=!0):("inherit"!=r[s]&&(i.fontVariant=r[s]),a.fontStyle=a.fontVariant=!0):("inherit"!=r[s]&&(i.fontStyle=r[s]),a.fontStyle=!0);return""!=o&&(i.fontFamily=o),i}},e.ToNumberArray=function(t){for(var n=e.trim(e.compressSpaces((t||"").replace(/,/g," "))).split(" "),i=0;i<n.length;i++)n[i]=parseFloat(n[i]);return n},e.Point=function(t,e){this.x=t,this.y=e},e.Point.prototype.angleTo=function(t){return Math.atan2(t.y-this.y,t.x-this.x)},e.Point.prototype.applyTransform=function(t){var e=this.x*t[0]+this.y*t[2]+t[4],n=this.x*t[1]+this.y*t[3]+t[5];this.x=e,this.y=n},e.CreatePoint=function(t){var n=e.ToNumberArray(t);return new e.Point(n[0],n[1])},e.CreatePath=function(t){for(var n=e.ToNumberArray(t),i=[],r=0;r<n.length;r+=2)i.push(new e.Point(n[r],n[r+1]));return i},e.BoundingBox=function(t,e,n,r){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN,this.x=function(){return this.x1},this.y=function(){return this.y1},this.width=function(){return this.x2-this.x1},this.height=function(){return this.y2-this.y1},this.addPoint=function(t,e){null!=t&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=t,this.x2=t),t<this.x1&&(this.x1=t),t>this.x2&&(this.x2=t)),null!=e&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=e,this.y2=e),e<this.y1&&(this.y1=e),e>this.y2&&(this.y2=e))},this.addX=function(t){this.addPoint(t,null)},this.addY=function(t){this.addPoint(null,t)},this.addBoundingBox=function(t){this.addPoint(t.x1,t.y1),this.addPoint(t.x2,t.y2)},this.addQuadraticCurve=function(t,e,n,i,r,a){var o=t+2/3*(n-t),s=e+2/3*(i-e),l=o+1/3*(r-t),u=s+1/3*(a-e);this.addBezierCurve(t,e,o,l,s,u,r,a)},this.addBezierCurve=function(t,e,n,r,a,o,s,l){var u=[t,e],h=[n,r],c=[a,o],f=[s,l];for(this.addPoint(u[0],u[1]),this.addPoint(f[0],f[1]),i=0;i<=1;i++){var d=function(t){return Math.pow(1-t,3)*u[i]+3*Math.pow(1-t,2)*t*h[i]+3*(1-t)*Math.pow(t,2)*c[i]+Math.pow(t,3)*f[i]},p=6*u[i]-12*h[i]+6*c[i],m=-3*u[i]+9*h[i]-9*c[i]+3*f[i],g=3*h[i]-3*u[i];if(0!=m){var y=Math.pow(p,2)-4*g*m;if(!(y<0)){var v=(-p+Math.sqrt(y))/(2*m);0<v&&v<1&&(0==i&&this.addX(d(v)),1==i&&this.addY(d(v)));var b=(-p-Math.sqrt(y))/(2*m);0<b&&b<1&&(0==i&&this.addX(d(b)),1==i&&this.addY(d(b)))}}else{if(0==p)continue;var w=-g/p;0<w&&w<1&&(0==i&&this.addX(d(w)),1==i&&this.addY(d(w)))}}},this.isPointInBox=function(t,e){return this.x1<=t&&t<=this.x2&&this.y1<=e&&e<=this.y2},this.addPoint(t,e),this.addPoint(n,r)},e.Transform=function(t){var n=this;this.Type={},this.Type.translate=function(t){this.p=e.CreatePoint(t),this.apply=function(t){t.translate(this.p.x||0,this.p.y||0)},this.unapply=function(t){t.translate(-1*this.p.x||0,-1*this.p.y||0)},this.applyToPoint=function(t){t.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0])}},this.Type.rotate=function(t){var n=e.ToNumberArray(t);this.angle=new e.Property("angle",n[0]),this.cx=n[1]||0,this.cy=n[2]||0,this.apply=function(t){t.translate(this.cx,this.cy),t.rotate(this.angle.toRadians()),t.translate(-this.cx,-this.cy)},this.unapply=function(t){t.translate(this.cx,this.cy),t.rotate(-1*this.angle.toRadians()),t.translate(-this.cx,-this.cy)},this.applyToPoint=function(t){var e=this.angle.toRadians();t.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0]),t.applyTransform([Math.cos(e),Math.sin(e),-Math.sin(e),Math.cos(e),0,0]),t.applyTransform([1,0,0,1,-this.p.x||0,-this.p.y||0])}},this.Type.scale=function(t){this.p=e.CreatePoint(t),this.apply=function(t){t.scale(this.p.x||1,this.p.y||this.p.x||1)},this.unapply=function(t){t.scale(1/this.p.x||1,1/this.p.y||this.p.x||1)},this.applyToPoint=function(t){t.applyTransform([this.p.x||0,0,0,this.p.y||0,0,0])}},this.Type.matrix=function(t){this.m=e.ToNumberArray(t),this.apply=function(t){t.transform(this.m[0],this.m[1],this.m[2],this.m[3],this.m[4],this.m[5])},this.unapply=function(t){var e=this.m[0],n=this.m[2],i=this.m[4],r=this.m[1],a=this.m[3],o=this.m[5],s=1/(e*(1*a-0*o)-n*(1*r-0*o)+i*(0*r-0*a));t.transform(s*(1*a-0*o),s*(0*o-1*r),s*(0*i-1*n),s*(1*e-0*i),s*(n*o-i*a),s*(i*r-e*o))},this.applyToPoint=function(t){t.applyTransform(this.m)}},this.Type.SkewBase=function(t){this.base=n.Type.matrix,this.base(t),this.angle=new e.Property("angle",t)},this.Type.SkewBase.prototype=new this.Type.matrix,this.Type.skewX=function(t){this.base=n.Type.SkewBase,this.base(t),this.m=[1,0,Math.tan(this.angle.toRadians()),1,0,0]},this.Type.skewX.prototype=new this.Type.SkewBase,this.Type.skewY=function(t){this.base=n.Type.SkewBase,this.base(t),this.m=[1,Math.tan(this.angle.toRadians()),0,1,0,0]},this.Type.skewY.prototype=new this.Type.SkewBase,this.transforms=[],this.apply=function(t){for(var e=0;e<this.transforms.length;e++)this.transforms[e].apply(t)},this.unapply=function(t){for(var e=this.transforms.length-1;e>=0;e--)this.transforms[e].unapply(t)},this.applyToPoint=function(t){for(var e=0;e<this.transforms.length;e++)this.transforms[e].applyToPoint(t)};for(var i=e.trim(e.compressSpaces(t)).replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/),r=0;r<i.length;r++){var a=e.trim(i[r].split("(")[0]),o=i[r].split("(")[1].replace(")",""),s=new this.Type[a](o);s.type=a,this.transforms.push(s)}},e.AspectRatio=function(t,n,i,r,a,o,s,l,u,h){var c=(n=(n=e.compressSpaces(n)).replace(/^defer\s/,"")).split(" ")[0]||"xMidYMid",f=n.split(" ")[1]||"meet",d=i/r,p=a/o,m=Math.min(d,p),g=Math.max(d,p);"meet"==f&&(r*=m,o*=m),"slice"==f&&(r*=g,o*=g),u=new e.Property("refX",u),h=new e.Property("refY",h),u.hasValue()&&h.hasValue()?t.translate(-m*u.toPixels("x"),-m*h.toPixels("y")):(c.match(/^xMid/)&&("meet"==f&&m==p||"slice"==f&&g==p)&&t.translate(i/2-r/2,0),c.match(/YMid$/)&&("meet"==f&&m==d||"slice"==f&&g==d)&&t.translate(0,a/2-o/2),c.match(/^xMax/)&&("meet"==f&&m==p||"slice"==f&&g==p)&&t.translate(i-r,0),c.match(/YMax$/)&&("meet"==f&&m==d||"slice"==f&&g==d)&&t.translate(0,a-o)),"none"==c?t.scale(d,p):"meet"==f?t.scale(m,m):"slice"==f&&t.scale(g,g),t.translate(null==s?0:-s,null==l?0:-l)},e.Element={},e.EmptyProperty=new e.Property("EMPTY",""),e.Element.ElementBase=function(t){if(this.attributes={},this.styles={},this.stylesSpecificity={},this.children=[],this.attribute=function(t,n){var i=this.attributes[t];return null!=i?i:(1==n&&(i=new e.Property(t,""),this.attributes[t]=i),i||e.EmptyProperty)},this.getHrefAttribute=function(){for(var t in this.attributes)if("href"==t||t.match(/:href$/))return this.attributes[t];return e.EmptyProperty},this.style=function(t,n,i){var r=this.styles[t];if(null!=r)return r;var a=this.attribute(t);if(null!=a&&a.hasValue())return this.styles[t]=a,a;if(1!=i){var o=this.parent;if(null!=o){var s=o.style(t);if(null!=s&&s.hasValue())return s}}return 1==n&&(r=new e.Property(t,""),this.styles[t]=r),r||e.EmptyProperty},this.render=function(t){if("none"!=this.style("display").value&&"hidden"!=this.style("visibility").value){if(t.save(),this.style("mask").hasValue()){var e=this.style("mask").getDefinition();null!=e&&e.apply(t,this)}else if(this.style("filter").hasValue()){var n=this.style("filter").getDefinition();null!=n&&n.apply(t,this)}else this.setContext(t),this.renderChildren(t),this.clearContext(t);t.restore()}},this.setContext=function(t){},this.clearContext=function(t){},this.renderChildren=function(t){for(var e=0;e<this.children.length;e++)this.children[e].render(t)},this.addChild=function(t,n){var i=t;n&&(i=e.CreateElement(t)),i.parent=this,"title"!=i.type&&this.children.push(i)},this.addStylesFromStyleDefinition=function(){for(var n in e.Styles)if("@"!=n[0]&&as(t,n)){var i=e.Styles[n],r=e.StylesSpecificity[n];if(null!=i)for(var a in i){var o=this.stylesSpecificity[a];void 0===o&&(o="000"),r>o&&(this.styles[a]=i[a],this.stylesSpecificity[a]=r)}}},null!=t&&1==t.nodeType){for(r=0;r<t.attributes.length;r++){var n=t.attributes[r];this.attributes[n.nodeName]=new e.Property(n.nodeName,n.value)}if(this.addStylesFromStyleDefinition(),this.attribute("style").hasValue())for(var i=this.attribute("style").value.split(";"),r=0;r<i.length;r++)if(""!=e.trim(i[r])){var a=i[r].split(":"),o=e.trim(a[0]),s=e.trim(a[1]);this.styles[o]=new e.Property(o,s)}this.attribute("id").hasValue()&&null==e.Definitions[this.attribute("id").value]&&(e.Definitions[this.attribute("id").value]=this);for(r=0;r<t.childNodes.length;r++){var l=t.childNodes[r];if(1==l.nodeType&&this.addChild(l,!0),this.captureTextNodes&&(3==l.nodeType||4==l.nodeType)){var u=l.value||l.text||l.textContent||"";""!=e.compressSpaces(u)&&this.addChild(new e.Element.tspan(l),!1)}}}},e.Element.RenderedElementBase=function(t){this.base=e.Element.ElementBase,this.base(t),this.setContext=function(t){if(this.style("fill").isUrlDefinition()?null!=(i=this.style("fill").getFillStyleDefinition(this,this.style("fill-opacity")))&&(t.fillStyle=i):this.style("fill").hasValue()&&("currentColor"==(n=this.style("fill")).value&&(n.value=this.style("color").value),"inherit"!=n.value&&(t.fillStyle="none"==n.value?"rgba(0,0,0,0)":n.value)),this.style("fill-opacity").hasValue()){var n=new e.Property("fill",t.fillStyle);n=n.addOpacity(this.style("fill-opacity")),t.fillStyle=n.value}if(this.style("stroke").isUrlDefinition()){var i=this.style("stroke").getFillStyleDefinition(this,this.style("stroke-opacity"));null!=i&&(t.strokeStyle=i)}else this.style("stroke").hasValue()&&("currentColor"==(r=this.style("stroke")).value&&(r.value=this.style("color").value),"inherit"!=r.value&&(t.strokeStyle="none"==r.value?"rgba(0,0,0,0)":r.value));if(this.style("stroke-opacity").hasValue()){var r=new e.Property("stroke",t.strokeStyle);r=r.addOpacity(this.style("stroke-opacity")),t.strokeStyle=r.value}if(this.style("stroke-width").hasValue()){var a=this.style("stroke-width").toPixels();t.lineWidth=0==a?.001:a}if(this.style("stroke-linecap").hasValue()&&(t.lineCap=this.style("stroke-linecap").value),this.style("stroke-linejoin").hasValue()&&(t.lineJoin=this.style("stroke-linejoin").value),this.style("stroke-miterlimit").hasValue()&&(t.miterLimit=this.style("stroke-miterlimit").value),this.style("stroke-dasharray").hasValue()&&"none"!=this.style("stroke-dasharray").value){var o=e.ToNumberArray(this.style("stroke-dasharray").value);void 0!==t.setLineDash?t.setLineDash(o):void 0!==t.webkitLineDash?t.webkitLineDash=o:void 0===t.mozDash||1==o.length&&0==o[0]||(t.mozDash=o);var s=this.style("stroke-dashoffset").numValueOrDefault(1);void 0!==t.lineDashOffset?t.lineDashOffset=s:void 0!==t.webkitLineDashOffset?t.webkitLineDashOffset=s:void 0!==t.mozDashOffset&&(t.mozDashOffset=s)}if(void 0!==t.font&&(t.font=e.Font.CreateFont(this.style("font-style").value,this.style("font-variant").value,this.style("font-weight").value,this.style("font-size").hasValue()?this.style("font-size").toPixels()+"px":"",this.style("font-family").value).toString()),this.style("transform",!1,!0).hasValue()&&new e.Transform(this.style("transform",!1,!0).value).apply(t),this.style("clip-path",!1,!0).hasValue()){var l=this.style("clip-path",!1,!0).getDefinition();null!=l&&l.apply(t)}this.style("opacity").hasValue()&&(t.globalAlpha=this.style("opacity").numValue())}},e.Element.RenderedElementBase.prototype=new e.Element.ElementBase,e.Element.PathElementBase=function(t){this.base=e.Element.RenderedElementBase,this.base(t),this.path=function(t){return null!=t&&t.beginPath(),new e.BoundingBox},this.renderChildren=function(t){this.path(t),e.Mouse.checkPath(this,t),""!=t.fillStyle&&("inherit"!=this.style("fill-rule").valueOrDefault("inherit")?t.fill(this.style("fill-rule").value):t.fill()),""!=t.strokeStyle&&t.stroke();var n=this.getMarkers();if(null!=n){if(this.style("marker-start").isUrlDefinition()&&(i=this.style("marker-start").getDefinition()).render(t,n[0][0],n[0][1]),this.style("marker-mid").isUrlDefinition())for(var i=this.style("marker-mid").getDefinition(),r=1;r<n.length-1;r++)i.render(t,n[r][0],n[r][1]);this.style("marker-end").isUrlDefinition()&&(i=this.style("marker-end").getDefinition()).render(t,n[n.length-1][0],n[n.length-1][1])}},this.getBoundingBox=function(){return this.path()},this.getMarkers=function(){return null}},e.Element.PathElementBase.prototype=new e.Element.RenderedElementBase,e.Element.svg=function(t){this.base=e.Element.RenderedElementBase,this.base(t),this.baseClearContext=this.clearContext,this.clearContext=function(t){this.baseClearContext(t),e.ViewPort.RemoveCurrent()},this.baseSetContext=this.setContext,this.setContext=function(t){t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4,void 0!==t.font&&void 0!==window.getComputedStyle&&(t.font=window.getComputedStyle(t.canvas).getPropertyValue("font")),this.baseSetContext(t),this.attribute("x").hasValue()||(this.attribute("x",!0).value=0),this.attribute("y").hasValue()||(this.attribute("y",!0).value=0),t.translate(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y"));var n=e.ViewPort.width(),i=e.ViewPort.height();if(this.attribute("width").hasValue()||(this.attribute("width",!0).value="100%"),this.attribute("height").hasValue()||(this.attribute("height",!0).value="100%"),void 0===this.root){n=this.attribute("width").toPixels("x"),i=this.attribute("height").toPixels("y");var r=0,a=0;this.attribute("refX").hasValue()&&this.attribute("refY").hasValue()&&(r=-this.attribute("refX").toPixels("x"),a=-this.attribute("refY").toPixels("y")),"visible"!=this.attribute("overflow").valueOrDefault("hidden")&&(t.beginPath(),t.moveTo(r,a),t.lineTo(n,a),t.lineTo(n,i),t.lineTo(r,i),t.closePath(),t.clip())}if(e.ViewPort.SetCurrent(n,i),this.attribute("viewBox").hasValue()){var o=e.ToNumberArray(this.attribute("viewBox").value),s=o[0],l=o[1];n=o[2],i=o[3],e.AspectRatio(t,this.attribute("preserveAspectRatio").value,e.ViewPort.width(),n,e.ViewPort.height(),i,s,l,this.attribute("refX").value,this.attribute("refY").value),e.ViewPort.RemoveCurrent(),e.ViewPort.SetCurrent(o[2],o[3])}}},e.Element.svg.prototype=new e.Element.RenderedElementBase,e.Element.rect=function(t){this.base=e.Element.PathElementBase,this.base(t),this.path=function(t){var n=this.attribute("x").toPixels("x"),i=this.attribute("y").toPixels("y"),r=this.attribute("width").toPixels("x"),a=this.attribute("height").toPixels("y"),o=this.attribute("rx").toPixels("x"),s=this.attribute("ry").toPixels("y");return this.attribute("rx").hasValue()&&!this.attribute("ry").hasValue()&&(s=o),this.attribute("ry").hasValue()&&!this.attribute("rx").hasValue()&&(o=s),o=Math.min(o,r/2),s=Math.min(s,a/2),null!=t&&(t.beginPath(),t.moveTo(n+o,i),t.lineTo(n+r-o,i),t.quadraticCurveTo(n+r,i,n+r,i+s),t.lineTo(n+r,i+a-s),t.quadraticCurveTo(n+r,i+a,n+r-o,i+a),t.lineTo(n+o,i+a),t.quadraticCurveTo(n,i+a,n,i+a-s),t.lineTo(n,i+s),t.quadraticCurveTo(n,i,n+o,i),t.closePath()),new e.BoundingBox(n,i,n+r,i+a)}},e.Element.rect.prototype=new e.Element.PathElementBase,e.Element.circle=function(t){this.base=e.Element.PathElementBase,this.base(t),this.path=function(t){var n=this.attribute("cx").toPixels("x"),i=this.attribute("cy").toPixels("y"),r=this.attribute("r").toPixels();return null!=t&&(t.beginPath(),t.arc(n,i,r,0,2*Math.PI,!0),t.closePath()),new e.BoundingBox(n-r,i-r,n+r,i+r)}},e.Element.circle.prototype=new e.Element.PathElementBase,e.Element.ellipse=function(t){this.base=e.Element.PathElementBase,this.base(t),this.path=function(t){var n=(Math.sqrt(2)-1)/3*4,i=this.attribute("rx").toPixels("x"),r=this.attribute("ry").toPixels("y"),a=this.attribute("cx").toPixels("x"),o=this.attribute("cy").toPixels("y");return null!=t&&(t.beginPath(),t.moveTo(a,o-r),t.bezierCurveTo(a+n*i,o-r,a+i,o-n*r,a+i,o),t.bezierCurveTo(a+i,o+n*r,a+n*i,o+r,a,o+r),t.bezierCurveTo(a-n*i,o+r,a-i,o+n*r,a-i,o),t.bezierCurveTo(a-i,o-n*r,a-n*i,o-r,a,o-r),t.closePath()),new e.BoundingBox(a-i,o-r,a+i,o+r)}},e.Element.ellipse.prototype=new e.Element.PathElementBase,e.Element.line=function(t){this.base=e.Element.PathElementBase,this.base(t),this.getPoints=function(){return[new e.Point(this.attribute("x1").toPixels("x"),this.attribute("y1").toPixels("y")),new e.Point(this.attribute("x2").toPixels("x"),this.attribute("y2").toPixels("y"))]},this.path=function(t){var n=this.getPoints();return null!=t&&(t.beginPath(),t.moveTo(n[0].x,n[0].y),t.lineTo(n[1].x,n[1].y)),new e.BoundingBox(n[0].x,n[0].y,n[1].x,n[1].y)},this.getMarkers=function(){var t=this.getPoints(),e=t[0].angleTo(t[1]);return[[t[0],e],[t[1],e]]}},e.Element.line.prototype=new e.Element.PathElementBase,e.Element.polyline=function(t){this.base=e.Element.PathElementBase,this.base(t),this.points=e.CreatePath(this.attribute("points").value),this.path=function(t){var n=new e.BoundingBox(this.points[0].x,this.points[0].y);null!=t&&(t.beginPath(),t.moveTo(this.points[0].x,this.points[0].y));for(var i=1;i<this.points.length;i++)n.addPoint(this.points[i].x,this.points[i].y),null!=t&&t.lineTo(this.points[i].x,this.points[i].y);return n},this.getMarkers=function(){for(var t=[],e=0;e<this.points.length-1;e++)t.push([this.points[e],this.points[e].angleTo(this.points[e+1])]);return t.push([this.points[this.points.length-1],t[t.length-1][1]]),t}},e.Element.polyline.prototype=new e.Element.PathElementBase,e.Element.polygon=function(t){this.base=e.Element.polyline,this.base(t),this.basePath=this.path,this.path=function(t){var e=this.basePath(t);return null!=t&&(t.lineTo(this.points[0].x,this.points[0].y),t.closePath()),e}},e.Element.polygon.prototype=new e.Element.polyline,e.Element.path=function(t){this.base=e.Element.PathElementBase,this.base(t);var n=this.attribute("d").value;n=n.replace(/,/gm," ");for(i=0;i<2;i++)n=n.replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2");n=(n=n.replace(/([^\s])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2")).replace(/([0-9])([+\-])/gm,"$1 $2");for(var i=0;i<2;i++)n=n.replace(/(\.[0-9]*)(\.)/gm,"$1 $2");n=n.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 "),n=e.compressSpaces(n),n=e.trim(n),this.PathParser=new function(t){this.tokens=t.split(" "),this.reset=function(){this.i=-1,this.command="",this.previousCommand="",this.start=new e.Point(0,0),this.control=new e.Point(0,0),this.current=new e.Point(0,0),this.points=[],this.angles=[]},this.isEnd=function(){return this.i>=this.tokens.length-1},this.isCommandOrEnd=function(){return!!this.isEnd()||null!=this.tokens[this.i+1].match(/^[A-Za-z]$/)},this.isRelativeCommand=function(){switch(this.command){case"m":case"l":case"h":case"v":case"c":case"s":case"q":case"t":case"a":case"z":return!0}return!1},this.getToken=function(){return this.i++,this.tokens[this.i]},this.getScalar=function(){return parseFloat(this.getToken())},this.nextCommand=function(){this.previousCommand=this.command,this.command=this.getToken()},this.getPoint=function(){var t=new e.Point(this.getScalar(),this.getScalar());return this.makeAbsolute(t)},this.getAsControlPoint=function(){var t=this.getPoint();return this.control=t,t},this.getAsCurrentPoint=function(){var t=this.getPoint();return this.current=t,t},this.getReflectedControlPoint=function(){return"c"!=this.previousCommand.toLowerCase()&&"s"!=this.previousCommand.toLowerCase()&&"q"!=this.previousCommand.toLowerCase()&&"t"!=this.previousCommand.toLowerCase()?this.current:new e.Point(2*this.current.x-this.control.x,2*this.current.y-this.control.y)},this.makeAbsolute=function(t){return this.isRelativeCommand()&&(t.x+=this.current.x,t.y+=this.current.y),t},this.addMarker=function(t,e,n){null!=n&&this.angles.length>0&&null==this.angles[this.angles.length-1]&&(this.angles[this.angles.length-1]=this.points[this.points.length-1].angleTo(n)),this.addMarkerAngle(t,null==e?null:e.angleTo(t))},this.addMarkerAngle=function(t,e){this.points.push(t),this.angles.push(e)},this.getMarkerPoints=function(){return this.points},this.getMarkerAngles=function(){for(var t=0;t<this.angles.length;t++)if(null==this.angles[t])for(var e=t+1;e<this.angles.length;e++)if(null!=this.angles[e]){this.angles[t]=this.angles[e];break}return this.angles}}(n),this.path=function(t){var n=this.PathParser;n.reset();var i=new e.BoundingBox;for(null!=t&&t.beginPath();!n.isEnd();)switch(n.nextCommand(),n.command){case"M":case"m":a=n.getAsCurrentPoint();for(n.addMarker(a),i.addPoint(a.x,a.y),null!=t&&t.moveTo(a.x,a.y),n.start=n.current;!n.isCommandOrEnd();){a=n.getAsCurrentPoint();n.addMarker(a,n.start),i.addPoint(a.x,a.y),null!=t&&t.lineTo(a.x,a.y)}break;case"L":case"l":for(;!n.isCommandOrEnd();){var r=n.current,a=n.getAsCurrentPoint();n.addMarker(a,r),i.addPoint(a.x,a.y),null!=t&&t.lineTo(a.x,a.y)}break;case"H":case"h":for(;!n.isCommandOrEnd();){o=new e.Point((n.isRelativeCommand()?n.current.x:0)+n.getScalar(),n.current.y);n.addMarker(o,n.current),n.current=o,i.addPoint(n.current.x,n.current.y),null!=t&&t.lineTo(n.current.x,n.current.y)}break;case"V":case"v":for(;!n.isCommandOrEnd();){var o=new e.Point(n.current.x,(n.isRelativeCommand()?n.current.y:0)+n.getScalar());n.addMarker(o,n.current),n.current=o,i.addPoint(n.current.x,n.current.y),null!=t&&t.lineTo(n.current.x,n.current.y)}break;case"C":case"c":for(;!n.isCommandOrEnd();){var s=n.current,l=n.getPoint(),u=n.getAsControlPoint(),h=n.getAsCurrentPoint();n.addMarker(h,u,l),i.addBezierCurve(s.x,s.y,l.x,l.y,u.x,u.y,h.x,h.y),null!=t&&t.bezierCurveTo(l.x,l.y,u.x,u.y,h.x,h.y)}break;case"S":case"s":for(;!n.isCommandOrEnd();){var s=n.current,l=n.getReflectedControlPoint(),u=n.getAsControlPoint(),h=n.getAsCurrentPoint();n.addMarker(h,u,l),i.addBezierCurve(s.x,s.y,l.x,l.y,u.x,u.y,h.x,h.y),null!=t&&t.bezierCurveTo(l.x,l.y,u.x,u.y,h.x,h.y)}break;case"Q":case"q":for(;!n.isCommandOrEnd();){var s=n.current,u=n.getAsControlPoint(),h=n.getAsCurrentPoint();n.addMarker(h,u,u),i.addQuadraticCurve(s.x,s.y,u.x,u.y,h.x,h.y),null!=t&&t.quadraticCurveTo(u.x,u.y,h.x,h.y)}break;case"T":case"t":for(;!n.isCommandOrEnd();){var s=n.current,u=n.getReflectedControlPoint();n.control=u;h=n.getAsCurrentPoint();n.addMarker(h,u,u),i.addQuadraticCurve(s.x,s.y,u.x,u.y,h.x,h.y),null!=t&&t.quadraticCurveTo(u.x,u.y,h.x,h.y)}break;case"A":case"a":for(;!n.isCommandOrEnd();){var s=n.current,c=n.getScalar(),f=n.getScalar(),d=n.getScalar()*(Math.PI/180),p=n.getScalar(),m=n.getScalar(),h=n.getAsCurrentPoint(),g=new e.Point(Math.cos(d)*(s.x-h.x)/2+Math.sin(d)*(s.y-h.y)/2,-Math.sin(d)*(s.x-h.x)/2+Math.cos(d)*(s.y-h.y)/2),y=Math.pow(g.x,2)/Math.pow(c,2)+Math.pow(g.y,2)/Math.pow(f,2);y>1&&(c*=Math.sqrt(y),f*=Math.sqrt(y));var v=(p==m?-1:1)*Math.sqrt((Math.pow(c,2)*Math.pow(f,2)-Math.pow(c,2)*Math.pow(g.y,2)-Math.pow(f,2)*Math.pow(g.x,2))/(Math.pow(c,2)*Math.pow(g.y,2)+Math.pow(f,2)*Math.pow(g.x,2)));isNaN(v)&&(v=0);var b=new e.Point(v*c*g.y/f,v*-f*g.x/c),w=new e.Point((s.x+h.x)/2+Math.cos(d)*b.x-Math.sin(d)*b.y,(s.y+h.y)/2+Math.sin(d)*b.x+Math.cos(d)*b.y),x=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2))},E=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(x(t)*x(e))},T=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(E(t,e))},P=T([1,0],[(g.x-b.x)/c,(g.y-b.y)/f]),C=[(g.x-b.x)/c,(g.y-b.y)/f],S=[(-g.x-b.x)/c,(-g.y-b.y)/f],O=T(C,S);E(C,S)<=-1&&(O=Math.PI),E(C,S)>=1&&(O=0);var I=1-m?1:-1,k=P+I*(O/2),R=new e.Point(w.x+c*Math.cos(k),w.y+f*Math.sin(k));if(n.addMarkerAngle(R,k-I*Math.PI/2),n.addMarkerAngle(h,k-I*Math.PI),i.addPoint(h.x,h.y),null!=t){var E=c>f?c:f,M=c>f?1:c/f,N=c>f?f/c:1;t.translate(w.x,w.y),t.rotate(d),t.scale(M,N),t.arc(0,0,E,P,P+O,1-m),t.scale(1/M,1/N),t.rotate(-d),t.translate(-w.x,-w.y)}}break;case"Z":case"z":null!=t&&t.closePath(),n.current=n.start}return i},this.getMarkers=function(){for(var t=this.PathParser.getMarkerPoints(),e=this.PathParser.getMarkerAngles(),n=[],i=0;i<t.length;i++)n.push([t[i],e[i]]);return n}},e.Element.path.prototype=new e.Element.PathElementBase,e.Element.pattern=function(t){this.base=e.Element.ElementBase,this.base(t),this.createPattern=function(t,n){var i=this.attribute("width").toPixels("x",!0),r=this.attribute("height").toPixels("y",!0),a=new e.Element.svg;a.attributes.viewBox=new e.Property("viewBox",this.attribute("viewBox").value),a.attributes.width=new e.Property("width",i+"px"),a.attributes.height=new e.Property("height",r+"px"),a.attributes.transform=new e.Property("transform",this.attribute("patternTransform").value),a.children=this.children;var o=document.createElement("canvas");o.width=i,o.height=r;var s=o.getContext("2d");this.attribute("x").hasValue()&&this.attribute("y").hasValue()&&s.translate(this.attribute("x").toPixels("x",!0),this.attribute("y").toPixels("y",!0));for(var l=-1;l<=1;l++)for(var u=-1;u<=1;u++)s.save(),a.attributes.x=new e.Property("x",l*o.width),a.attributes.y=new e.Property("y",u*o.height),a.render(s),s.restore();return t.createPattern(o,"repeat")}},e.Element.pattern.prototype=new e.Element.ElementBase,e.Element.marker=function(t){this.base=e.Element.ElementBase,this.base(t),this.baseRender=this.render,this.render=function(t,n,i){t.translate(n.x,n.y),"auto"==this.attribute("orient").valueOrDefault("auto")&&t.rotate(i),"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&t.scale(t.lineWidth,t.lineWidth),t.save();var r=new e.Element.svg;r.attributes.viewBox=new e.Property("viewBox",this.attribute("viewBox").value),r.attributes.refX=new e.Property("refX",this.attribute("refX").value),r.attributes.refY=new e.Property("refY",this.attribute("refY").value),r.attributes.width=new e.Property("width",this.attribute("markerWidth").value),r.attributes.height=new e.Property("height",this.attribute("markerHeight").value),r.attributes.fill=new e.Property("fill",this.attribute("fill").valueOrDefault("black")),r.attributes.stroke=new e.Property("stroke",this.attribute("stroke").valueOrDefault("none")),r.children=this.children,r.render(t),t.restore(),"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&t.scale(1/t.lineWidth,1/t.lineWidth),"auto"==this.attribute("orient").valueOrDefault("auto")&&t.rotate(-i),t.translate(-n.x,-n.y)}},e.Element.marker.prototype=new e.Element.ElementBase,e.Element.defs=function(t){this.base=e.Element.ElementBase,this.base(t),this.render=function(t){}},e.Element.defs.prototype=new e.Element.ElementBase,e.Element.GradientBase=function(t){this.base=e.Element.ElementBase,this.base(t),this.stops=[];for(var n=0;n<this.children.length;n++){var i=this.children[n];"stop"==i.type&&this.stops.push(i)}this.getGradient=function(){},this.gradientUnits=function(){return this.attribute("gradientUnits").valueOrDefault("objectBoundingBox")},this.attributesToInherit=["gradientUnits"],this.inheritStopContainer=function(t){for(var e=0;e<this.attributesToInherit.length;e++){var n=this.attributesToInherit[e];!this.attribute(n).hasValue()&&t.attribute(n).hasValue()&&(this.attribute(n,!0).value=t.attribute(n).value)}},this.createGradient=function(t,n,i){var r=this;this.getHrefAttribute().hasValue()&&(r=this.getHrefAttribute().getDefinition(),this.inheritStopContainer(r));var a=function(t){return i.hasValue()?new e.Property("color",t).addOpacity(i).value:t},o=this.getGradient(t,n);if(null==o)return a(r.stops[r.stops.length-1].color);for(var s=0;s<r.stops.length;s++)o.addColorStop(r.stops[s].offset,a(r.stops[s].color));if(this.attribute("gradientTransform").hasValue()){var l=e.ViewPort.viewPorts[0],u=new e.Element.rect;u.attributes.x=new e.Property("x",-e.MAX_VIRTUAL_PIXELS/3),u.attributes.y=new e.Property("y",-e.MAX_VIRTUAL_PIXELS/3),u.attributes.width=new e.Property("width",e.MAX_VIRTUAL_PIXELS),u.attributes.height=new e.Property("height",e.MAX_VIRTUAL_PIXELS);var h=new e.Element.g;h.attributes.transform=new e.Property("transform",this.attribute("gradientTransform").value),h.children=[u];var c=new e.Element.svg;c.attributes.x=new e.Property("x",0),c.attributes.y=new e.Property("y",0),c.attributes.width=new e.Property("width",l.width),c.attributes.height=new e.Property("height",l.height),c.children=[h];var f=document.createElement("canvas");f.width=l.width,f.height=l.height;var d=f.getContext("2d");return d.fillStyle=o,c.render(d),d.createPattern(f,"no-repeat")}return o}},e.Element.GradientBase.prototype=new e.Element.ElementBase,e.Element.linearGradient=function(t){this.base=e.Element.GradientBase,this.base(t),this.attributesToInherit.push("x1"),this.attributesToInherit.push("y1"),this.attributesToInherit.push("x2"),this.attributesToInherit.push("y2"),this.getGradient=function(t,e){var n="objectBoundingBox"==this.gradientUnits()?e.getBoundingBox():null;this.attribute("x1").hasValue()||this.attribute("y1").hasValue()||this.attribute("x2").hasValue()||this.attribute("y2").hasValue()||(this.attribute("x1",!0).value=0,this.attribute("y1",!0).value=0,this.attribute("x2",!0).value=1,this.attribute("y2",!0).value=0);var i="objectBoundingBox"==this.gradientUnits()?n.x()+n.width()*this.attribute("x1").numValue():this.attribute("x1").toPixels("x"),r="objectBoundingBox"==this.gradientUnits()?n.y()+n.height()*this.attribute("y1").numValue():this.attribute("y1").toPixels("y"),a="objectBoundingBox"==this.gradientUnits()?n.x()+n.width()*this.attribute("x2").numValue():this.attribute("x2").toPixels("x"),o="objectBoundingBox"==this.gradientUnits()?n.y()+n.height()*this.attribute("y2").numValue():this.attribute("y2").toPixels("y");return i==a&&r==o?null:t.createLinearGradient(i,r,a,o)}},e.Element.linearGradient.prototype=new e.Element.GradientBase,e.Element.radialGradient=function(t){this.base=e.Element.GradientBase,this.base(t),this.attributesToInherit.push("cx"),this.attributesToInherit.push("cy"),this.attributesToInherit.push("r"),this.attributesToInherit.push("fx"),this.attributesToInherit.push("fy"),this.getGradient=function(t,e){var n=e.getBoundingBox();this.attribute("cx").hasValue()||(this.attribute("cx",!0).value="50%"),this.attribute("cy").hasValue()||(this.attribute("cy",!0).value="50%"),this.attribute("r").hasValue()||(this.attribute("r",!0).value="50%");var i="objectBoundingBox"==this.gradientUnits()?n.x()+n.width()*this.attribute("cx").numValue():this.attribute("cx").toPixels("x"),r="objectBoundingBox"==this.gradientUnits()?n.y()+n.height()*this.attribute("cy").numValue():this.attribute("cy").toPixels("y"),a=i,o=r;this.attribute("fx").hasValue()&&(a="objectBoundingBox"==this.gradientUnits()?n.x()+n.width()*this.attribute("fx").numValue():this.attribute("fx").toPixels("x")),this.attribute("fy").hasValue()&&(o="objectBoundingBox"==this.gradientUnits()?n.y()+n.height()*this.attribute("fy").numValue():this.attribute("fy").toPixels("y"));var s="objectBoundingBox"==this.gradientUnits()?(n.width()+n.height())/2*this.attribute("r").numValue():this.attribute("r").toPixels();return t.createRadialGradient(a,o,0,i,r,s)}},e.Element.radialGradient.prototype=new e.Element.GradientBase,e.Element.stop=function(t){this.base=e.Element.ElementBase,this.base(t),this.offset=this.attribute("offset").numValue(),this.offset<0&&(this.offset=0),this.offset>1&&(this.offset=1);var n=this.style("stop-color",!0);""===n.value&&(n.value="#000"),this.style("stop-opacity").hasValue()&&(n=n.addOpacity(this.style("stop-opacity"))),this.color=n.value},e.Element.stop.prototype=new e.Element.ElementBase,e.Element.AnimateBase=function(t){this.base=e.Element.ElementBase,this.base(t),e.Animations.push(this),this.duration=0,this.begin=this.attribute("begin").toMilliseconds(),this.maxDuration=this.begin+this.attribute("dur").toMilliseconds(),this.getProperty=function(){var t=this.attribute("attributeType").value,e=this.attribute("attributeName").value;return"CSS"==t?this.parent.style(e,!0):this.parent.attribute(e,!0)},this.initialValue=null,this.initialUnits="",this.removed=!1,this.calcValue=function(){return""},this.update=function(t){if(null==this.initialValue&&(this.initialValue=this.getProperty().value,this.initialUnits=this.getProperty().getUnits()),this.duration>this.maxDuration){if("indefinite"==this.attribute("repeatCount").value||"indefinite"==this.attribute("repeatDur").value)this.duration=0;else if("freeze"!=this.attribute("fill").valueOrDefault("remove")||this.frozen){if("remove"==this.attribute("fill").valueOrDefault("remove")&&!this.removed)return this.removed=!0,this.getProperty().value=this.parent.animationFrozen?this.parent.animationFrozenValue:this.initialValue,!0}else this.frozen=!0,this.parent.animationFrozen=!0,this.parent.animationFrozenValue=this.getProperty().value;return!1}this.duration=this.duration+t;var e=!1;if(this.begin<this.duration){var n=this.calcValue();this.attribute("type").hasValue()&&(n=this.attribute("type").value+"("+n+")"),this.getProperty().value=n,e=!0}return e},this.from=this.attribute("from"),this.to=this.attribute("to"),this.values=this.attribute("values"),this.values.hasValue()&&(this.values.value=this.values.value.split(";")),this.progress=function(){var t={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(this.values.hasValue()){var n=t.progress*(this.values.value.length-1),i=Math.floor(n),r=Math.ceil(n);t.from=new e.Property("from",parseFloat(this.values.value[i])),t.to=new e.Property("to",parseFloat(this.values.value[r])),t.progress=(n-i)/(r-i)}else t.from=this.from,t.to=this.to;return t}},e.Element.AnimateBase.prototype=new e.Element.ElementBase,e.Element.animate=function(t){this.base=e.Element.AnimateBase,this.base(t),this.calcValue=function(){var t=this.progress();return t.from.numValue()+(t.to.numValue()-t.from.numValue())*t.progress+this.initialUnits}},e.Element.animate.prototype=new e.Element.AnimateBase,e.Element.animateColor=function(t){this.base=e.Element.AnimateBase,this.base(t),this.calcValue=function(){var t=this.progress(),e=new h(t.from.value),n=new h(t.to.value);if(e.ok&&n.ok){var i=e.r+(n.r-e.r)*t.progress,r=e.g+(n.g-e.g)*t.progress,a=e.b+(n.b-e.b)*t.progress;return"rgb("+parseInt(i,10)+","+parseInt(r,10)+","+parseInt(a,10)+")"}return this.attribute("from").value}},e.Element.animateColor.prototype=new e.Element.AnimateBase,e.Element.animateTransform=function(t){this.base=e.Element.AnimateBase,this.base(t),this.calcValue=function(){for(var t=this.progress(),n=e.ToNumberArray(t.from.value),i=e.ToNumberArray(t.to.value),r="",a=0;a<n.length;a++)r+=n[a]+(i[a]-n[a])*t.progress+" ";return r}},e.Element.animateTransform.prototype=new e.Element.animate,e.Element.font=function(t){this.base=e.Element.ElementBase,this.base(t),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.isRTL=!1,this.isArabic=!1,this.fontFace=null,this.missingGlyph=null,this.glyphs=[];for(var n=0;n<this.children.length;n++){var i=this.children[n];"font-face"==i.type?(this.fontFace=i,i.style("font-family").hasValue()&&(e.Definitions[i.style("font-family").value]=this)):"missing-glyph"==i.type?this.missingGlyph=i:"glyph"==i.type&&(""!=i.arabicForm?(this.isRTL=!0,this.isArabic=!0,void 0===this.glyphs[i.unicode]&&(this.glyphs[i.unicode]=[]),this.glyphs[i.unicode][i.arabicForm]=i):this.glyphs[i.unicode]=i)}},e.Element.font.prototype=new e.Element.ElementBase,e.Element.fontface=function(t){this.base=e.Element.ElementBase,this.base(t),this.ascent=this.attribute("ascent").value,this.descent=this.attribute("descent").value,this.unitsPerEm=this.attribute("units-per-em").numValue()},e.Element.fontface.prototype=new e.Element.ElementBase,e.Element.missingglyph=function(t){this.base=e.Element.path,this.base(t),this.horizAdvX=0},e.Element.missingglyph.prototype=new e.Element.path,e.Element.glyph=function(t){this.base=e.Element.path,this.base(t),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.unicode=this.attribute("unicode").value,this.arabicForm=this.attribute("arabic-form").value},e.Element.glyph.prototype=new e.Element.path,e.Element.text=function(t){this.captureTextNodes=!0,this.base=e.Element.RenderedElementBase,this.base(t),this.baseSetContext=this.setContext,this.setContext=function(t){this.baseSetContext(t);var e=this.style("dominant-baseline").toTextBaseline();null==e&&(e=this.style("alignment-baseline").toTextBaseline()),null!=e&&(t.textBaseline=e)},this.getBoundingBox=function(){var t=this.attribute("x").toPixels("x"),n=this.attribute("y").toPixels("y"),i=this.parent.style("font-size").numValueOrDefault(e.Font.Parse(e.ctx.font).fontSize);return new e.BoundingBox(t,n-i,t+Math.floor(2*i/3)*this.children[0].getText().length,n)},this.renderChildren=function(t){this.x=this.attribute("x").toPixels("x"),this.y=this.attribute("y").toPixels("y"),this.attribute("dx").hasValue()&&(this.x+=this.attribute("dx").toPixels("x")),this.attribute("dy").hasValue()&&(this.y+=this.attribute("dy").toPixels("y")),this.x+=this.getAnchorDelta(t,this,0);for(var e=0;e<this.children.length;e++)this.renderChild(t,this,e)},this.getAnchorDelta=function(t,e,n){var i=this.style("text-anchor").valueOrDefault("start");if("start"!=i){for(var r=0,a=n;a<e.children.length;a++){var o=e.children[a];if(a>n&&o.attribute("x").hasValue())break;r+=o.measureTextRecursive(t)}return-1*("end"==i?r:r/2)}return 0},this.renderChild=function(t,e,n){var i=e.children[n];i.attribute("x").hasValue()?(i.x=i.attribute("x").toPixels("x")+e.getAnchorDelta(t,e,n),i.attribute("dx").hasValue()&&(i.x+=i.attribute("dx").toPixels("x"))):(i.attribute("dx").hasValue()&&(e.x+=i.attribute("dx").toPixels("x")),i.x=e.x),e.x=i.x+i.measureText(t),i.attribute("y").hasValue()?(i.y=i.attribute("y").toPixels("y"),i.attribute("dy").hasValue()&&(i.y+=i.attribute("dy").toPixels("y"))):(i.attribute("dy").hasValue()&&(e.y+=i.attribute("dy").toPixels("y")),i.y=e.y),e.y=i.y,i.render(t);for(var n=0;n<i.children.length;n++)e.renderChild(t,i,n)}},e.Element.text.prototype=new e.Element.RenderedElementBase,e.Element.TextElementBase=function(t){this.base=e.Element.RenderedElementBase,this.base(t),this.getGlyph=function(t,e,n){var i=e[n],r=null;if(t.isArabic){var a="isolated";(0==n||" "==e[n-1])&&n<e.length-2&&" "!=e[n+1]&&(a="terminal"),n>0&&" "!=e[n-1]&&n<e.length-2&&" "!=e[n+1]&&(a="medial"),n>0&&" "!=e[n-1]&&(n==e.length-1||" "==e[n+1])&&(a="initial"),void 0!==t.glyphs[i]&&null==(r=t.glyphs[i][a])&&"glyph"==t.glyphs[i].type&&(r=t.glyphs[i])}else r=t.glyphs[i];return null==r&&(r=t.missingGlyph),r},this.renderChildren=function(t){var n=this.parent.style("font-family").getDefinition();if(null==n)""!=t.fillStyle&&t.fillText(e.compressSpaces(this.getText()),this.x,this.y),""!=t.strokeStyle&&t.strokeText(e.compressSpaces(this.getText()),this.x,this.y);else{var i=this.parent.style("font-size").numValueOrDefault(e.Font.Parse(e.ctx.font).fontSize),r=this.parent.style("font-style").valueOrDefault(e.Font.Parse(e.ctx.font).fontStyle),a=this.getText();n.isRTL&&(a=a.split("").reverse().join(""));for(var o=e.ToNumberArray(this.parent.attribute("dx").value),s=0;s<a.length;s++){var l=this.getGlyph(n,a,s),u=i/n.fontFace.unitsPerEm;t.translate(this.x,this.y),t.scale(u,-u);var h=t.lineWidth;t.lineWidth=t.lineWidth*n.fontFace.unitsPerEm/i,"italic"==r&&t.transform(1,0,.4,1,0,0),l.render(t),"italic"==r&&t.transform(1,0,-.4,1,0,0),t.lineWidth=h,t.scale(1/u,-1/u),t.translate(-this.x,-this.y),this.x+=i*(l.horizAdvX||n.horizAdvX)/n.fontFace.unitsPerEm,void 0===o[s]||isNaN(o[s])||(this.x+=o[s])}}},this.getText=function(){},this.measureTextRecursive=function(t){for(var e=this.measureText(t),n=0;n<this.children.length;n++)e+=this.children[n].measureTextRecursive(t);return e},this.measureText=function(t){var n=this.parent.style("font-family").getDefinition();if(null!=n){var i=this.parent.style("font-size").numValueOrDefault(e.Font.Parse(e.ctx.font).fontSize),r=0,a=this.getText();n.isRTL&&(a=a.split("").reverse().join(""));for(var o=e.ToNumberArray(this.parent.attribute("dx").value),s=0;s<a.length;s++)r+=(this.getGlyph(n,a,s).horizAdvX||n.horizAdvX)*i/n.fontFace.unitsPerEm,void 0===o[s]||isNaN(o[s])||(r+=o[s]);return r}var l=e.compressSpaces(this.getText());if(!t.measureText)return 10*l.length;t.save(),this.setContext(t);var u=t.measureText(l).width;return t.restore(),u}},e.Element.TextElementBase.prototype=new e.Element.RenderedElementBase,e.Element.tspan=function(t){this.captureTextNodes=!0,this.base=e.Element.TextElementBase,this.base(t),this.text=e.compressSpaces(t.value||t.text||t.textContent||""),this.getText=function(){return this.children.length>0?"":this.text}},e.Element.tspan.prototype=new e.Element.TextElementBase,e.Element.tref=function(t){this.base=e.Element.TextElementBase,this.base(t),this.getText=function(){var t=this.getHrefAttribute().getDefinition();if(null!=t)return t.children[0].getText()}},e.Element.tref.prototype=new e.Element.TextElementBase,e.Element.a=function(t){this.base=e.Element.TextElementBase,this.base(t),this.hasText=t.childNodes.length>0;for(var n=0;n<t.childNodes.length;n++)3!=t.childNodes[n].nodeType&&(this.hasText=!1);this.text=this.hasText?t.childNodes[0].value:"",this.getText=function(){return this.text},this.baseRenderChildren=this.renderChildren,this.renderChildren=function(t){if(this.hasText){this.baseRenderChildren(t);var n=new e.Property("fontSize",e.Font.Parse(e.ctx.font).fontSize);e.Mouse.checkBoundingBox(this,new e.BoundingBox(this.x,this.y-n.toPixels("y"),this.x+this.measureText(t),this.y))}else if(this.children.length>0){var i=new e.Element.g;i.children=this.children,i.parent=this,i.render(t)}},this.onclick=function(){window.open(this.getHrefAttribute().value)},this.onmousemove=function(){e.ctx.canvas.style.cursor="pointer"}},e.Element.a.prototype=new e.Element.TextElementBase,e.Element.image=function(t){this.base=e.Element.RenderedElementBase,this.base(t);var n=this.getHrefAttribute().value;if(""!=n){var i=n.match(/\.svg$/);if(e.Images.push(this),this.loaded=!1,i)this.img=e.ajax(n),this.loaded=!0;else{this.img=document.createElement("img"),1==e.opts.useCORS&&(this.img.crossOrigin="Anonymous");var r=this;this.img.onload=function(){r.loaded=!0},this.img.onerror=function(){e.log('ERROR: image "'+n+'" not found'),r.loaded=!0},this.img.src=n}this.renderChildren=function(t){var n=this.attribute("x").toPixels("x"),r=this.attribute("y").toPixels("y"),a=this.attribute("width").toPixels("x"),o=this.attribute("height").toPixels("y");0!=a&&0!=o&&(t.save(),i?t.drawSvg(this.img,n,r,a,o):(t.translate(n,r),e.AspectRatio(t,this.attribute("preserveAspectRatio").value,a,this.img.width,o,this.img.height,0,0),t.drawImage(this.img,0,0)),t.restore())},this.getBoundingBox=function(){var t=this.attribute("x").toPixels("x"),n=this.attribute("y").toPixels("y"),i=this.attribute("width").toPixels("x"),r=this.attribute("height").toPixels("y");return new e.BoundingBox(t,n,t+i,n+r)}}},e.Element.image.prototype=new e.Element.RenderedElementBase,e.Element.g=function(t){this.base=e.Element.RenderedElementBase,this.base(t),this.getBoundingBox=function(){for(var t=new e.BoundingBox,n=0;n<this.children.length;n++)t.addBoundingBox(this.children[n].getBoundingBox());return t}},e.Element.g.prototype=new e.Element.RenderedElementBase,e.Element.symbol=function(t){this.base=e.Element.RenderedElementBase,this.base(t),this.render=function(t){}},e.Element.symbol.prototype=new e.Element.RenderedElementBase,e.Element.style=function(t){this.base=e.Element.ElementBase,this.base(t);for(var n="",i=0;i<t.childNodes.length;i++)n+=t.childNodes[i].data;n=n.replace(/(\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,"");for(var r=(n=e.compressSpaces(n)).split("}"),i=0;i<r.length;i++)if(""!=e.trim(r[i]))for(var a=r[i].split("{"),o=a[0].split(","),s=a[1].split(";"),l=0;l<o.length;l++){var u=e.trim(o[l]);if(""!=u){for(var h=e.Styles[u]||{},c=0;c<s.length;c++){var f=s[c].indexOf(":"),d=s[c].substr(0,f),p=s[c].substr(f+1,s[c].length-f);null!=d&&null!=p&&(h[e.trim(d)]=new e.Property(e.trim(d),e.trim(p)))}if(e.Styles[u]=h,e.StylesSpecificity[u]=g(u),"@font-face"==u)for(var m=h["font-family"].value.replace(/"/g,""),y=h.src.value.split(","),v=0;v<y.length;v++)if(y[v].indexOf('format("svg")')>0)for(var b=y[v].indexOf("url"),w=y[v].indexOf(")",b),x=y[v].substr(b+5,w-b-6),E=e.parseXml(e.ajax(x)).getElementsByTagName("font"),T=0;T<E.length;T++){var P=e.CreateElement(E[T]);e.Definitions[m]=P}}}},e.Element.style.prototype=new e.Element.ElementBase,e.Element.use=function(t){this.base=e.Element.RenderedElementBase,this.base(t),this.baseSetContext=this.setContext,this.setContext=function(t){this.baseSetContext(t),this.attribute("x").hasValue()&&t.translate(this.attribute("x").toPixels("x"),0),this.attribute("y").hasValue()&&t.translate(0,this.attribute("y").toPixels("y"))};var n=this.getHrefAttribute().getDefinition();this.path=function(t){null!=n&&n.path(t)},this.getBoundingBox=function(){if(null!=n)return n.getBoundingBox()},this.renderChildren=function(t){if(null!=n){var i=n;"symbol"==n.type&&((i=new e.Element.svg).type="svg",i.attributes.viewBox=new e.Property("viewBox",n.attribute("viewBox").value),i.attributes.preserveAspectRatio=new e.Property("preserveAspectRatio",n.attribute("preserveAspectRatio").value),i.attributes.overflow=new e.Property("overflow",n.attribute("overflow").value),i.children=n.children),"svg"==i.type&&(this.attribute("width").hasValue()&&(i.attributes.width=new e.Property("width",this.attribute("width").value)),this.attribute("height").hasValue()&&(i.attributes.height=new e.Property("height",this.attribute("height").value)));var r=i.parent;i.parent=null,i.render(t),i.parent=r}}},e.Element.use.prototype=new e.Element.RenderedElementBase,e.Element.mask=function(t){this.base=e.Element.ElementBase,this.base(t),this.apply=function(t,n){var i=this.attribute("x").toPixels("x"),r=this.attribute("y").toPixels("y"),a=this.attribute("width").toPixels("x"),o=this.attribute("height").toPixels("y");if(0==a&&0==o){for(var s=new e.BoundingBox,l=0;l<this.children.length;l++)s.addBoundingBox(this.children[l].getBoundingBox());var i=Math.floor(s.x1),r=Math.floor(s.y1),a=Math.floor(s.width()),o=Math.floor(s.height())}var u=n.attribute("mask").value;n.attribute("mask").value="";var h=document.createElement("canvas");h.width=i+a,h.height=r+o;var c=h.getContext("2d");this.renderChildren(c);var f=document.createElement("canvas");f.width=i+a,f.height=r+o;var d=f.getContext("2d");n.render(d),d.globalCompositeOperation="destination-in",d.fillStyle=c.createPattern(h,"no-repeat"),d.fillRect(0,0,i+a,r+o),t.fillStyle=d.createPattern(f,"no-repeat"),t.fillRect(0,0,i+a,r+o),n.attribute("mask").value=u},this.render=function(t){}},e.Element.mask.prototype=new e.Element.ElementBase,e.Element.clipPath=function(t){this.base=e.Element.ElementBase,this.base(t),this.apply=function(t){var n=CanvasRenderingContext2D.prototype.beginPath;CanvasRenderingContext2D.prototype.beginPath=function(){};var i=CanvasRenderingContext2D.prototype.closePath;CanvasRenderingContext2D.prototype.closePath=function(){},n.call(t);for(var r=0;r<this.children.length;r++){var a=this.children[r];if(void 0!==a.path){var o=null;a.style("transform",!1,!0).hasValue()&&(o=new e.Transform(a.style("transform",!1,!0).value)).apply(t),a.path(t),CanvasRenderingContext2D.prototype.closePath=i,o&&o.unapply(t)}}i.call(t),t.clip(),CanvasRenderingContext2D.prototype.beginPath=n,CanvasRenderingContext2D.prototype.closePath=i},this.render=function(t){}},e.Element.clipPath.prototype=new e.Element.ElementBase,e.Element.filter=function(t){this.base=e.Element.ElementBase,this.base(t),this.apply=function(t,e){var n=e.getBoundingBox(),i=Math.floor(n.x1),r=Math.floor(n.y1),a=Math.floor(n.width()),o=Math.floor(n.height()),s=e.style("filter").value;e.style("filter").value="";for(var l=0,u=0,h=0;h<this.children.length;h++){var c=this.children[h].extraFilterDistance||0;l=Math.max(l,c),u=Math.max(u,c)}var f=document.createElement("canvas");f.width=a+2*l,f.height=o+2*u;var d=f.getContext("2d");d.translate(-i+l,-r+u),e.render(d);for(h=0;h<this.children.length;h++)"function"==typeof this.children[h].apply&&this.children[h].apply(d,0,0,a+2*l,o+2*u);t.drawImage(f,0,0,a+2*l,o+2*u,i-l,r-u,a+2*l,o+2*u),e.style("filter",!0).value=s},this.render=function(t){}},e.Element.filter.prototype=new e.Element.ElementBase,e.Element.feMorphology=function(t){this.base=e.Element.ElementBase,this.base(t),this.apply=function(t,e,n,i,r){}},e.Element.feMorphology.prototype=new e.Element.ElementBase,e.Element.feComposite=function(t){this.base=e.Element.ElementBase,this.base(t),this.apply=function(t,e,n,i,r){}},e.Element.feComposite.prototype=new e.Element.ElementBase,e.Element.feColorMatrix=function(t){function n(t,e,n,i,r,a){return t[n*i*4+4*e+a]}function i(t,e,n,i,r,a,o){t[n*i*4+4*e+a]=o}function r(t,e){var n=a[t];return n*(n<0?e-255:e)}this.base=e.Element.ElementBase,this.base(t);var a=e.ToNumberArray(this.attribute("values").value);switch(this.attribute("type").valueOrDefault("matrix")){case"saturate":var o=a[0];a=[.213+.787*o,.715-.715*o,.072-.072*o,0,0,.213-.213*o,.715+.285*o,.072-.072*o,0,0,.213-.213*o,.715-.715*o,.072+.928*o,0,0,0,0,0,1,0,0,0,0,0,1];break;case"hueRotate":var s=a[0]*Math.PI/180,l=function(t,e,n){return t+Math.cos(s)*e+Math.sin(s)*n};a=[l(.213,.787,-.213),l(.715,-.715,-.715),l(.072,-.072,.928),0,0,l(.213,-.213,.143),l(.715,.285,.14),l(.072,-.072,-.283),0,0,l(.213,-.213,-.787),l(.715,-.715,.715),l(.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break;case"luminanceToAlpha":a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1]}this.apply=function(t,e,a,o,s){for(var l=t.getImageData(0,0,o,s),a=0;a<s;a++)for(var e=0;e<o;e++){var u=n(l.data,e,a,o,0,0),h=n(l.data,e,a,o,0,1),c=n(l.data,e,a,o,0,2),f=n(l.data,e,a,o,0,3);i(l.data,e,a,o,0,0,r(0,u)+r(1,h)+r(2,c)+r(3,f)+r(4,1)),i(l.data,e,a,o,0,1,r(5,u)+r(6,h)+r(7,c)+r(8,f)+r(9,1)),i(l.data,e,a,o,0,2,r(10,u)+r(11,h)+r(12,c)+r(13,f)+r(14,1)),i(l.data,e,a,o,0,3,r(15,u)+r(16,h)+r(17,c)+r(18,f)+r(19,1))}t.clearRect(0,0,o,s),t.putImageData(l,0,0)}},e.Element.feColorMatrix.prototype=new e.Element.ElementBase,e.Element.feGaussianBlur=function(t){this.base=e.Element.ElementBase,this.base(t),this.blurRadius=Math.floor(this.attribute("stdDeviation").numValue()),this.extraFilterDistance=this.blurRadius,this.apply=function(t,n,i,r,a){void 0!==ls.canvasRGBA?(t.canvas.id=e.UniqueId(),t.canvas.style.display="none",document.body.appendChild(t.canvas),ls.canvasRGBA(t.canvas.id,n,i,r,a,this.blurRadius),document.body.removeChild(t.canvas)):e.log("ERROR: StackBlur.js must be included for blur to work")}},e.Element.feGaussianBlur.prototype=new e.Element.ElementBase,e.Element.title=function(t){},e.Element.title.prototype=new e.Element.ElementBase,e.Element.desc=function(t){},e.Element.desc.prototype=new e.Element.ElementBase,e.Element.MISSING=function(t){e.log("ERROR: Element '"+t.nodeName+"' not yet implemented.")},e.Element.MISSING.prototype=new e.Element.ElementBase,e.CreateElement=function(t){var n=t.nodeName.replace(/^[^:]+:/,"");n=n.replace(/\-/g,"");var i=null;return i=void 0!==e.Element[n]?new e.Element[n](t):new e.Element.MISSING(t),i.type=t.nodeName,i},e.load=function(t,n){e.loadXml(t,e.ajax(n))},e.loadXml=function(t,n){e.loadXmlDoc(t,e.parseXml(n))},e.loadXmlDoc=function(t,n){e.init(t);var i=function(e){for(var n=t.canvas;n;)e.x-=n.offsetLeft,e.y-=n.offsetTop,n=n.offsetParent;return window.scrollX&&(e.x+=window.scrollX),window.scrollY&&(e.y+=window.scrollY),e};1!=e.opts.ignoreMouse&&(t.canvas.onclick=function(t){var n=i(new e.Point(null!=t?t.clientX:event.clientX,null!=t?t.clientY:event.clientY));e.Mouse.onclick(n.x,n.y)},t.canvas.onmousemove=function(t){var n=i(new e.Point(null!=t?t.clientX:event.clientX,null!=t?t.clientY:event.clientY));e.Mouse.onmousemove(n.x,n.y)});var r=e.CreateElement(n.documentElement);r.root=!0,r.addStylesFromStyleDefinition();var a=!0,o=function(){e.ViewPort.Clear(),t.canvas.parentNode&&e.ViewPort.SetCurrent(t.canvas.parentNode.clientWidth,t.canvas.parentNode.clientHeight),1!=e.opts.ignoreDimensions&&(r.style("width").hasValue()&&(t.canvas.width=r.style("width").toPixels("x"),t.canvas.style.width=t.canvas.width+"px"),r.style("height").hasValue()&&(t.canvas.height=r.style("height").toPixels("y"),t.canvas.style.height=t.canvas.height+"px"));var i=t.canvas.clientWidth||t.canvas.width,o=t.canvas.clientHeight||t.canvas.height;if(1==e.opts.ignoreDimensions&&r.style("width").hasValue()&&r.style("height").hasValue()&&(i=r.style("width").toPixels("x"),o=r.style("height").toPixels("y")),e.ViewPort.SetCurrent(i,o),null!=e.opts.offsetX&&(r.attribute("x",!0).value=e.opts.offsetX),null!=e.opts.offsetY&&(r.attribute("y",!0).value=e.opts.offsetY),null!=e.opts.scaleWidth||null!=e.opts.scaleHeight){var s=null,l=null,u=e.ToNumberArray(r.attribute("viewBox").value);null!=e.opts.scaleWidth&&(r.attribute("width").hasValue()?s=r.attribute("width").toPixels("x")/e.opts.scaleWidth:isNaN(u[2])||(s=u[2]/e.opts.scaleWidth)),null!=e.opts.scaleHeight&&(r.attribute("height").hasValue()?l=r.attribute("height").toPixels("y")/e.opts.scaleHeight:isNaN(u[3])||(l=u[3]/e.opts.scaleHeight)),null==s&&(s=l),null==l&&(l=s),r.attribute("width",!0).value=e.opts.scaleWidth,r.attribute("height",!0).value=e.opts.scaleHeight,r.style("transform",!0,!0).value+=" scale("+1/s+","+1/l+")"}1!=e.opts.ignoreClear&&t.clearRect(0,0,i,o),r.render(t),a&&(a=!1,"function"==typeof e.opts.renderCallback&&e.opts.renderCallback(n))},s=!0;e.ImagesLoaded()&&(s=!1,o()),e.intervalID=setInterval(function(){var t=!1;if(s&&e.ImagesLoaded()&&(s=!1,t=!0),1!=e.opts.ignoreMouse&&(t|=e.Mouse.hasEvents()),1!=e.opts.ignoreAnimation)for(var n=0;n<e.Animations.length;n++)t|=e.Animations[n].update(1e3/e.FRAMERATE);"function"==typeof e.opts.forceRedraw&&1==e.opts.forceRedraw()&&(t=!0),t&&(o(),e.Mouse.runEvents())},1e3/e.FRAMERATE)},e.stop=function(){e.intervalID&&clearInterval(e.intervalID)},e.Mouse=new function(){this.events=[],this.hasEvents=function(){return 0!=this.events.length},this.onclick=function(t,e){this.events.push({type:"onclick",x:t,y:e,run:function(t){t.onclick&&t.onclick()}})},this.onmousemove=function(t,e){this.events.push({type:"onmousemove",x:t,y:e,run:function(t){t.onmousemove&&t.onmousemove()}})},this.eventElements=[],this.checkPath=function(t,e){for(var n=0;n<this.events.length;n++){var i=this.events[n];e.isPointInPath&&e.isPointInPath(i.x,i.y)&&(this.eventElements[n]=t)}},this.checkBoundingBox=function(t,e){for(var n=0;n<this.events.length;n++){var i=this.events[n];e.isPointInBox(i.x,i.y)&&(this.eventElements[n]=t)}},this.runEvents=function(){e.ctx.canvas.style.cursor="";for(var t=0;t<this.events.length;t++)for(var n=this.events[t],i=this.eventElements[t];i;)n.run(i),i=i.parent;this.events=[],this.eventElements=[]}},e}function v(t,e){var n=t.find("svg");if(0!==n.length){t.find("g").removeAttr("clip-path"),t.find("g.c3-event-rects").remove(),t.find("g.c3-grid").remove(),t.find("g.c3-regions").remove(),t.find("g.c3-axis-y2").remove(),t.find("path.domain").attr("stroke-width",.5).css("stroke-width","0.2px");var i=(new XMLSerializer).serializeToString(n[0]);n.hide();var r=document.createElement("canvas");r.setAttribute("id","elcanvas"),t[0].appendChild(r),us("elcanvas",i,{ignoreMouse:!0,ignoreAnimation:!0,log:!0}),t.find(".laimg").remove();var a=new Image;a.className="laimg",t[0].appendChild(a),a.src=r.toDataURL(),t.find("#elcanvas").remove(),e&&e(a)}else e&&e()}function b(t,e){var n=t.find("svg");t.find("svg").css("font","10px sans-serif"),t.find("path").attr("fill","none"),t.find(".tick line, path.domain").attr("stroke","black"),t.find("canvas").remove();var i=t.find(".c3-tooltip-container").detach(),r=t.html().trim(),a=document.createElement("canvas");t[0].appendChild(a),n.hide(),t.append(i),us(a,r),e&&e(a)}function w(t){var e=t[0].cloneNode(!0),n=e.style;return n.position="relative",n["box-sizing"]="content-box",n.width=t.width()+"px",n.height=t.height()+"px",n.top=window.innerHeight+"px",n.left=0,document.body.appendChild(e),e}var x=n(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),E=n(function(t){var e=t.exports={version:"2.5.1"};"number"==typeof __e&&(__e=e)}),T=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},P=function(t,e,n){if(T(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)}}return function(){return t.apply(e,arguments)}},C=function(t){return"object"==typeof t?null!==t:"function"==typeof t},S=function(t){if(!C(t))throw TypeError(t+" is not an object!");return t},O=function(t){try{return!!t()}catch(t){return!0}},I=!O(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),k=x.document,R=C(k)&&C(k.createElement),M=function(t){return R?k.createElement(t):{}},N=!I&&!O(function(){return 7!=Object.defineProperty(M("div"),"a",{get:function(){return 7}}).a}),A=function(t,e){if(!C(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!C(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!C(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!C(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")},B=Object.defineProperty,_={f:I?Object.defineProperty:function(t,e,n){if(S(t),e=A(e,!0),S(n),N)try{return B(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},L=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},V=I?function(t,e,n){return _.f(t,e,L(1,n))}:function(t,e,n){return t[e]=n,t},D=function(t,e,n){var i,r,a,o=t&D.F,s=t&D.G,l=t&D.S,u=t&D.P,h=t&D.B,c=t&D.W,f=s?E:E[e]||(E[e]={}),d=f.prototype,p=s?x:l?x[e]:(x[e]||{}).prototype;s&&(n=e);for(i in n)(r=!o&&p&&void 0!==p[i])&&i in f||(a=r?p[i]:n[i],f[i]=s&&"function"!=typeof p[i]?n[i]:h&&r?P(a,x):c&&p[i]==a?function(t){var e=function(e,n,i){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,i)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(a):u&&"function"==typeof a?P(Function.call,a):a,u&&((f.virtual||(f.virtual={}))[i]=a,t&D.R&&d&&!d[i]&&V(d,i,a)))};D.F=1,D.G=2,D.S=4,D.P=8,D.B=16,D.W=32,D.U=64,D.R=128;var F=D,U={}.hasOwnProperty,G=function(t,e){return U.call(t,e)},W={}.toString,X=function(t){return W.call(t).slice(8,-1)},H=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==X(t)?t.split(""):Object(t)},j=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t},z=function(t){return H(j(t))},Y=Math.ceil,q=Math.floor,K=function(t){return isNaN(t=+t)?0:(t>0?q:Y)(t)},Z=Math.min,J=function(t){return t>0?Z(K(t),9007199254740991):0},Q=Math.max,tt=Math.min,et=function(t,e){return(t=K(t))<0?Q(t+e,0):tt(t,e)},nt=x["__core-js_shared__"]||(x["__core-js_shared__"]={}),it=function(t){return nt[t]||(nt[t]={})},rt=0,at=Math.random(),ot=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++rt+at).toString(36))},st=it("keys"),lt=function(t){return st[t]||(st[t]=ot(t))},ut=function(t){return function(e,n,i){var r,a=z(e),o=J(a.length),s=et(i,o);if(t&&n!=n){for(;o>s;)if((r=a[s++])!=r)return!0}else for(;o>s;s++)if((t||s in a)&&a[s]===n)return t||s||0;return!t&&-1}}(!1),ht=lt("IE_PROTO"),ct=function(t,e){var n,i=z(t),r=0,a=[];for(n in i)n!=ht&&G(i,n)&&a.push(n);for(;e.length>r;)G(i,n=e[r++])&&(~ut(a,n)||a.push(n));return a},ft="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),dt=Object.keys||function(t){return ct(t,ft)},pt={f:Object.getOwnPropertySymbols},mt={f:{}.propertyIsEnumerable},gt=function(t){return Object(j(t))},yt=Object.assign,vt=!yt||O(function(){var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach(function(t){e[t]=t}),7!=yt({},t)[n]||Object.keys(yt({},e)).join("")!=i})?function(t,e){for(var n=gt(t),i=arguments.length,r=1,a=pt.f,o=mt.f;i>r;)for(var s,l=H(arguments[r++]),u=a?dt(l).concat(a(l)):dt(l),h=u.length,c=0;h>c;)o.call(l,s=u[c++])&&(n[s]=l[s]);return n}:yt;F(F.S+F.F,"Object",{assign:vt});var bt=E.Object.assign,wt=n(function(t){t.exports={default:bt,__esModule:!0}});e(wt);var xt=e(n(function(t,e){e.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(wt);e.default=n.default||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}})),Et=V,Tt={},Pt=I?Object.defineProperties:function(t,e){S(t);for(var n,i=dt(e),r=i.length,a=0;r>a;)_.f(t,n=i[a++],e[n]);return t},Ct=x.document,St=Ct&&Ct.documentElement,Ot=lt("IE_PROTO"),It=function(){},kt=function(){var t,e=M("iframe"),n=ft.length;for(e.style.display="none",St.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),kt=t.F;n--;)delete kt.prototype[ft[n]];return kt()},Rt=Object.create||function(t,e){var n;return null!==t?(It.prototype=S(t),n=new It,It.prototype=null,n[Ot]=t):n=kt(),void 0===e?n:Pt(n,e)},Mt=n(function(t){var e=it("wks"),n=x.Symbol,i="function"==typeof n;(t.exports=function(t){return e[t]||(e[t]=i&&n[t]||(i?n:ot)("Symbol."+t))}).store=e}),Nt=_.f,At=Mt("toStringTag"),Bt=function(t,e,n){t&&!G(t=n?t:t.prototype,At)&&Nt(t,At,{configurable:!0,value:e})},_t={};V(_t,Mt("iterator"),function(){return this});var Lt=function(t,e,n){t.prototype=Rt(_t,{next:L(1,n)}),Bt(t,e+" Iterator")},Vt=lt("IE_PROTO"),Dt=Object.prototype,Ft=Object.getPrototypeOf||function(t){return t=gt(t),G(t,Vt)?t[Vt]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Dt:null},Ut=Mt("iterator"),Gt=!([].keys&&"next"in[].keys()),Wt=function(){return this},Xt=function(t,e,n,i,r,a,o){Lt(n,e,i);var s,l,u,h=function(t){if(!Gt&&t in p)return p[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},c=e+" Iterator",f="values"==r,d=!1,p=t.prototype,m=p[Ut]||p["@@iterator"]||r&&p[r],g=m||h(r),y=r?f?h("entries"):g:void 0,v="Array"==e?p.entries||m:m;if(v&&(u=Ft(v.call(new t)))!==Object.prototype&&u.next&&Bt(u,c,!0),f&&m&&"values"!==m.name&&(d=!0,g=function(){return m.call(this)}),o&&(Gt||d||!p[Ut])&&V(p,Ut,g),Tt[e]=g,Tt[c]=Wt,r)if(s={values:f?g:h("values"),keys:a?g:h("keys"),entries:y},o)for(l in s)l in p||Et(p,l,s[l]);else F(F.P+F.F*(Gt||d),e,s);return s},Ht=function(t){return function(e,n){var i,r,a=String(j(e)),o=K(n),s=a.length;return o<0||o>=s?t?"":void 0:(i=a.charCodeAt(o))<55296||i>56319||o+1===s||(r=a.charCodeAt(o+1))<56320||r>57343?t?a.charAt(o):i:t?a.slice(o,o+2):r-56320+(i-55296<<10)+65536}}(!0);Xt(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=Ht(e,n),this._i+=t.length,{value:t,done:!1})});var jt=function(t,e){return{value:e,done:!!t}};Xt(Array,"Array",function(t,e){this._t=z(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,jt(1)):"keys"==e?jt(0,n):"values"==e?jt(0,t[n]):jt(0,[n,t[n]])},"values");Tt.Arguments=Tt.Array;for(var zt=Mt("toStringTag"),Yt="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),qt=0;qt<Yt.length;qt++){var $t=Yt[qt],Kt=x[$t],Zt=Kt&&Kt.prototype;Zt&&!Zt[zt]&&V(Zt,zt,$t),Tt[$t]=Tt.Array}var Jt={f:Mt},Qt=Jt.f("iterator"),te=n(function(t){t.exports={default:Qt,__esModule:!0}});e(te);var ee=n(function(t){var e=ot("meta"),n=_.f,i=0,r=Object.isExtensible||function(){return!0},a=!O(function(){return r(Object.preventExtensions({}))}),o=function(t){n(t,e,{value:{i:"O"+ ++i,w:{}}})},s=t.exports={KEY:e,NEED:!1,fastKey:function(t,n){if(!C(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!G(t,e)){if(!r(t))return"F";if(!n)return"E";o(t)}return t[e].i},getWeak:function(t,n){if(!G(t,e)){if(!r(t))return!0;if(!n)return!1;o(t)}return t[e].w},onFreeze:function(t){return a&&s.NEED&&r(t)&&!G(t,e)&&o(t),t}}}),ne=_.f,ie=function(t){var e=E.Symbol||(E.Symbol={});"_"==t.charAt(0)||t in e||ne(e,t,{value:Jt.f(t)})},re=function(t){var e=dt(t),n=pt.f;if(n)for(var i,r=n(t),a=mt.f,o=0;r.length>o;)a.call(t,i=r[o++])&&e.push(i);return e},ae=Array.isArray||function(t){return"Array"==X(t)},oe=ft.concat("length","prototype"),se={f:Object.getOwnPropertyNames||function(t){return ct(t,oe)}},le=se.f,ue={}.toString,he="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],ce=function(t){try{return le(t)}catch(t){return he.slice()}},fe={f:function(t){return he&&"[object Window]"==ue.call(t)?ce(t):le(z(t))}},de=Object.getOwnPropertyDescriptor,pe={f:I?de:function(t,e){if(t=z(t),e=A(e,!0),N)try{return de(t,e)}catch(t){}if(G(t,e))return L(!mt.f.call(t,e),t[e])}},me=ee.KEY,ge=pe.f,ye=_.f,ve=fe.f,be=x.Symbol,we=x.JSON,xe=we&&we.stringify,Ee=Mt("_hidden"),Te=Mt("toPrimitive"),Pe={}.propertyIsEnumerable,Ce=it("symbol-registry"),Se=it("symbols"),Oe=it("op-symbols"),Ie=Object.prototype,ke="function"==typeof be,Re=x.QObject,Me=!Re||!Re.prototype||!Re.prototype.findChild,Ne=I&&O(function(){return 7!=Rt(ye({},"a",{get:function(){return ye(this,"a",{value:7}).a}})).a})?function(t,e,n){var i=ge(Ie,e);i&&delete Ie[e],ye(t,e,n),i&&t!==Ie&&ye(Ie,e,i)}:ye,Ae=function(t){var e=Se[t]=Rt(be.prototype);return e._k=t,e},Be=ke&&"symbol"==typeof be.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof be},_e=function(t,e,n){return t===Ie&&_e(Oe,e,n),S(t),e=A(e,!0),S(n),G(Se,e)?(n.enumerable?(G(t,Ee)&&t[Ee][e]&&(t[Ee][e]=!1),n=Rt(n,{enumerable:L(0,!1)})):(G(t,Ee)||ye(t,Ee,L(1,{})),t[Ee][e]=!0),Ne(t,e,n)):ye(t,e,n)},Le=function(t,e){S(t);for(var n,i=re(e=z(e)),r=0,a=i.length;a>r;)_e(t,n=i[r++],e[n]);return t},Ve=function(t){var e=Pe.call(this,t=A(t,!0));return!(this===Ie&&G(Se,t)&&!G(Oe,t))&&(!(e||!G(this,t)||!G(Se,t)||G(this,Ee)&&this[Ee][t])||e)},De=function(t,e){if(t=z(t),e=A(e,!0),t!==Ie||!G(Se,e)||G(Oe,e)){var n=ge(t,e);return!n||!G(Se,e)||G(t,Ee)&&t[Ee][e]||(n.enumerable=!0),n}},Fe=function(t){for(var e,n=ve(z(t)),i=[],r=0;n.length>r;)G(Se,e=n[r++])||e==Ee||e==me||i.push(e);return i},Ue=function(t){for(var e,n=t===Ie,i=ve(n?Oe:z(t)),r=[],a=0;i.length>a;)!G(Se,e=i[a++])||n&&!G(Ie,e)||r.push(Se[e]);return r};ke||(Et((be=function(){if(this instanceof be)throw TypeError("Symbol is not a constructor!");var t=ot(arguments.length>0?arguments[0]:void 0),e=function(n){this===Ie&&e.call(Oe,n),G(this,Ee)&&G(this[Ee],t)&&(this[Ee][t]=!1),Ne(this,t,L(1,n))};return I&&Me&&Ne(Ie,t,{configurable:!0,set:e}),Ae(t)}).prototype,"toString",function(){return this._k}),pe.f=De,_.f=_e,se.f=fe.f=Fe,mt.f=Ve,pt.f=Ue,Jt.f=function(t){return Ae(Mt(t))}),F(F.G+F.W+F.F*!ke,{Symbol:be});for(var Ge="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),We=0;Ge.length>We;)Mt(Ge[We++]);for(var Xe=dt(Mt.store),He=0;Xe.length>He;)ie(Xe[He++]);F(F.S+F.F*!ke,"Symbol",{for:function(t){return G(Ce,t+="")?Ce[t]:Ce[t]=be(t)},keyFor:function(t){if(!Be(t))throw TypeError(t+" is not a symbol!");for(var e in Ce)if(Ce[e]===t)return e},useSetter:function(){Me=!0},useSimple:function(){Me=!1}}),F(F.S+F.F*!ke,"Object",{create:function(t,e){return void 0===e?Rt(t):Le(Rt(t),e)},defineProperty:_e,defineProperties:Le,getOwnPropertyDescriptor:De,getOwnPropertyNames:Fe,getOwnPropertySymbols:Ue}),we&&F(F.S+F.F*(!ke||O(function(){var t=be();return"[null]"!=xe([t])||"{}"!=xe({a:t})||"{}"!=xe(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!Be(t)){for(var e,n,i=[t],r=1;arguments.length>r;)i.push(arguments[r++]);return"function"==typeof(e=i[1])&&(n=e),!n&&ae(e)||(e=function(t,e){if(n&&(e=n.call(this,t,e)),!Be(e))return e}),i[1]=e,xe.apply(we,i)}}}),be.prototype[Te]||V(be.prototype,Te,be.prototype.valueOf),Bt(be,"Symbol"),Bt(Math,"Math",!0),Bt(x.JSON,"JSON",!0),ie("asyncIterator"),ie("observable");var je=E.Symbol,ze=n(function(t){t.exports={default:je,__esModule:!0}});e(ze);var Ye,qe,$e,Ke=e(n(function(t,e){function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(te),r=n(ze),a="function"==typeof r.default&&"symbol"==typeof i.default?function(t){return typeof t}:function(t){return t&&"function"==typeof r.default&&t.constructor===r.default&&t!==r.default.prototype?"symbol":typeof t};e.default="function"==typeof r.default&&"symbol"===a(i.default)?function(t){return void 0===t?"undefined":a(t)}:function(t){return t&&"function"==typeof r.default&&t.constructor===r.default&&t!==r.default.prototype?"symbol":void 0===t?"undefined":a(t)}})),Ze=Mt("toStringTag"),Je="Arguments"==X(function(){return arguments}()),Qe=function(t,e){try{return t[e]}catch(t){}},tn=function(t){var e,n,i;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=Qe(e=Object(t),Ze))?n:Je?X(e):"Object"==(i=X(e))&&"function"==typeof e.callee?"Arguments":i},en=function(t,e,n,i){if(!(t instanceof e)||void 0!==i&&i in t)throw TypeError(n+": incorrect invocation!");return t},nn=function(t,e,n,i){try{return i?e(S(n)[0],n[1]):e(n)}catch(e){var r=t.return;throw void 0!==r&&S(r.call(t)),e}},rn=Mt("iterator"),an=Array.prototype,on=function(t){return void 0!==t&&(Tt.Array===t||an[rn]===t)},sn=Mt("iterator"),ln=E.getIteratorMethod=function(t){if(void 0!=t)return t[sn]||t["@@iterator"]||Tt[tn(t)]},un=n(function(t){var e={},n={},i=t.exports=function(t,i,r,a,o){var s,l,u,h,c=o?function(){return t}:ln(t),f=P(r,a,i?2:1),d=0;if("function"!=typeof c)throw TypeError(t+" is not iterable!");if(on(c)){for(s=J(t.length);s>d;d++)if((h=i?f(S(l=t[d])[0],l[1]):f(t[d]))===e||h===n)return h}else for(u=c.call(t);!(l=u.next()).done;)if((h=nn(u,f,l.value,i))===e||h===n)return h};i.BREAK=e,i.RETURN=n}),hn=Mt("species"),cn=function(t,e){var n,i=S(t).constructor;return void 0===i||void 0==(n=S(i)[hn])?e:T(n)},fn=function(t,e,n){var i=void 0===n;switch(e.length){case 0:return i?t():t.call(n);case 1:return i?t(e[0]):t.call(n,e[0]);case 2:return i?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return i?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return i?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)},dn=x.process,pn=x.setImmediate,mn=x.clearImmediate,gn=x.MessageChannel,yn=x.Dispatch,vn=0,bn={},wn=function(){var t=+this;if(bn.hasOwnProperty(t)){var e=bn[t];delete bn[t],e()}},xn=function(t){wn.call(t.data)};pn&&mn||(pn=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return bn[++vn]=function(){fn("function"==typeof t?t:Function(t),e)},Ye(vn),vn},mn=function(t){delete bn[t]},"process"==X(dn)?Ye=function(t){dn.nextTick(P(wn,t,1))}:yn&&yn.now?Ye=function(t){yn.now(P(wn,t,1))}:gn?($e=(qe=new gn).port2,qe.port1.onmessage=xn,Ye=P($e.postMessage,$e,1)):x.addEventListener&&"function"==typeof postMessage&&!x.importScripts?(Ye=function(t){x.postMessage(t+"","*")},x.addEventListener("message",xn,!1)):Ye="onreadystatechange"in M("script")?function(t){St.appendChild(M("script")).onreadystatechange=function(){St.removeChild(this),wn.call(t)}}:function(t){setTimeout(P(wn,t,1),0)});var En={set:pn,clear:mn},Tn=En.set,Pn=x.MutationObserver||x.WebKitMutationObserver,Cn=x.process,Sn=x.Promise,On="process"==X(Cn),In={f:function(t){return new r(t)}},kn=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}},Rn=function(t,e){if(S(t),C(e)&&e.constructor===t)return e;var n=In.f(t);return(0,n.resolve)(e),n.promise},Mn=Mt("species"),Nn=Mt("iterator"),An=!1;try{[7][Nn]().return=function(){An=!0}}catch(t){}var Bn,_n,Ln,Vn,Dn=En.set,Fn=function(){var t,e,n,i=function(){var i,r;for(On&&(i=Cn.domain)&&i.exit();t;){r=t.fn,t=t.next;try{r()}catch(i){throw t?n():e=void 0,i}}e=void 0,i&&i.enter()};if(On)n=function(){Cn.nextTick(i)};else if(Pn){var r=!0,a=document.createTextNode("");new Pn(i).observe(a,{characterData:!0}),n=function(){a.data=r=!r}}else if(Sn&&Sn.resolve){var o=Sn.resolve();n=function(){o.then(i)}}else n=function(){Tn.call(x,i)};return function(i){var r={fn:i,next:void 0};e&&(e.next=r),t||(t=r,n()),e=r}}(),Un=x.TypeError,Gn=x.process,Wn=x.Promise,Xn="process"==tn(Gn),Hn=function(){},jn=_n=In.f,zn=!!function(){try{var t=Wn.resolve(1),e=(t.constructor={})[Mt("species")]=function(t){t(Hn,Hn)};return(Xn||"function"==typeof PromiseRejectionEvent)&&t.then(Hn)instanceof e}catch(t){}}(),Yn=function(t){var e;return!(!C(t)||"function"!=typeof(e=t.then))&&e},qn=function(t,e){if(!t._n){t._n=!0;var n=t._c;Fn(function(){for(var i=t._v,r=1==t._s,a=0;n.length>a;)!function(e){var n,a,o=r?e.ok:e.fail,s=e.resolve,l=e.reject,u=e.domain;try{o?(r||(2==t._h&&Zn(t),t._h=1),!0===o?n=i:(u&&u.enter(),n=o(i),u&&u.exit()),n===e.promise?l(Un("Promise-chain cycle")):(a=Yn(n))?a.call(n,s,l):s(n)):l(i)}catch(t){l(t)}}(n[a++]);t._c=[],t._n=!1,e&&!t._h&&$n(t)})}},$n=function(t){Dn.call(x,function(){var e,n,i,r=t._v,a=Kn(t);if(a&&(e=kn(function(){Xn?Gn.emit("unhandledRejection",r,t):(n=x.onunhandledrejection)?n({promise:t,reason:r}):(i=x.console)&&i.error&&i.error("Unhandled promise rejection",r)}),t._h=Xn||Kn(t)?2:1),t._a=void 0,a&&e.e)throw e.v})},Kn=function(t){if(1==t._h)return!1;for(var e,n=t._a||t._c,i=0;n.length>i;)if((e=n[i++]).fail||!Kn(e.promise))return!1;return!0},Zn=function(t){Dn.call(x,function(){var e;Xn?Gn.emit("rejectionHandled",t):(e=x.onrejectionhandled)&&e({promise:t,reason:t._v})})},Jn=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),qn(e,!0))},Qn=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw Un("Promise can't be resolved itself");(e=Yn(t))?Fn(function(){var i={_w:n,_d:!1};try{e.call(t,P(Qn,i,1),P(Jn,i,1))}catch(t){Jn.call(i,t)}}):(n._v=t,n._s=1,qn(n,!1))}catch(t){Jn.call({_w:n,_d:!1},t)}}};zn||(Wn=function(t){en(this,Wn,"Promise","_h"),T(t),Bn.call(this);try{t(P(Qn,this,1),P(Jn,this,1))}catch(t){Jn.call(this,t)}},(Bn=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=function(t,e,n){for(var i in e)n&&t[i]?t[i]=e[i]:V(t,i,e[i]);return t}(Wn.prototype,{then:function(t,e){var n=jn(cn(this,Wn));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=Xn?Gn.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&qn(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),Ln=function(){var t=new Bn;this.promise=t,this.resolve=P(Qn,t,1),this.reject=P(Jn,t,1)},In.f=jn=function(t){return t===Wn||t===Vn?new Ln(t):_n(t)}),F(F.G+F.W+F.F*!zn,{Promise:Wn}),Bt(Wn,"Promise"),function(t){var e="function"==typeof E[t]?E[t]:x[t];I&&e&&!e[Mn]&&_.f(e,Mn,{configurable:!0,get:function(){return this}})}("Promise"),Vn=E.Promise,F(F.S+F.F*!zn,"Promise",{reject:function(t){var e=jn(this);return(0,e.reject)(t),e.promise}}),F(F.S+!0*F.F,"Promise",{resolve:function(t){return Rn(this===Vn?Wn:this,t)}}),F(F.S+F.F*!(zn&&function(t,e){if(!e&&!An)return!1;var n=!1;try{var i=[7],r=i[Nn]();r.next=function(){return{done:n=!0}},i[Nn]=function(){return r},t(i)}catch(t){}return n}(function(t){Wn.all(t).catch(Hn)})),"Promise",{all:function(t){var e=this,n=jn(e),i=n.resolve,r=n.reject,a=kn(function(){var n=[],a=0,o=1;un(t,!1,function(t){var s=a++,l=!1;n.push(void 0),o++,e.resolve(t).then(function(t){l||(l=!0,n[s]=t,--o||i(n))},r)}),--o||i(n)});return a.e&&r(a.v),n.promise},race:function(t){var e=this,n=jn(e),i=n.reject,r=kn(function(){un(t,!1,function(t){e.resolve(t).then(n.resolve,i)})});return r.e&&i(r.v),n.promise}}),F(F.P+F.R,"Promise",{finally:function(t){var e=cn(this,E.Promise||x.Promise),n="function"==typeof t;return this.then(n?function(n){return Rn(e,t()).then(function(){return n})}:t,n?function(n){return Rn(e,t()).then(function(){throw n})}:t)}}),F(F.S,"Promise",{try:function(t){var e=In.f(this),n=kn(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}});var ti=E.Promise,ei=e(n(function(t){t.exports={default:ti,__esModule:!0}})),ni=e(n(function(t,e){e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}}));F(F.S+F.F*!I,"Object",{defineProperty:_.f});var ii=E.Object,ri=function(t,e,n){return ii.defineProperty(t,e,n)},ai=n(function(t){t.exports={default:ri,__esModule:!0}});e(ai);var oi=e(n(function(t,e){e.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(ai);e.default=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,n.default)(t,r.key,r)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}()})),si={VECTOR:0,BEZIER_CURVE:1,CIRCLE:2},li=Mt("iterator"),ui=E.isIterable=function(t){var e=Object(t);return void 0!==e[li]||"@@iterator"in e||Tt.hasOwnProperty(tn(e))},hi=n(function(t){t.exports={default:ui,__esModule:!0}});e(hi);var ci=E.getIterator=function(t){var e=ln(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return S(e.call(t))},fi=n(function(t){t.exports={default:ci,__esModule:!0}});e(fi);var di=e(n(function(t,e){function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(hi),r=n(fi);e.default=function(){function t(t,e){var n=[],i=!0,a=!1,o=void 0;try{for(var s,l=(0,r.default)(t);!(i=(s=l.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){a=!0,o=t}finally{try{!i&&l.return&&l.return()}finally{if(a)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if((0,i.default)(Object(e)))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()})),pi=/^#([a-f0-9]{3})$/i,mi=function(t){var e=t.match(pi);return!!e&&[parseInt(e[1][0]+e[1][0],16),parseInt(e[1][1]+e[1][1],16),parseInt(e[1][2]+e[1][2],16),null]},gi=/^#([a-f0-9]{6})$/i,yi=function(t){var e=t.match(gi);return!!e&&[parseInt(e[1].substring(0,2),16),parseInt(e[1].substring(2,4),16),parseInt(e[1].substring(4,6),16),null]},vi=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/,bi=function(t){var e=t.match(vi);return!!e&&[Number(e[1]),Number(e[2]),Number(e[3]),null]},wi=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d?\.?\d+)\s*\)$/,xi=function(t){var e=t.match(wi);return!!(e&&e.length>4)&&[Number(e[1]),Number(e[2]),Number(e[3]),Number(e[4])]},Ei=function(t){return[Math.min(t[0],255),Math.min(t[1],255),Math.min(t[2],255),t.length>3?t[3]:null]},Ti=function(t){var e=Ci[t.toLowerCase()];return e||!1},Pi=function(){function t(e){ni(this,t);var n=Array.isArray(e)?Ei(e):mi(e)||bi(e)||xi(e)||Ti(e)||yi(e)||[0,0,0,null],i=di(n,4),r=i[0],a=i[1],o=i[2],s=i[3];this.r=r,this.g=a,this.b=o,this.a=s}return oi(t,[{key:"isTransparent",value:function(){return 0===this.a}},{key:"toString",value:function(){return null!==this.a&&1!==this.a?"rgba("+this.r+","+this.g+","+this.b+","+this.a+")":"rgb("+this.r+","+this.g+","+this.b+")"}}]),t}(),Ci={transparent:[0,0,0,0],aliceblue:[240,248,255,null],antiquewhite:[250,235,215,null],aqua:[0,255,255,null],aquamarine:[127,255,212,null],azure:[240,255,255,null],beige:[245,245,220,null],bisque:[255,228,196,null],black:[0,0,0,null],blanchedalmond:[255,235,205,null],blue:[0,0,255,null],blueviolet:[138,43,226,null],brown:[165,42,42,null],burlywood:[222,184,135,null],cadetblue:[95,158,160,null],chartreuse:[127,255,0,null],chocolate:[210,105,30,null],coral:[255,127,80,null],cornflowerblue:[100,149,237,null],cornsilk:[255,248,220,null],crimson:[220,20,60,null],cyan:[0,255,255,null],darkblue:[0,0,139,null],darkcyan:[0,139,139,null],darkgoldenrod:[184,134,11,null],darkgray:[169,169,169,null],darkgreen:[0,100,0,null],darkgrey:[169,169,169,null],darkkhaki:[189,183,107,null],darkmagenta:[139,0,139,null],darkolivegreen:[85,107,47,null],darkorange:[255,140,0,null],darkorchid:[153,50,204,null],darkred:[139,0,0,null],darksalmon:[233,150,122,null],darkseagreen:[143,188,143,null],darkslateblue:[72,61,139,null],darkslategray:[47,79,79,null],darkslategrey:[47,79,79,null],darkturquoise:[0,206,209,null],darkviolet:[148,0,211,null],deeppink:[255,20,147,null],deepskyblue:[0,191,255,null],dimgray:[105,105,105,null],dimgrey:[105,105,105,null],dodgerblue:[30,144,255,null],firebrick:[178,34,34,null],floralwhite:[255,250,240,null],forestgreen:[34,139,34,null],fuchsia:[255,0,255,null],gainsboro:[220,220,220,null],ghostwhite:[248,248,255,null],gold:[255,215,0,null],goldenrod:[218,165,32,null],gray:[128,128,128,null],green:[0,128,0,null],greenyellow:[173,255,47,null],grey:[128,128,128,null],honeydew:[240,255,240,null],hotpink:[255,105,180,null],indianred:[205,92,92,null],indigo:[75,0,130,null],ivory:[255,255,240,null],khaki:[240,230,140,null],lavender:[230,230,250,null],lavenderblush:[255,240,245,null],lawngreen:[124,252,0,null],lemonchiffon:[255,250,205,null],lightblue:[173,216,230,null],lightcoral:[240,128,128,null],lightcyan:[224,255,255,null],lightgoldenrodyellow:[250,250,210,null],lightgray:[211,211,211,null],lightgreen:[144,238,144,null],lightgrey:[211,211,211,null],lightpink:[255,182,193,null],lightsalmon:[255,160,122,null],lightseagreen:[32,178,170,null],lightskyblue:[135,206,250,null],lightslategray:[119,136,153,null],lightslategrey:[119,136,153,null],lightsteelblue:[176,196,222,null],lightyellow:[255,255,224,null],lime:[0,255,0,null],limegreen:[50,205,50,null],linen:[250,240,230,null],magenta:[255,0,255,null],maroon:[128,0,0,null],mediumaquamarine:[102,205,170,null],mediumblue:[0,0,205,null],mediumorchid:[186,85,211,null],mediumpurple:[147,112,219,null],mediumseagreen:[60,179,113,null],mediumslateblue:[123,104,238,null],mediumspringgreen:[0,250,154,null],mediumturquoise:[72,209,204,null],mediumvioletred:[199,21,133,null],midnightblue:[25,25,112,null],mintcream:[245,255,250,null],mistyrose:[255,228,225,null],moccasin:[255,228,181,null],navajowhite:[255,222,173,null],navy:[0,0,128,null],oldlace:[253,245,230,null],olive:[128,128,0,null],olivedrab:[107,142,35,null],orange:[255,165,0,null],orangered:[255,69,0,null],orchid:[218,112,214,null],palegoldenrod:[238,232,170,null],palegreen:[152,251,152,null],paleturquoise:[175,238,238,null],palevioletred:[219,112,147,null],papayawhip:[255,239,213,null],peachpuff:[255,218,185,null],peru:[205,133,63,null],pink:[255,192,203,null],plum:[221,160,221,null],powderblue:[176,224,230,null],purple:[128,0,128,null],rebeccapurple:[102,51,153,null],red:[255,0,0,null],rosybrown:[188,143,143,null],royalblue:[65,105,225,null],saddlebrown:[139,69,19,null],salmon:[250,128,114,null],sandybrown:[244,164,96,null],seagreen:[46,139,87,null],seashell:[255,245,238,null],sienna:[160,82,45,null],silver:[192,192,192,null],skyblue:[135,206,235,null],slateblue:[106,90,205,null],slategray:[112,128,144,null],slategrey:[112,128,144,null],snow:[255,250,250,null],springgreen:[0,255,127,null],steelblue:[70,130,180,null],tan:[210,180,140,null],teal:[0,128,128,null],thistle:[216,191,216,null],tomato:[255,99,71,null],turquoise:[64,224,208,null],violet:[238,130,238,null],wheat:[245,222,179,null],white:[255,255,255,null],whitesmoke:[245,245,245,null],yellow:[255,255,0,null],yellowgreen:[154,205,50,null]},Si=new Pi([0,0,0,0]),Oi={SOLID:0,DOUBLE:1,DOTTED:2,DASHED:3,WAVY:4},Ii={NONE:null},ki={UNDERLINE:1,OVERLINE:2,LINE_THROUGH:3,BLINK:4},Ri=function(t){switch(t){case"underline":return ki.UNDERLINE;case"overline":return ki.OVERLINE;case"line-through":return ki.LINE_THROUGH}return ki.BLINK},Mi=function(t){return"none"===t?null:t.split(" ").map(Ri)},Ni=function(t){switch(t){case"double":return Oi.DOUBLE;case"dotted":return Oi.DOTTED;case"dashed":return Oi.DASHED;case"wavy":return Oi.WAVY}return Oi.SOLID},Ai=function(t){var e=Mi(t.textDecorationLine?t.textDecorationLine:t.textDecoration);return null===e?Ii.NONE:{textDecorationLine:e,textDecorationColor:t.textDecorationColor?new Pi(t.textDecorationColor):null,textDecorationStyle:Ni(t.textDecorationStyle)}},Bi=function(){function t(e){ni(this,t),this.canvas=e||document.createElement("canvas")}return oi(t,[{key:"render",value:function(t){this.ctx=this.canvas.getContext("2d"),this.options=t,this.canvas.width=Math.floor(t.width*t.scale),this.canvas.height=Math.floor(t.height*t.scale),this.canvas.style.width=t.width+"px",this.canvas.style.height=t.height+"px",this.ctx.scale(this.options.scale,this.options.scale),this.ctx.textBaseline="bottom",t.logger.log("Canvas renderer initialized with scale "+this.options.scale)}},{key:"clip",value:function(t,e){var n=this;t.length&&(this.ctx.save(),t.forEach(function(t){n.path(t),n.ctx.clip()})),e(),t.length&&this.ctx.restore()}},{key:"drawImage",value:function(t,e,n){this.ctx.drawImage(t,e.left,e.top,e.width,e.height,n.left,n.top,n.width,n.height)}},{key:"drawShape",value:function(t,e){this.path(t),this.ctx.fillStyle=e.toString(),this.ctx.fill()}},{key:"fill",value:function(t){this.ctx.fillStyle=t.toString(),this.ctx.fill()}},{key:"getTarget",value:function(){return ei.resolve(this.canvas)}},{key:"path",value:function(t){var e=this;this.ctx.beginPath(),Array.isArray(t)?t.forEach(function(t,n){var i=t.type===si.VECTOR?t:t.start;0===n?e.ctx.moveTo(i.x,i.y):e.ctx.lineTo(i.x,i.y),t.type===si.BEZIER_CURVE&&e.ctx.bezierCurveTo(t.startControl.x,t.startControl.y,t.endControl.x,t.endControl.y,t.end.x,t.end.y)}):this.ctx.arc(t.x+t.radius,t.y+t.radius,t.radius,0,2*Math.PI,!0),this.ctx.closePath()}},{key:"rectangle",value:function(t,e,n,i,r){this.ctx.fillStyle=r.toString(),this.ctx.fillRect(t,e,n,i)}},{key:"renderLinearGradient",value:function(t,e){var n=this.ctx.createLinearGradient(t.left+e.direction.x1,t.top+e.direction.y1,t.left+e.direction.x0,t.top+e.direction.y0);e.colorStops.forEach(function(t){n.addColorStop(t.stop,t.color.toString())}),this.ctx.fillStyle=n,this.ctx.fillRect(t.left,t.top,t.width,t.height)}},{key:"renderRepeat",value:function(t,e,n,i,r){this.path(t),this.ctx.fillStyle=this.ctx.createPattern(this.resizeImage(e,n),"repeat"),this.ctx.translate(i,r),this.ctx.fill(),this.ctx.translate(-i,-r)}},{key:"renderTextNode",value:function(t,e,n,i,r){var a=this;this.ctx.font=[n.fontStyle,n.fontVariant,n.fontWeight,n.fontSize,n.fontFamily].join(" ").split(",")[0],t.forEach(function(t){if(a.ctx.fillStyle=e.toString(),r&&t.text.trim().length?r.slice(0).reverse().forEach(function(e){a.ctx.shadowColor=e.color.toString(),a.ctx.shadowOffsetX=e.offsetX*a.options.scale,a.ctx.shadowOffsetY=e.offsetY*a.options.scale,a.ctx.shadowBlur=e.blur,a.ctx.fillText(t.text,t.bounds.left,t.bounds.top+t.bounds.height)}):a.ctx.fillText(t.text,t.bounds.left,t.bounds.top+t.bounds.height),null!==i){var o=i.textDecorationColor||e;i.textDecorationLine.forEach(function(e){switch(e){case ki.UNDERLINE:var i=a.options.fontMetrics.getMetrics(n).baseline;a.rectangle(t.bounds.left,Math.round(t.bounds.top+i),t.bounds.width,1,o);break;case ki.OVERLINE:a.rectangle(t.bounds.left,Math.round(t.bounds.top),t.bounds.width,1,o);break;case ki.LINE_THROUGH:var r=a.options.fontMetrics.getMetrics(n).middle;a.rectangle(t.bounds.left,Math.ceil(t.bounds.top+r),t.bounds.width,1,o)}})}})}},{key:"resizeImage",value:function(t,e){if(t.width===e.width&&t.height===e.height)return t;var n=this.canvas.ownerDocument.createElement("canvas");return n.width=e.width,n.height=e.height,n.getContext("2d").drawImage(t,0,0,t.width,t.height,0,0,e.width,e.height),n}},{key:"setOpacity",value:function(t){this.ctx.globalAlpha=t}},{key:"transform",value:function(t,e,n,i){this.ctx.save(),this.ctx.translate(t,e),this.ctx.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this.ctx.translate(-t,-e),i(),this.ctx.restore()}}]),t}(),_i=function(){function t(e,n){ni(this,t),this.start=n||Date.now(),this.id=e}return oi(t,[{key:"child",value:function(e){return new t(e,this.start)}},{key:"log",value:function(){if(window.console&&window.console.log){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];Function.prototype.bind.call(window.console.log,window.console).apply(window.console,[Date.now()-this.start+"ms",this.id?"html2canvas ("+this.id+"):":"html2canvas:"].concat([].slice.call(e,0)))}}},{key:"error",value:function(){if(window.console&&window.console.error){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];Function.prototype.bind.call(window.console.error,window.console).apply(window.console,[Date.now()-this.start+"ms",this.id?"html2canvas ("+this.id+"):":"html2canvas:"].concat([].slice.call(e,0)))}}}]),t}(),Li=function(t,e){return 0!=(t&e)},Vi=function(t,e){for(var n=t.length-1;n>=0;n--){var i=t.item(n);"content"!==i&&e.style.setProperty(i,t.getPropertyValue(i))}return e},Di={PX:0,PERCENTAGE:1},Fi=function(){function t(e){ni(this,t),this.type="%"===e.substr(e.length-1)?Di.PERCENTAGE:Di.PX;var n=parseFloat(e);this.value=isNaN(n)?0:n}return oi(t,[{key:"isPercentage",value:function(){return this.type===Di.PERCENTAGE}},{key:"getAbsoluteValue",value:function(t){return this.isPercentage()?t*(this.value/100):this.value}}],[{key:"create",value:function(e){return new t(e)}}]),t}(),Ui=function t(e,n){ni(this,t),this.width=e,this.height=n},Gi=function t(e,n){ni(this,t),this.type=si.VECTOR,this.x=e,this.y=n},Wi=function(t,e,n){return new Gi(t.x+(e.x-t.x)*n,t.y+(e.y-t.y)*n)},Xi=function(){function t(e,n,i,r){ni(this,t),this.type=si.BEZIER_CURVE,this.start=e,this.startControl=n,this.endControl=i,this.end=r}return oi(t,[{key:"subdivide",value:function(e,n){var i=Wi(this.start,this.startControl,e),r=Wi(this.startControl,this.endControl,e),a=Wi(this.endControl,this.end,e),o=Wi(i,r,e),s=Wi(r,a,e),l=Wi(o,s,e);return n?new t(this.start,i,o,l):new t(l,s,a,this.end)}},{key:"reverse",value:function(){return new t(this.end,this.endControl,this.startControl,this.start)}}]),t}(),Hi=function(){function t(e,n,i,r){ni(this,t),this.left=e,this.top=n,this.width=i,this.height=r}return oi(t,null,[{key:"fromClientRect",value:function(e){return new t(e.left,e.top,e.width,e.height)}}]),t}(),ji=function(t){return Hi.fromClientRect(t.getBoundingClientRect())},zi=function(t,e){return new Hi(t.left+e[3].borderWidth,t.top+e[0].borderWidth,t.width-(e[1].borderWidth+e[3].borderWidth),t.height-(e[0].borderWidth+e[2].borderWidth))},Yi=function(t,e,n){var i=e[0].value,r=e[1].value,a=e[2].value,o=e[3].value;return new Hi(t.left+o+n[3].borderWidth,t.top+i+n[0].borderWidth,t.width-(n[1].borderWidth+n[3].borderWidth+o+r),t.height-(n[0].borderWidth+n[2].borderWidth+i+a))},qi=function(t){var e=t.body,n=t.documentElement;if(!e||!n)throw new Error("");var i=Math.max(Math.max(e.scrollWidth,n.scrollWidth),Math.max(e.offsetWidth,n.offsetWidth),Math.max(e.clientWidth,n.clientWidth)),r=Math.max(Math.max(e.scrollHeight,n.scrollHeight),Math.max(e.offsetHeight,n.offsetHeight),Math.max(e.clientHeight,n.clientHeight));return new Hi(0,0,i,r)},$i=function(t,e){switch(e){case 0:return Ki(t.topLeftOuter,t.topLeftInner,t.topRightOuter,t.topRightInner);case 1:return Ki(t.topRightOuter,t.topRightInner,t.bottomRightOuter,t.bottomRightInner);case 2:return Ki(t.bottomRightOuter,t.bottomRightInner,t.bottomLeftOuter,t.bottomLeftInner);case 3:default:return Ki(t.bottomLeftOuter,t.bottomLeftInner,t.topLeftOuter,t.topLeftInner)}},Ki=function(t,e,n,i){var r=[];return t instanceof Xi?r.push(t.subdivide(.5,!1)):r.push(t),n instanceof Xi?r.push(n.subdivide(.5,!0)):r.push(n),i instanceof Xi?r.push(i.subdivide(.5,!0).reverse()):r.push(i),e instanceof Xi?r.push(e.subdivide(.5,!1).reverse()):r.push(e),r},Zi=function(t){return[t.topLeftOuter,t.topRightOuter,t.bottomRightOuter,t.bottomLeftOuter]},Ji=function(t){return[t.topLeftInner,t.topRightInner,t.bottomRightInner,t.bottomLeftInner]},Qi=function(t,e,n){var i=t.width/2,r=t.height/2,a=n[tr.TOP_LEFT][0].getAbsoluteValue(t.width)<i?n[tr.TOP_LEFT][0].getAbsoluteValue(t.width):i,o=n[tr.TOP_LEFT][1].getAbsoluteValue(t.height)<r?n[tr.TOP_LEFT][1].getAbsoluteValue(t.height):r,s=n[tr.TOP_RIGHT][0].getAbsoluteValue(t.width)<i?n[tr.TOP_RIGHT][0].getAbsoluteValue(t.width):i,l=n[tr.TOP_RIGHT][1].getAbsoluteValue(t.height)<r?n[tr.TOP_RIGHT][1].getAbsoluteValue(t.height):r,u=n[tr.BOTTOM_RIGHT][0].getAbsoluteValue(t.width)<i?n[tr.BOTTOM_RIGHT][0].getAbsoluteValue(t.width):i,h=n[tr.BOTTOM_RIGHT][1].getAbsoluteValue(t.height)<r?n[tr.BOTTOM_RIGHT][1].getAbsoluteValue(t.height):r,c=n[tr.BOTTOM_LEFT][0].getAbsoluteValue(t.width)<i?n[tr.BOTTOM_LEFT][0].getAbsoluteValue(t.width):i,f=n[tr.BOTTOM_LEFT][1].getAbsoluteValue(t.height)<r?n[tr.BOTTOM_LEFT][1].getAbsoluteValue(t.height):r,d=t.width-s,p=t.height-h,m=t.width-u,g=t.height-f;return{topLeftOuter:a>0||o>0?er(t.left,t.top,a,o,tr.TOP_LEFT):new Gi(t.left,t.top),topLeftInner:a>0||o>0?er(t.left+e[3].borderWidth,t.top+e[0].borderWidth,Math.max(0,a-e[3].borderWidth),Math.max(0,o-e[0].borderWidth),tr.TOP_LEFT):new Gi(t.left+e[3].borderWidth,t.top+e[0].borderWidth),topRightOuter:s>0||l>0?er(t.left+d,t.top,s,l,tr.TOP_RIGHT):new Gi(t.left+t.width,t.top),topRightInner:s>0||l>0?er(t.left+Math.min(d,t.width+e[3].borderWidth),t.top+e[0].borderWidth,d>t.width+e[3].borderWidth?0:s-e[3].borderWidth,l-e[0].borderWidth,tr.TOP_RIGHT):new Gi(t.left+t.width-e[1].borderWidth,t.top+e[0].borderWidth),bottomRightOuter:u>0||h>0?er(t.left+m,t.top+p,u,h,tr.BOTTOM_RIGHT):new Gi(t.left+t.width,t.top+t.height),bottomRightInner:u>0||h>0?er(t.left+Math.min(m,t.width-e[3].borderWidth),t.top+Math.min(p,t.height+e[0].borderWidth),Math.max(0,u-e[1].borderWidth),h-e[2].borderWidth,tr.BOTTOM_RIGHT):new Gi(t.left+t.width-e[1].borderWidth,t.top+t.height-e[2].borderWidth),bottomLeftOuter:c>0||f>0?er(t.left,t.top+g,c,f,tr.BOTTOM_LEFT):new Gi(t.left,t.top+t.height),bottomLeftInner:c>0||f>0?er(t.left+e[3].borderWidth,t.top+g,Math.max(0,c-e[3].borderWidth),f-e[2].borderWidth,tr.BOTTOM_LEFT):new Gi(t.left+e[3].borderWidth,t.top+t.height-e[2].borderWidth)}},tr={TOP_LEFT:0,TOP_RIGHT:1,BOTTOM_RIGHT:2,BOTTOM_LEFT:3},er=function(t,e,n,i,r){var a=(Math.sqrt(2)-1)/3*4,o=n*a,s=i*a,l=t+n,u=e+i;switch(r){case tr.TOP_LEFT:return new Xi(new Gi(t,u),new Gi(t,u-s),new Gi(l-o,e),new Gi(l,e));case tr.TOP_RIGHT:return new Xi(new Gi(t,e),new Gi(t+o,e),new Gi(l,u-s),new Gi(l,u));case tr.BOTTOM_RIGHT:return new Xi(new Gi(l,e),new Gi(l,e+s),new Gi(t+o,u),new Gi(t,u));case tr.BOTTOM_LEFT:default:return new Xi(new Gi(l,u),new Gi(l-o,u),new Gi(t,e+s),new Gi(t,e))}},nr={REPEAT:0,NO_REPEAT:1,REPEAT_X:2,REPEAT_Y:3},ir={AUTO:0,CONTAIN:1,COVER:2,LENGTH:3},rr={BORDER_BOX:0,PADDING_BOX:1,CONTENT_BOX:2},ar=rr,or=function t(e){switch(ni(this,t),e){case"contain":this.size=ir.CONTAIN;break;case"cover":this.size=ir.COVER;break;case"auto":this.size=ir.AUTO;break;default:this.value=new Fi(e)}},sr=function(t,e,n){var i=0,r=0,a=t.size;if(a[0].size===ir.CONTAIN||a[0].size===ir.COVER){var o=n.width/n.height,s=e.width/e.height;return o<s!=(a[0].size===ir.COVER)?new Ui(n.width,n.width/s):new Ui(n.height*s,n.height)}return a[0].value&&(i=a[0].value.getAbsoluteValue(n.width)),a[0].size===ir.AUTO&&a[1].size===ir.AUTO?r=e.height:a[1].size===ir.AUTO?r=i/e.width*e.height:a[1].value&&(r=a[1].value.getAbsoluteValue(n.height)),a[0].size===ir.AUTO&&(i=r/e.height*e.width),new Ui(i,r)},lr=new or("auto"),ur=function(t,e){switch(e){case rr.BORDER_BOX:return Zi(t);case rr.PADDING_BOX:default:return Ji(t)}},hr=function(t,e,n){return new Gi(t[0].getAbsoluteValue(n.width-e.width),t[1].getAbsoluteValue(n.height-e.height))},cr=function(t,e,n,i,r){switch(t.repeat){case nr.REPEAT_X:return[new Gi(Math.round(r.left),Math.round(i.top+e.y)),new Gi(Math.round(r.left+r.width),Math.round(i.top+e.y)),new Gi(Math.round(r.left+r.width),Math.round(n.height+i.top+e.y)),new Gi(Math.round(r.left),Math.round(n.height+i.top+e.y))];case nr.REPEAT_Y:return[new Gi(Math.round(i.left+e.x),Math.round(r.top)),new Gi(Math.round(i.left+e.x+n.width),Math.round(r.top)),new Gi(Math.round(i.left+e.x+n.width),Math.round(r.height+r.top)),new Gi(Math.round(i.left+e.x),Math.round(r.height+r.top))];case nr.NO_REPEAT:return[new Gi(Math.round(i.left+e.x),Math.round(i.top+e.y)),new Gi(Math.round(i.left+e.x+n.width),Math.round(i.top+e.y)),new Gi(Math.round(i.left+e.x+n.width),Math.round(i.top+e.y+n.height)),new Gi(Math.round(i.left+e.x),Math.round(i.top+e.y+n.height))];default:return[new Gi(Math.round(r.left),Math.round(r.top)),new Gi(Math.round(r.left+r.width),Math.round(r.top)),new Gi(Math.round(r.left+r.width),Math.round(r.height+r.top)),new Gi(Math.round(r.left),Math.round(r.height+r.top))]}},fr=function(t,e){return{backgroundColor:new Pi(t.backgroundColor),backgroundImage:gr(t,e),backgroundClip:dr(t.backgroundClip),backgroundOrigin:pr(t.backgroundOrigin)}},dr=function(t){switch(t){case"padding-box":return rr.PADDING_BOX;case"content-box":return rr.CONTENT_BOX}return rr.BORDER_BOX},pr=function(t){switch(t){case"padding-box":return ar.PADDING_BOX;case"content-box":return ar.CONTENT_BOX}return ar.BORDER_BOX},mr=function(t){switch(t.trim()){case"no-repeat":return nr.NO_REPEAT;case"repeat-x":case"repeat no-repeat":return nr.REPEAT_X;case"repeat-y":case"no-repeat repeat":return nr.REPEAT_Y;case"repeat":return nr.REPEAT}return nr.REPEAT},gr=function(t,e){var n=br(t.backgroundImage).map(function(t){if("url"===t.method){var n=e.loadImage(t.args[0]);t.args=n?[n]:[]}return t}),i=t.backgroundPosition.split(","),r=t.backgroundRepeat.split(","),a=t.backgroundSize.split(",");return n.map(function(t,e){var n=(a[e]||"auto").trim().split(" ").map(yr),o=(i[e]||"auto").trim().split(" ").map(vr);return{source:t,repeat:mr("string"==typeof r[e]?r[e]:r[0]),size:n.length<2?[n[0],lr]:[n[0],n[1]],position:o.length<2?[o[0],o[0]]:[o[0],o[1]]}})},yr=function(t){return"auto"===t?lr:new or(t)},vr=function(t){switch(t){case"bottom":case"right":return new Fi("100%");case"left":case"top":return new Fi("0%");case"auto":return new Fi("0")}return new Fi(t)},br=function(t){var e=/^\s$/,n=[],i=[],r="",a=null,o="",s=0,l=0,u=function(){var t="";if(r){'"'===o.substr(0,1)&&(o=o.substr(1,o.length-2)),o&&i.push(o.trim());var e=r.indexOf("-",1)+1;"-"===r.substr(0,1)&&e>0&&(t=r.substr(0,e).toLowerCase(),r=r.substr(e)),"none"!==(r=r.toLowerCase())&&n.push({prefix:t,method:r,args:i})}i=[],r=o=""};return t.split("").forEach(function(t){if(0!==s||!e.test(t)){switch(t){case'"':a?a===t&&(a=null):a=t;break;case"(":if(a)break;if(0===s)return void(s=1);l++;break;case")":if(a)break;if(1===s){if(0===l)return s=0,void u();l--}break;case",":if(a)break;if(0===s)return void u();if(1===s&&0===l&&!r.match(/^url$/i))return i.push(o.trim()),void(o="")}0===s?r+=t:o+=t}}),u(),n};!function(t,e){var n=(E.Object||{})[t]||Object[t],i={};i[t]=e(n),F(F.S+F.F*O(function(){n(1)}),"Object",i)}("keys",function(){return function(t){return dt(gt(t))}});var wr=E.Object.keys,xr=e(n(function(t){t.exports={default:wr,__esModule:!0}})),Er={NONE:0,SOLID:1},Tr=xr({TOP:0,RIGHT:1,BOTTOM:2,LEFT:3}).map(function(t){return t.toLowerCase()}),Pr=function(t){switch(t){case"none":return Er.NONE}return Er.SOLID},Cr=function(t){return Tr.map(function(e){var n=new Pi(t.getPropertyValue("border-"+e+"-color")),i=Pr(t.getPropertyValue("border-"+e+"-style")),r=parseFloat(t.getPropertyValue("border-"+e+"-width"));return{borderColor:n,borderStyle:i,borderWidth:isNaN(r)?0:r}})},Sr=["top-left","top-right","bottom-right","bottom-left"],Or=function(t){return Sr.map(function(e){var n=t.getPropertyValue("border-"+e+"-radius").split(" ").map(Fi.create),i=di(n,2),r=i[0],a=i[1];return void 0===a?[r,r]:[r,a]})},Ir={NONE:1,BLOCK:2,INLINE:4,RUN_IN:8,FLOW:16,FLOW_ROOT:32,TABLE:64,FLEX:128,GRID:256,RUBY:512,SUBGRID:1024,LIST_ITEM:2048,TABLE_ROW_GROUP:4096,TABLE_HEADER_GROUP:8192,TABLE_FOOTER_GROUP:16384,TABLE_ROW:32768,TABLE_CELL:65536,TABLE_COLUMN_GROUP:1<<17,TABLE_COLUMN:1<<18,TABLE_CAPTION:1<<19,RUBY_BASE:1<<20,RUBY_TEXT:1<<21,RUBY_BASE_CONTAINER:1<<22,RUBY_TEXT_CONTAINER:1<<23,CONTENTS:1<<24,INLINE_BLOCK:1<<25,INLINE_LIST_ITEM:1<<26,INLINE_TABLE:1<<27,INLINE_FLEX:1<<28,INLINE_GRID:1<<29},kr=function(t){switch(t){case"block":return Ir.BLOCK;case"inline":return Ir.INLINE;case"run-in":return Ir.RUN_IN;case"flow":return Ir.FLOW;case"flow-root":return Ir.FLOW_ROOT;case"table":return Ir.TABLE;case"flex":return Ir.FLEX;case"grid":return Ir.GRID;case"ruby":return Ir.RUBY;case"subgrid":return Ir.SUBGRID;case"list-item":return Ir.LIST_ITEM;case"table-row-group":return Ir.TABLE_ROW_GROUP;case"table-header-group":return Ir.TABLE_HEADER_GROUP;case"table-footer-group":return Ir.TABLE_FOOTER_GROUP;case"table-row":return Ir.TABLE_ROW;case"table-cell":return Ir.TABLE_CELL;case"table-column-group":return Ir.TABLE_COLUMN_GROUP;case"table-column":return Ir.TABLE_COLUMN;case"table-caption":return Ir.TABLE_CAPTION;case"ruby-base":return Ir.RUBY_BASE;case"ruby-text":return Ir.RUBY_TEXT;case"ruby-base-container":return Ir.RUBY_BASE_CONTAINER;case"ruby-text-container":return Ir.RUBY_TEXT_CONTAINER;case"contents":return Ir.CONTENTS;case"inline-block":return Ir.INLINE_BLOCK;case"inline-list-item":return Ir.INLINE_LIST_ITEM;case"inline-table":return Ir.INLINE_TABLE;case"inline-flex":return Ir.INLINE_FLEX;case"inline-grid":return Ir.INLINE_GRID}return Ir.NONE},Rr=function(t,e){return t|kr(e)},Mr=function(t){return t.split(" ").reduce(Rr,0)},Nr={NONE:0,LEFT:1,RIGHT:2,INLINE_START:3,INLINE_END:4},Ar=function(t){switch(t){case"left":return Nr.LEFT;case"right":return Nr.RIGHT;case"inline-start":return Nr.INLINE_START;case"inline-end":return Nr.INLINE_END}return Nr.NONE},Br=function(t){switch(t){case"normal":return 400;case"bold":return 700}var e=parseInt(t,10);return isNaN(e)?400:e},_r=function(t){return{fontFamily:t.fontFamily,fontSize:t.fontSize,fontStyle:t.fontStyle,fontVariant:t.fontVariant,fontWeight:Br(t.fontWeight)}},Lr=function(t){if("normal"===t)return 0;var e=parseInt(t,10);return isNaN(e)?0:e},Vr={VISIBLE:0,HIDDEN:1,SCROLL:2,AUTO:3},Dr=function(t){switch(t){case"hidden":return Vr.HIDDEN;case"scroll":return Vr.SCROLL;case"auto":return Vr.AUTO;case"visible":default:return Vr.VISIBLE}},Fr=["top","right","bottom","left"],Ur=function(t){return Fr.map(function(e){return new Fi(t.getPropertyValue("padding-"+e))})},Gr={STATIC:0,RELATIVE:1,ABSOLUTE:2,FIXED:3,STICKY:4},Wr=function(t){switch(t){case"relative":return Gr.RELATIVE;case"absolute":return Gr.ABSOLUTE;case"fixed":return Gr.FIXED;case"sticky":return Gr.STICKY}return Gr.STATIC},Xr=/^([+-]|\d|\.)$/i,Hr=function(t){if("none"===t||"string"!=typeof t)return null;for(var e="",n=!1,i=[],r=[],a=0,o=null,s=function(){e.length&&(n?i.push(parseFloat(e)):o=new Pi(e)),n=!1,e=""},l=function(){i.length&&null!==o&&r.push({color:o,offsetX:i[0]||0,offsetY:i[1]||0,blur:i[2]||0}),i.splice(0,i.length),o=null},u=0;u<t.length;u++){var h=t[u];switch(h){case"(":e+=h,a++;break;case")":e+=h,a--;break;case",":0===a?(s(),l()):e+=h;break;case" ":0===a?s():e+=h;break;default:0===e.length&&Xr.test(h)&&(n=!0),e+=h}}return s(),l(),0===r.length?null:r},jr={NONE:0,LOWERCASE:1,UPPERCASE:2,CAPITALIZE:3},zr=function(t){switch(t){case"uppercase":return jr.UPPERCASE;case"lowercase":return jr.LOWERCASE;case"capitalize":return jr.CAPITALIZE}return jr.NONE},Yr=function(t){return parseFloat(t.trim())},qr=/(matrix|matrix3d)\((.+)\)/,$r=function(t){var e=Zr(t.transform||t.webkitTransform||t.mozTransform||t.msTransform||t.oTransform);return null===e?null:{transform:e,transformOrigin:Kr(t.transformOrigin||t.webkitTransformOrigin||t.mozTransformOrigin||t.msTransformOrigin||t.oTransformOrigin)}},Kr=function(t){if("string"!=typeof t){var e=new Fi("0");return[e,e]}var n=t.split(" ").map(Fi.create);return[n[0],n[1]]},Zr=function(t){if("none"===t||"string"!=typeof t)return null;var e=t.match(qr);if(e){if("matrix"===e[1]){var n=e[2].split(",").map(Yr);return[n[0],n[1],n[2],n[3],n[4],n[5]]}var i=e[2].split(",").map(Yr);return[i[0],i[1],i[4],i[5],i[12],i[13]]}return null},Jr={VISIBLE:0,HIDDEN:1,COLLAPSE:2},Qr=function(t){switch(t){case"hidden":return Jr.HIDDEN;case"collapse":return Jr.COLLAPSE;case"visible":default:return Jr.VISIBLE}},ta=function(t){var e="auto"===t;return{auto:e,order:e?0:parseInt(t,10)}},ea=2147483647,na=/^xn--/,ia=/[^\0-\x7E]/,ra=/[\x2E\u3002\uFF0E\uFF61]/g,aa={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},oa=Math.floor,sa=String.fromCharCode,la=function(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:36},ua=function(t,e){return t+22+75*(t<26)-((0!=e)<<5)},ha=function(t,e,n){var i=0;for(t=n?oa(t/700):t>>1,t+=oa(t/e);t>455;i+=36)t=oa(t/35);return oa(i+36*t/(t+38))},ca=function(t){var e=[],n=t.length,i=0,r=128,o=72,s=t.lastIndexOf("-");s<0&&(s=0);for(var l=0;l<s;++l)t.charCodeAt(l)>=128&&a("not-basic"),e.push(t.charCodeAt(l));for(var u=s>0?s+1:0;u<n;){for(var h=i,c=1,f=36;;f+=36){u>=n&&a("invalid-input");var d=la(t.charCodeAt(u++));(d>=36||d>oa((ea-i)/c))&&a("overflow"),i+=d*c;var p=f<=o?1:f>=o+26?26:f-o;if(d<p)break;var m=36-p;c>oa(ea/m)&&a("overflow"),c*=m}var g=e.length+1;o=ha(i-h,g,0==h),oa(i/g)>ea-r&&a("overflow"),r+=oa(i/g),i%=g,e.splice(i++,0,r)}return String.fromCodePoint.apply(String,e)},fa=function(t){var e=[],n=(t=l(t)).length,i=128,r=0,o=72,s=!0,u=!1,h=void 0;try{for(var c,f=t[Symbol.iterator]();!(s=(c=f.next()).done);s=!0)(O=c.value)<128&&e.push(sa(O))}catch(t){u=!0,h=t}finally{try{!s&&f.return&&f.return()}finally{if(u)throw h}}var d=e.length,p=d;for(d&&e.push("-");p<n;){var m=ea,g=!0,y=!1,v=void 0;try{for(var b,w=t[Symbol.iterator]();!(g=(b=w.next()).done);g=!0)(O=b.value)>=i&&O<m&&(m=O)}catch(t){y=!0,v=t}finally{try{!g&&w.return&&w.return()}finally{if(y)throw v}}var x=p+1;m-i>oa((ea-r)/x)&&a("overflow"),r+=(m-i)*x,i=m;var E=!0,T=!1,P=void 0;try{for(var C,S=t[Symbol.iterator]();!(E=(C=S.next()).done);E=!0){var O=C.value;if(O<i&&++r>ea&&a("overflow"),O==i){for(var I=r,k=36;;k+=36){var R=k<=o?1:k>=o+26?26:k-o;if(I<R)break;var M=I-R,N=36-R;e.push(sa(ua(R+M%N,0))),I=oa(M/N)}e.push(sa(ua(I,0))),o=ha(r,x,p==d),r=0,++p}}}catch(t){T=!0,P=t}finally{try{!E&&S.return&&S.return()}finally{if(T)throw P}}++r,++i}return e.join("")},da={version:"2.1.0",ucs2:{decode:l,encode:function(t){return String.fromCodePoint.apply(String,babelHelpers.toConsumableArray(t))}},decode:ca,encode:fa,toASCII:function(t){return s(t,function(t){return ia.test(t)?"xn--"+fa(t):t})},toUnicode:function(t){return s(t,function(t){return na.test(t)?ca(t.slice(4).toLowerCase()):t})}}.ucs2,pa=function(){function t(e){ni(this,t),this.element=e}return oi(t,[{key:"render",value:function(t){var e=this;this.options=t,this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.canvas.width=Math.floor(t.bounds.width*t.scale),this.canvas.height=Math.floor(t.bounds.height*t.scale),this.canvas.style.width=t.bounds.width+"px",this.canvas.style.height=t.bounds.height+"px",this.ctx.scale(this.options.scale,this.options.scale),t.logger.log("ForeignObject renderer initialized with scale "+this.options.scale);var n=ma(t.bounds.width,t.bounds.height,this.element);return ga(n).then(function(n){return t.backgroundColor&&(e.ctx.fillStyle=t.backgroundColor.toString(),e.ctx.fillRect(0,0,t.bounds.width,t.bounds.height)),e.ctx.drawImage(n,0,0),e.canvas})}}]),t}(),ma=function(t,e,n){var i="http://www.w3.org/2000/svg",r=document.createElementNS(i,"svg"),a=document.createElementNS(i,"foreignObject");return r.setAttributeNS(null,"width",t),r.setAttributeNS(null,"height",e),a.setAttributeNS(null,"width","100%"),a.setAttributeNS(null,"height","100%"),a.setAttributeNS(null,"externalResourcesRequired","true"),r.appendChild(a),a.appendChild(n),r},ga=function(t){return new ei(function(e,n){var i=new Image;i.onload=function(){return e(i)},i.onerror=n,i.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(t))})},ya=function(t){if(t.createRange){var e=t.createRange();if(e.getBoundingClientRect){var n=t.createElement("boundtest");n.style.height="123px",n.style.display="block",t.body.appendChild(n),e.selectNode(n);var i=e.getBoundingClientRect(),r=Math.round(i.height);if(t.body.removeChild(n),123===r)return!0}}return!1},va=function(t,e){var n=new Image,i=t.createElement("canvas"),r=i.getContext("2d");return new ei(function(t){n.src=e;var a=function(){try{r.drawImage(n,0,0),i.toDataURL()}catch(e){return t(!1)}return t(!0)};n.onload=a,n.onerror=function(){return t(!1)},!0===n.complete&&setTimeout(function(){a()},500)})},ba=function(){return void 0!==(new Image).crossOrigin},wa=function(){return"string"==typeof(new XMLHttpRequest).responseType},xa=function(t){var e=new Image,n=t.createElement("canvas"),i=n.getContext("2d");e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{i.drawImage(e,0,0),n.toDataURL()}catch(t){return!1}return!0},Ea=function(t){return 0===t[0]&&255===t[1]&&0===t[2]&&255===t[3]},Ta=function(t){var e=t.createElement("canvas");e.width=100,e.height=100;var n=e.getContext("2d");n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,100,100);var i=new Image,r=e.toDataURL();i.src=r;var a=ma(100,100,i);return n.fillStyle="red",n.fillRect(0,0,100,100),ga(a).then(function(e){n.drawImage(e,0,0);var i=n.getImageData(0,0,100,100).data;n.fillStyle="red",n.fillRect(0,0,100,100);var a=t.createElement("div");return a.style.backgroundImage="url("+r+")",a.style.height="100px",Ea(i)?ga(ma(100,100,a)):ei.reject(!1)}).then(function(t){return n.drawImage(t,0,0),Ea(n.getImageData(0,0,100,100).data)}).catch(function(t){return!1})},Pa={get SUPPORT_RANGE_BOUNDS(){var t=ya(document);return Object.defineProperty(Pa,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=xa(document);return Object.defineProperty(Pa,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_BASE64_DRAWING(){return function(t){var e=va(document,t);return Object.defineProperty(Pa,"SUPPORT_BASE64_DRAWING",{value:function(){return e}}),e}},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=Ta(document);return Object.defineProperty(Pa,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=ba();return Object.defineProperty(Pa,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=wa();return Object.defineProperty(Pa,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Pa,"SUPPORT_CORS_XHR",{value:t}),t}},Ca=/[^\u0000-\u00ff]/,Sa=function(t){return Ca.test(t)},Oa=function(t){return da.encode([t])},Ia=function t(e,n){ni(this,t),this.text=e,this.bounds=n},ka=function(t,e,n){for(var i=da.decode(t),r=0!==e.style.letterSpacing||Sa(t)?i.map(Oa):Na(i),a=r.length,o=[],s=0,l=0;l<a;l++){var u=r[l];if(e.style.textDecoration!==Ii.NONE||u.trim().length>0)if(Pa.SUPPORT_RANGE_BOUNDS)o.push(new Ia(u,Ma(n,s,u.length)));else{var h=n.splitText(u.length);o.push(new Ia(u,Ra(n))),n=h}else Pa.SUPPORT_RANGE_BOUNDS||(n=n.splitText(u.length));s+=u.length}return o},Ra=function(t){var e=t.ownerDocument.createElement("html2canvaswrapper");e.appendChild(t.cloneNode(!0));var n=t.parentNode;if(n){n.replaceChild(e,t);var i=ji(e);return e.firstChild&&n.replaceChild(e.firstChild,e),i}return new Hi(0,0,0,0)},Ma=function(t,e,n){var i=t.ownerDocument.createRange();return i.setStart(t,e),i.setEnd(t,e+n),Hi.fromClientRect(i.getBoundingClientRect())},Na=function(t){for(var e=[],n=0,i=!1,r=void 0;t.length;)Aa(t[n])===i?((r=t.splice(0,n)).length&&e.push(da.encode(r)),i=!i,n=0):n++,n>=t.length&&(r=t.splice(0,n)).length&&e.push(da.encode(r));return e},Aa=function(t){return-1!==[32,13,10,9,45].indexOf(t)},Ba=function(){function t(e,n,i){ni(this,t),this.text=e,this.parent=n,this.bounds=i}return oi(t,null,[{key:"fromTextNode",value:function(e,n){var i=La(e.data,n.style.textTransform);return new t(i,n,ka(i,n,e))}}]),t}(),_a=/(^|\s|:|-|\(|\))([a-z])/g,La=function(t,e){switch(e){case jr.LOWERCASE:return t.toLowerCase();case jr.CAPITALIZE:return t.replace(_a,u);case jr.UPPERCASE:return t.toUpperCase();default:return t}},Va=function t(e,n,i){ni(this,t),this.type=si.CIRCLE,this.x=e,this.y=n,this.radius=i},Da=new Pi([42,42,42]),Fa=new Pi([165,165,165]),Ua=new Pi([222,222,222]),Ga={borderWidth:1,borderColor:Fa,borderStyle:Er.SOLID},Wa=[Ga,Ga,Ga,Ga],Xa={backgroundColor:Ua,backgroundImage:[],backgroundClip:rr.PADDING_BOX,backgroundOrigin:ar.PADDING_BOX},Ha=new Fi("50%"),ja=[Ha,Ha],za=[ja,ja,ja,ja],Ya=new Fi("3px"),qa=[Ya,Ya],$a=[qa,qa,qa,qa],Ka=function(t){return"radio"===t.type?za:$a},Za=function(t,e){if("radio"===t.type||"checkbox"===t.type){if(t.checked){var n=Math.min(e.bounds.width,e.bounds.height);e.childNodes.push("checkbox"===t.type?[new Gi(e.bounds.left+.39363*n,e.bounds.top+.79*n),new Gi(e.bounds.left+.16*n,e.bounds.top+.5549*n),new Gi(e.bounds.left+.27347*n,e.bounds.top+.44071*n),new Gi(e.bounds.left+.39694*n,e.bounds.top+.5649*n),new Gi(e.bounds.left+.72983*n,e.bounds.top+.23*n),new Gi(e.bounds.left+.84*n,e.bounds.top+.34085*n),new Gi(e.bounds.left+.39363*n,e.bounds.top+.79*n)]:new Va(e.bounds.left+n/4,e.bounds.top+n/4,n/4))}}else eo(no(t),t,e,!1)},Ja=function(t,e){eo(t.value,t,e,!0)},Qa=function(t,e){var n=t.options[t.selectedIndex||0];eo(n?n.text||"":"",t,e,!1)},to=function(t){return t.width>t.height?(t.left+=(t.width-t.height)/2,t.width=t.height):t.width<t.height&&(t.top+=(t.height-t.width)/2,t.height=t.width),t},eo=function(t,e,n,i){var r=e.ownerDocument.body;if(t.length>0&&r){var a=e.ownerDocument.createElement("html2canvaswrapper");Vi(e.ownerDocument.defaultView.getComputedStyle(e,null),a),a.style.position="fixed",a.style.left=n.bounds.left+"px",a.style.top=n.bounds.top+"px",i||(a.style.whiteSpace="nowrap");var o=e.ownerDocument.createTextNode(t);a.appendChild(o),r.appendChild(a),n.childNodes.push(Ba.fromTextNode(o,n)),r.removeChild(a)}},no=function(t){var e="password"===t.type?new Array(t.value.length+1).join(""):t.value;return 0===e.length?t.placeholder||"":e},io=["INPUT","TEXTAREA","SELECT"],ro=function(){function t(e,n,i,r){var a=this;ni(this,t),this.parent=n,this.index=r,this.childNodes=[];var o=e.ownerDocument.defaultView,s=o.getComputedStyle(e,null),l=Mr(s.display),u="radio"===e.type||"checkbox"===e.type,h=Wr(s.position);this.style={background:u?Xa:fr(s,i),border:u?Wa:Cr(s),borderRadius:(e instanceof o.HTMLInputElement||e instanceof HTMLInputElement)&&u?Ka(e):Or(s),color:u?Da:new Pi(s.color),display:l,float:Ar(s.float),font:_r(s),letterSpacing:Lr(s.letterSpacing),opacity:parseFloat(s.opacity),overflow:-1===io.indexOf(e.tagName)?Dr(s.overflow):Vr.HIDDEN,padding:Ur(s),position:h,textDecoration:Ai(s),textShadow:Hr(s.textShadow),textTransform:zr(s.textTransform),transform:$r(s),visibility:Qr(s.visibility),zIndex:ta(h!==Gr.STATIC?s.zIndex:"auto")},this.isTransformed()&&(e.style.transform="matrix(1,0,0,1,0,0)"),"IMG"===e.tagName&&e.addEventListener("load",function(){a.bounds=ji(e),a.curvedBounds=Qi(a.bounds,a.style.border,a.style.borderRadius)}),this.image=ao(e,i),this.bounds=u?to(ji(e)):ji(e),this.curvedBounds=Qi(this.bounds,this.style.border,this.style.borderRadius)}return oi(t,[{key:"getClipPaths",value:function(){var t=this.parent?this.parent.getClipPaths():[];return this.style.overflow===Vr.HIDDEN||this.style.overflow===Vr.SCROLL?t.concat([Ji(this.curvedBounds)]):t}},{key:"isInFlow",value:function(){return this.isRootElement()&&!this.isFloating()&&!this.isAbsolutelyPositioned()}},{key:"isVisible",value:function(){return!Li(this.style.display,Ir.NONE)&&this.style.opacity>0&&this.style.visibility===Jr.VISIBLE}},{key:"isAbsolutelyPositioned",value:function(){return this.style.position!==Gr.STATIC&&this.style.position!==Gr.RELATIVE}},{key:"isPositioned",value:function(){return this.style.position!==Gr.STATIC}},{key:"isFloating",value:function(){return this.style.float!==Nr.NONE}},{key:"isRootElement",value:function(){return null===this.parent}},{key:"isTransformed",value:function(){return null!==this.style.transform}},{key:"isPositionedWithZIndex",value:function(){return this.isPositioned()&&!this.style.zIndex.auto}},{key:"isInlineLevel",value:function(){return Li(this.style.display,Ir.INLINE)||Li(this.style.display,Ir.INLINE_BLOCK)||Li(this.style.display,Ir.INLINE_FLEX)||Li(this.style.display,Ir.INLINE_GRID)||Li(this.style.display,Ir.INLINE_LIST_ITEM)||Li(this.style.display,Ir.INLINE_TABLE)}},{key:"isInlineBlockOrInlineTable",value:function(){return Li(this.style.display,Ir.INLINE_BLOCK)||Li(this.style.display,Ir.INLINE_TABLE)}}]),t}(),ao=function(t,e){if(t instanceof t.ownerDocument.defaultView.SVGSVGElement||t instanceof SVGSVGElement){var n=new XMLSerializer;return e.loadImage("data:image/svg+xml,"+encodeURIComponent(n.serializeToString(t)))}switch(t.tagName){case"IMG":return e.loadImage(t.currentSrc||t.src);case"CANVAS":return e.loadCanvas(t);case"DIV":var i=t.getAttribute("data-html2canvas-internal-iframe-key");if(i)return console.log("ok"),i}return null},oo=function(){function t(e,n,i){ni(this,t),this.container=e,this.parent=n,this.contexts=[],this.children=[],this.treatAsRealStackingContext=i}return oi(t,[{key:"getOpacity",value:function(){return this.parent?this.container.style.opacity*this.parent.getOpacity():this.container.style.opacity}},{key:"getRealParentStackingContext",value:function(){return!this.parent||this.treatAsRealStackingContext?this:this.parent.getRealParentStackingContext()}}]),t}(),so=function(t,e,n){var i=0,r=new ro(t,null,e,i++),a=new oo(r,null,!0);return uo(t,r,a,e,i),a},lo=["SCRIPT","HEAD","TITLE","OBJECT","BR","OPTION"],uo=function t(e,n,i,r,a){for(var o,s=e.firstChild;s;s=o){o=s.nextSibling;var l=s.ownerDocument.defaultView;if(s instanceof l.Text||s instanceof Text)s.data.trim().length>0&&n.childNodes.push(Ba.fromTextNode(s,n));else if(s instanceof l.HTMLElement||s instanceof HTMLElement){if(-1===lo.indexOf(s.nodeName)){var u=new ro(s,n,r,a++);if(u.isVisible()){"INPUT"===s.tagName?Za(s,u):"TEXTAREA"===s.tagName?Ja(s,u):"SELECT"===s.tagName&&Qa(s,u);var h="TEXTAREA"!==s.tagName,c=ho(u,s);if(c||co(u)){var f=c||u.isPositioned()?i.getRealParentStackingContext():i,d=new oo(u,f,c);f.contexts.push(d),h&&t(s,u,d,r,a)}else i.children.push(u),h&&t(s,u,i,r,a)}}}else if(s instanceof l.SVGSVGElement||s instanceof SVGSVGElement){var p=new ro(s,n,r,a++),m=ho(p,s);if(m||co(p)){var g=m||p.isPositioned()?i.getRealParentStackingContext():i,y=new oo(p,g,m);g.contexts.push(y)}else i.children.push(p)}}},ho=function(t,e){return t.isRootElement()||t.isPositionedWithZIndex()||t.style.opacity<1||t.isTransformed()||fo(t,e)},co=function(t){return t.isPositioned()||t.isFloating()},fo=function(t,e){return"BODY"===e.nodeName&&t.parent instanceof ro&&t.parent.style.background.backgroundColor.isTransparent()},po=function(){function t(e){ni(this,t),this._data={},this._document=e}return oi(t,[{key:"_parseMetrics",value:function(t){var e=this._document.createElement("div"),n=this._document.createElement("img"),i=this._document.createElement("span"),r=this._document.body;if(!r)throw new Error("");e.style.visibility="hidden",e.style.fontFamily=t.fontFamily,e.style.fontSize=t.fontSize,e.style.margin="0",e.style.padding="0",r.appendChild(e),n.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",n.width=1,n.height=1,n.style.margin="0",n.style.padding="0",n.style.verticalAlign="baseline",i.style.fontFamily=t.fontFamily,i.style.fontSize=t.fontSize,i.style.margin="0",i.style.padding="0",i.appendChild(this._document.createTextNode("Hidden Text")),e.appendChild(i),e.appendChild(n);var a=n.offsetTop-i.offsetTop+2;e.removeChild(i),e.appendChild(this._document.createTextNode("Hidden Text")),e.style.lineHeight="normal",n.style.verticalAlign="super";var o=n.offsetTop-e.offsetTop+2;return r.removeChild(e),{baseline:a,middle:o}}},{key:"getMetrics",value:function(t){return void 0===this._data[t.fontFamily+" "+t.fontSize]&&(this._data[t.fontFamily+" "+t.fontSize]=this._parseMetrics(t)),this._data[t.fontFamily+" "+t.fontSize]}}]),t}(),mo=/([+-]?\d*\.?\d+)(deg|grad|rad|turn)/i,go=function(t){var e=t.match(mo);if(e){var n=parseFloat(e[1]);switch(e[2].toLowerCase()){case"deg":return Math.PI*n/180;case"grad":return Math.PI/200*n;case"rad":return n;case"turn":return 2*Math.PI*n}}return null},yo=/^(to )?(left|top|right|bottom)( (left|top|right|bottom))?$/i,vo=/^([+-]?\d*\.?\d+)% ([+-]?\d*\.?\d+)%$/i,bo=/(px)|%|( 0)$/i,wo=/^(from|to)\((.+)\)$/i,xo=function(t,e){var n=t.args,i=t.method;return"linear-gradient"===i?Eo(n,e):"gradient"===i&&"linear"===n[0]?Eo(["to bottom"].concat(n.slice(3).map(function(t){return t.match(wo)}).filter(function(t){return null!==t}).map(function(t){return t[2]})),e):void 0},Eo=function(t,e){for(var n=go(t[0]),i=yo.test(t[0]),r=i||null!==n||vo.test(t[0]),a=r?null!==n?To(n,e):i?Co(t[0],e):So(t[0],e):To(Math.PI,e),o=[],s=r?1:0,l=s;l<t.length;l++){var u=t[l],h=bo.test(u),c=u.lastIndexOf(" "),f=new Pi(h?u.substring(0,c):u),d=h?new Fi(u.substring(c+1)):l===s?new Fi("0%"):l===t.length-1?new Fi("100%"):null;o.push({color:f,stop:d})}for(var p=Math.min(Math.sqrt(Math.pow(Math.abs(a.x0)+Math.abs(a.x1),2)+Math.pow(Math.abs(a.y0)+Math.abs(a.y1),2)),2*e.width,2*e.height),m=o.map(function(t){var e=t.color,n=t.stop;return{color:e,stop:n?n.getAbsoluteValue(p)/p:null}}),g=m[0].stop,y=0;y<m.length;y++)if(null!==g){var v=m[y].stop;if(null===v){for(var b=y;null===m[b].stop;)b++;for(var w=b-y+1,x=(m[b].stop-g)/w;y<b;y++)g=m[y].stop=g+x}else g=v}return{direction:a,colorStops:m}},To=function(t,e){var n=e.width,i=e.height,r=.5*n,a=.5*i,o=(Math.abs(n*Math.sin(t))+Math.abs(i*Math.cos(t)))/2,s=r+Math.sin(t)*o,l=a-Math.cos(t)*o;return{x0:s,x1:n-s,y0:l,y1:i-l}},Po=function(t){return Math.acos(t.width/2/(Math.sqrt(Math.pow(t.width,2)+Math.pow(t.height,2))/2))},Co=function(t,e){switch(t){case"bottom":case"to top":return To(0,e);case"left":case"to right":return To(Math.PI/2,e);case"right":case"to left":return To(3*Math.PI/2,e);case"top right":case"right top":case"to bottom left":case"to left bottom":return To(Math.PI+Po(e),e);case"top left":case"left top":case"to bottom right":case"to right bottom":return To(Math.PI-Po(e),e);case"bottom left":case"left bottom":case"to top right":case"to right top":return To(Po(e),e);case"bottom right":case"right bottom":case"to top left":case"to left top":return To(2*Math.PI-Po(e),e);case"top":case"to bottom":default:return To(Math.PI,e)}},So=function(t,e){var n=t.split(" ").map(parseFloat),i=di(n,2),r=i[0],a=i[1],o=r/100*e.width/(a/100*e.height);return To(Math.atan(isNaN(o)?1:o)+Math.PI/2,e)},Oo=function(){function t(e,n){ni(this,t),this.target=e,this.options=n,e.render(n)}return oi(t,[{key:"renderNode",value:function(t){t.isVisible()&&(this.renderNodeBackgroundAndBorders(t),this.renderNodeContent(t))}},{key:"renderNodeContent",value:function(t){var e=this,n=function(){if(t.childNodes.length&&t.childNodes.forEach(function(n){if(n instanceof Ba){var i=n.parent.style;e.target.renderTextNode(n.bounds,i.color,i.font,i.textDecoration,i.textShadow)}else e.target.drawShape(n,t.style.color)}),t.image){var n=e.options.imageStore.get(t.image);if(n){var i=Yi(t.bounds,t.style.padding,t.style.border),r="number"==typeof n.width&&n.width>0?n.width:i.width,a="number"==typeof n.height&&n.height>0?n.height:i.height;r>0&&a>0&&e.target.clip([Ji(t.curvedBounds)],function(){e.target.drawImage(n,new Hi(0,0,r,a),i)})}}},i=t.getClipPaths();i.length?this.target.clip(i,n):n()}},{key:"renderNodeBackgroundAndBorders",value:function(t){var e=this,n=!t.style.background.backgroundColor.isTransparent()||t.style.background.backgroundImage.length,i=t.style.border.filter(function(t){return t.borderStyle!==Er.NONE&&!t.borderColor.isTransparent()}),r=function(){var r=ur(t.curvedBounds,t.style.background.backgroundClip);n&&e.target.clip([r],function(){t.style.background.backgroundColor.isTransparent()||e.target.fill(t.style.background.backgroundColor),e.renderBackgroundImage(t)}),i.forEach(function(n,i){e.renderBorder(n,i,t.curvedBounds)})};if(n||i.length){var a=t.parent?t.parent.getClipPaths():[];a.length?this.target.clip(a,r):r()}}},{key:"renderBackgroundImage",value:function(t){var e=this;t.style.background.backgroundImage.slice(0).reverse().forEach(function(n){if("url"===n.source.method&&n.source.args.length)e.renderBackgroundRepeat(t,n);else{var i=xo(n.source,t.bounds);if(i){var r=t.bounds;e.target.renderLinearGradient(r,i)}}})}},{key:"renderBackgroundRepeat",value:function(t,e){var n=this.options.imageStore.get(e.source.args[0]);if(n){var i=t.bounds,r=zi(i,t.style.border),a=sr(e,n,i),o=t.style.background.backgroundOrigin===ar.BORDER_BOX?i:r,s=hr(e.position,a,o),l=cr(e,s,a,o,i),u=Math.round(r.left+s.x),h=Math.round(r.top+s.y);this.target.renderRepeat(l,n,a,u,h)}}},{key:"renderBorder",value:function(t,e,n){this.target.drawShape($i(n,e),t.borderColor)}},{key:"renderStack",value:function(t){var e=this;if(t.container.isVisible()){var n=t.getOpacity();n!==this._opacity&&(this.target.setOpacity(t.getOpacity()),this._opacity=n);var i=t.container.style.transform;null!==i?this.target.transform(t.container.bounds.left+i.transformOrigin[0].value,t.container.bounds.top+i.transformOrigin[1].value,i.transform,function(){return e.renderStackContent(t)}):this.renderStackContent(t)}}},{key:"renderStackContent",value:function(t){var e=ko(t),n=di(e,5),i=n[0],r=n[1],a=n[2],o=n[3],s=n[4],l=Io(t),u=di(l,2),h=u[0],c=u[1];this.renderNodeBackgroundAndBorders(t.container),i.sort(Ro).forEach(this.renderStack,this),this.renderNodeContent(t.container),c.forEach(this.renderNode,this),o.forEach(this.renderStack,this),s.forEach(this.renderStack,this),h.forEach(this.renderNode,this),r.forEach(this.renderStack,this),a.sort(Ro).forEach(this.renderStack,this)}},{key:"render",value:function(t){return this.options.backgroundColor&&this.target.rectangle(0,0,this.options.width,this.options.height,this.options.backgroundColor),this.renderStack(t),this.target.getTarget()}}]),t}(),Io=function(t){for(var e=[],n=[],i=t.children.length,r=0;r<i;r++){var a=t.children[r];a.isInlineLevel()?e.push(a):n.push(a)}return[e,n]},ko=function(t){for(var e=[],n=[],i=[],r=[],a=[],o=t.contexts.length,s=0;s<o;s++){var l=t.contexts[s];l.container.isPositioned()||l.container.style.opacity<1||l.container.isTransformed()?l.container.style.zIndex.order<0?e.push(l):l.container.style.zIndex.order>0?i.push(l):n.push(l):l.container.isFloating()?r.push(l):a.push(l)}return[e,n,i,r,a]},Ro=function(t,e){return t.container.style.zIndex.order>e.container.style.zIndex.order?1:t.container.style.zIndex.order<e.container.style.zIndex.order?-1:t.container.index>e.container.index?1:-1},Mo=function(t,e){if(!e.proxy)return ei.reject(null);var n=e.proxy;return new ei(function(i,r){var a=Pa.SUPPORT_CORS_XHR&&Pa.SUPPORT_RESPONSE_TYPE?"blob":"text",o=Pa.SUPPORT_CORS_XHR?new XMLHttpRequest:new XDomainRequest;if(o.onload=function(){if(o instanceof XMLHttpRequest)if(200===o.status)if("text"===a)i(o.response);else{var t=new FileReader;t.addEventListener("load",function(){return i(t.result)},!1),t.addEventListener("error",function(t){return r(t)},!1),t.readAsDataURL(o.response)}else r("");else i(o.responseText)},o.onerror=r,o.open("GET",n+"?url="+encodeURIComponent(t)+"&responseType="+a),"text"!==a&&o instanceof XMLHttpRequest&&(o.responseType=a),e.imageTimeout){var s=e.imageTimeout;o.timeout=s,o.ontimeout=function(){return r("")}}o.send()})},No=function(){function t(e,n,i){ni(this,t),this.options=e,this._window=i,this.origin=this.getOrigin(i.location.href),this.cache={},this.logger=n,this._index=0}return oi(t,[{key:"loadImage",value:function(t){var e=this;if(this.hasImageInCache(t))return t;if(Fo(t)){if(!0===this.options.allowTaint||Pa.SUPPORT_SVG_DRAWING)return this.addImage(t,t,!1)}else{if(!0===this.options.allowTaint||Do(t)||this.isSameOrigin(t))return this.addImage(t,t,!1);if(!this.isSameOrigin(t)){if("string"==typeof this.options.proxy)return this.cache[t]=Mo(t,this.options).then(function(t){return Uo(t,e.options.imageTimeout||0)}),t;if(!0===this.options.useCORS&&Pa.SUPPORT_CORS_IMAGES)return this.addImage(t,t,!0)}}}},{key:"inlineImage",value:function(t){var e=this;return Vo(t)?Uo(t,this.options.imageTimeout||0):this.hasImageInCache(t)?this.cache[t]:this.isSameOrigin(t)||"string"!=typeof this.options.proxy?this.xhrImage(t):this.cache[t]=Mo(t,this.options).then(function(t){return Uo(t,e.options.imageTimeout||0)})}},{key:"xhrImage",value:function(t){var e=this;return this.cache[t]=new ei(function(n,i){var r=new XMLHttpRequest;if(r.onreadystatechange=function(){if(4===r.readyState)if(200!==r.status)i("Failed to fetch image "+t.substring(0,256)+" with status code "+r.status);else{var e=new FileReader;e.addEventListener("load",function(){return n(e.result)},!1),e.addEventListener("error",function(t){return i(t)},!1),e.readAsDataURL(r.response)}},r.responseType="blob",e.options.imageTimeout){var a=e.options.imageTimeout;r.timeout=a,r.ontimeout=function(){return i("")}}r.open("GET",t,!0),r.send()}).then(function(t){return Uo(t,e.options.imageTimeout||0)}),this.cache[t]}},{key:"loadCanvas",value:function(t){var e=String(this._index++);return this.cache[e]=ei.resolve(t),e}},{key:"hasImageInCache",value:function(t){return void 0!==this.cache[t]}},{key:"addImage",value:function(t,e,n){var i=this,r=function(t){return new ei(function(r,a){var o=new Image;if(o.onload=function(){return r(o)},t&&!n||(o.crossOrigin="anonymous"),o.onerror=a,o.src=e,!0===o.complete&&setTimeout(function(){r(o)},500),i.options.imageTimeout){var s=i.options.imageTimeout;setTimeout(function(){return a("")},s)}})};return this.cache[t]=Do(e)&&!Fo(e)?Pa.SUPPORT_BASE64_DRAWING(e).then(r):r(!0),t}},{key:"isSameOrigin",value:function(t){return this.getOrigin(t)===this.origin}},{key:"getOrigin",value:function(t){var e=this._link||(this._link=this._window.document.createElement("a"));return e.href=t,e.href=e.href,e.protocol+e.hostname+e.port}},{key:"ready",value:function(){var t=this,e=xr(this.cache);return ei.all(e.map(function(e){return t.cache[e].catch(function(t){return null})})).then(function(t){return new Ao(e,t)})}}]),t}(),Ao=function(){function t(e,n){ni(this,t),this._keys=e,this._images=n}return oi(t,[{key:"get",value:function(t){var e=this._keys.indexOf(t);return-1===e?null:this._images[e]}}]),t}(),Bo=/^data:image\/svg\+xml/i,_o=/^data:image\/.*;base64,/i,Lo=/^data:image\/.*/i,Vo=function(t){return Lo.test(t)},Do=function(t){return _o.test(t)},Fo=function(t){return"svg"===t.substr(-3).toLowerCase()||Bo.test(t)},Uo=function(t,e){return new ei(function(n,i){var r=new Image;r.onload=function(){return n(r)},r.onerror=i,r.src=t,!0===r.complete&&setTimeout(function(){n(r)},500),e&&setTimeout(function(){return i("")},e)})},Go=function(){function t(e,n,i,r,a){ni(this,t),this.referenceElement=e,this.scrolledElements=[],this.copyStyles=r,this.inlineImages=r,this.logger=i,this.options=n,this.renderer=a,this.imageLoader=new No(n,i,window),this.documentElement=this.cloneNode(e.ownerDocument.documentElement)}return oi(t,[{key:"inlineAllImages",value:function(t){var e=this;if(this.inlineImages&&t){var n=t.style;ei.all(br(n.backgroundImage).map(function(t){return"url"===t.method?e.imageLoader.inlineImage(t.args[0]).then(function(t){return t?'url("'+t.src+'")':"none"}).catch(function(t){}):ei.resolve(""+t.prefix+t.method+"("+t.args.join(",")+")")})).then(function(t){t.length>1&&(n.backgroundColor=""),n.backgroundImage=t.join(",")}),t instanceof HTMLImageElement&&this.imageLoader.inlineImage(t.src).then(function(e){if(e&&t instanceof HTMLImageElement&&t.parentNode){var n=t.parentNode,i=Vi(t.style,e.cloneNode(!1));n.replaceChild(i,t)}}).catch(function(t){})}}},{key:"createElementClone",value:function(t){var e=this;if(this.copyStyles&&t instanceof HTMLCanvasElement){var n=t.ownerDocument.createElement("img");try{return n.src=t.toDataURL(),n}catch(t){}}if(t instanceof HTMLIFrameElement){var i=t.cloneNode(!1),r=ts();return i.setAttribute("data-html2canvas-internal-iframe-key",r),this.imageLoader.cache[r]=es(t,this.options).then(function(t){return e.renderer(t,{async:e.options.async,allowTaint:e.options.allowTaint,backgroundColor:"#ffffff",canvas:null,imageTimeout:e.options.imageTimeout,proxy:e.options.proxy,removeContainer:e.options.removeContainer,scale:e.options.scale,target:new Bi,type:"view",windowWidth:t.ownerDocument.defaultView.innerWidth,windowHeight:t.ownerDocument.defaultView.innerHeight,offsetX:t.ownerDocument.defaultView.pageXOffset,offsetY:t.ownerDocument.defaultView.pageYOffset},e.logger.child(r))}).then(function(e){var n=document.createElement("img");return n.src=e.toDataURL(),i.parentNode&&i.parentNode.replaceChild(Vi(t.ownerDocument.defaultView.getComputedStyle(t),n),i),e}),i}return t.cloneNode(!1)}},{key:"cloneNode",value:function(t){var e=t.nodeType===Node.TEXT_NODE?document.createTextNode(t.nodeValue):this.createElementClone(t),n=t.ownerDocument.defaultView;this.referenceElement===t&&e instanceof n.HTMLElement&&(this.clonedReferenceElement=e),e instanceof n.HTMLBodyElement&&Zo(e);for(var i=t.firstChild;i;i=i.nextSibling)i.nodeType===Node.ELEMENT_NODE&&"SCRIPT"===i.nodeName||this.copyStyles&&"STYLE"===i.nodeName||e.appendChild(this.cloneNode(i));if(t instanceof n.HTMLElement&&e instanceof n.HTMLElement)switch(this.inlineAllImages(Ho(t,e,Yo)),this.inlineAllImages(Ho(t,e,qo)),!this.copyStyles||t instanceof HTMLIFrameElement||Vi(t.ownerDocument.defaultView.getComputedStyle(t),e),this.inlineAllImages(e),0===t.scrollTop&&0===t.scrollLeft||this.scrolledElements.push([t,t.scrollLeft,t.scrollTop]),t.nodeName){case"CANVAS":this.copyStyles||Xo(t,e);break;case"TEXTAREA":case"SELECT":e.value=t.value}return e}}]),t}(),Wo=function(t,e,n){!t.defaultView||e===t.defaultView.pageXOffset&&n===t.defaultView.pageYOffset||t.defaultView.scrollTo(e,n)},Xo=function(t,e){try{e&&(e.width=t.width,e.height=t.height,e.getContext("2d").putImageData(t.getContext("2d").getImageData(0,0,t.width,t.height),0,0))}catch(t){}},Ho=function(t,e,n){var i=t.ownerDocument.defaultView.getComputedStyle(t,n);if(i&&i.content&&"none"!==i.content&&"-moz-alt-content"!==i.content&&"none"!==i.display){var r=jo(i.content),a=r.match(zo),o=e.ownerDocument.createElement(a?"img":"html2canvaspseudoelement");return a?o.src=jo(a[1]):o.textContent=r,Vi(i,o),o.className=$o+" "+Ko,e.className+=n===Yo?" "+$o:" "+Ko,n===Yo?e.insertBefore(o,e.firstChild):e.appendChild(o),o}},jo=function(t){var e=t.substr(0,1);return e===t.substr(t.length-1)&&e.match(/['"]/)?t.substr(1,t.length-2):t},zo=/^url\((.+)\)$/i,Yo=":before",qo=":after",$o="___html2canvas___pseudoelement_before",Ko="___html2canvas___pseudoelement_after",Zo=function(t){Jo(t,"."+$o+Yo+'{\n    content: "" !important;\n    display: none !important;\n}\n         .'+Ko+qo+'{\n    content: "" !important;\n    display: none !important;\n}')},Jo=function(t,e){var n=t.ownerDocument.createElement("style");n.innerHTML=e,t.appendChild(n)},Qo=function(t){var e=di(t,3),n=e[0],i=e[1],r=e[2];n.scrollLeft=i,n.scrollTop=r},ts=function(){return Math.ceil(Date.now()+1e7*Math.random()).toString(16)},es=function(t,e){try{return ei.resolve(t.contentWindow.document.documentElement)}catch(t){return ei.reject()}},ns=function(t,e,n,i,r,a){var o=new Go(n,i,r,!1,a),s=t.createElement("iframe");return s.className="html2canvas-container",s.style.visibility="hidden",s.style.position="fixed",s.style.left="-10000px",s.style.top="0px",s.style.border="0",s.width=e.width.toString(),s.height=e.height.toString(),s.scrolling="no",t.body?(t.body.appendChild(s),new ei(function(t,r){var a=s.contentWindow,l=a.document;a.onload=s.onload=function(){var n=setInterval(function(){l.body.childNodes.length>0&&(o.scrolledElements.forEach(Qo),clearInterval(n),"view"===i.type&&(a.scrollTo(e.left,e.top),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||a.scrollY===e.top&&a.scrollX===e.left||(l.documentElement.style.top=-e.top+"px",l.documentElement.style.left=-e.left+"px",l.documentElement.style.position="absolute")),o.clonedReferenceElement instanceof a.HTMLElement||o.clonedReferenceElement instanceof HTMLElement?t([s,o.clonedReferenceElement,o.imageLoader]):r(""))},50)},l.open(),l.write("<!DOCTYPE html><html></html>"),Wo(n.ownerDocument,e.left,e.top),l.replaceChild(l.adoptNode(o.documentElement),l.documentElement),l.close()})):ei.reject("")},is=function t(e,n,i){var r=e.ownerDocument,a=new Hi(n.offsetX,n.offsetY,n.windowWidth,n.windowHeight),o="view"===n.type?a:qi(r),s=r.documentElement?new Pi(getComputedStyle(r.documentElement).backgroundColor):Si,l=r.body?new Pi(getComputedStyle(r.body).backgroundColor):Si,u=e===r.documentElement?s.isTransparent()?l.isTransparent()?n.backgroundColor?new Pi(n.backgroundColor):null:l:s:n.backgroundColor?new Pi(n.backgroundColor):null;return Pa.SUPPORT_FOREIGNOBJECT_DRAWING.then(function(s){return s?function(t){return t.imageLoader.ready().then(function(){return new pa(t.clonedReferenceElement).render({bounds:o,backgroundColor:u,logger:i,scale:n.scale})})}(new Go(e,n,i,!0,t)):ns(r,a,e,n,i,t).then(function(t){var e=di(t,3),r=e[0],a=e[1],s=e[2],l=so(a,s),h=a.ownerDocument,c=o.width,f=o.height;return u===l.container.style.background.backgroundColor&&(l.container.style.background.backgroundColor=Si),s.ready().then(function(t){!0===n.removeContainer&&r.parentNode&&r.parentNode.removeChild(r);var e=new po(h),a={backgroundColor:u,fontMetrics:e,imageStore:t,logger:i,scale:n.scale,width:c,height:f};return Array.isArray(n.target)?ei.all(n.target.map(function(t){return new Oo(t,a).render(l)})):new Oo(n.target,a).render(l)})})})},rs=function(t,e){"object"===("undefined"==typeof console?"undefined":Ke(console))&&"function"==typeof console.log&&console.log("html2canvas 1.0.0-alpha.1");var n=e||{},i=new _i,r=t.ownerDocument.defaultView,a={async:!0,allowTaint:!1,imageTimeout:15e3,proxy:null,removeContainer:!0,scale:r.devicePixelRatio||1,target:new Bi(n.canvas),type:null,windowWidth:r.innerWidth,windowHeight:r.innerHeight,offsetX:r.pageXOffset,offsetY:r.pageYOffset},o=is(t,xt({},a,n),i);return o.catch(function(t){throw i.error(t),t})};rs.CanvasRenderer=Bi;var as,os=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],ss=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24],ls={image:function(t,e,n,i){var r=document.getElementById(t),a=r.naturalWidth,o=r.naturalHeight,s=document.getElementById(e);s.style.width=a+"px",s.style.height=o+"px",s.width=a,s.height=o;var l=s.getContext("2d");l.clearRect(0,0,a,o),l.drawImage(r,0,0),isNaN(n)||n<1||(i?d(e,0,0,a,o,n):p(e,0,0,a,o,n))},canvasRGBA:d,canvasRGB:p},us=function t(e,n,i){if(null!=e||null!=n||null!=i){"string"==typeof e&&(e=document.getElementById(e)),null!=e.svg&&e.svg.stop();var r=y(i||{});1==e.childNodes.length&&"OBJECT"==e.childNodes[0].nodeName||(e.svg=r);var a=e.getContext("2d");void 0!==n.documentElement?r.loadXmlDoc(a,n):"<"==n.substr(0,1)?r.loadXml(a,n):r.load(a,n)}else for(var o=document.querySelectorAll("svg"),s=0;s<o.length;s++){var l=o[s],u=document.createElement("canvas");u.width=l.clientWidth,u.height=l.clientHeight,l.parentNode.insertBefore(u,l),l.parentNode.removeChild(l);var h=document.createElement("div");h.appendChild(l),t(u,h.innerHTML)}};void 0!==Element.prototype.matches?as=function(t,e){return t.matches(e)}:void 0!==Element.prototype.webkitMatchesSelector?as=function(t,e){return t.webkitMatchesSelector(e)}:void 0!==Element.prototype.mozMatchesSelector?as=function(t,e){return t.mozMatchesSelector(e)}:void 0!==Element.prototype.msMatchesSelector?as=function(t,e){return t.msMatchesSelector(e)}:void 0!==Element.prototype.oMatchesSelector?as=function(t,e){return t.oMatchesSelector(e)}:("function"!=typeof jQuery&&"function"!=typeof Zepto||(as=function(t,e){return $(t).is(e)}),void 0===as&&(as=Sizzle.matchesSelector));var hs=/(\[[^\]]+\])/g,cs=/(#[^\s\+>~\.\[:]+)/g,fs=/(\.[^\s\+>~\.\[:]+)/g,ds=/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi,ps=/(:[\w-]+\([^\)]*\))/gi,ms=/(:[^\s\+>~\.\[:]+)/g,gs=/([^\s\+>~\.\[:]+)/g;"undefined"!=typeof CanvasRenderingContext2D&&(CanvasRenderingContext2D.prototype.drawSvg=function(t,e,n,i,r){us(this.canvas,t,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:e,offsetY:n,scaleWidth:i,scaleHeight:r})});var ys=function(t){t.find(".canvg").each(function(){v(jQuery(this))});var e=w(t);return rs(e,{useCORS:!0,allowTaint:!1,logging:!1}).then(function(t){return document.body.removeChild(e),t.toDataURL("image/png")})},vs={html2canvas:rs,infoScreenShot:ys,canvg:us,hiddenClone:w,svgAImg:v,svgACanvas:b};t.html2canvas=rs,t.infoScreenShot=ys,t.canvg=us,t.hiddenClone=w,t.svgAImg=v,t.svgACanvas=b,t.default=vs,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ig_screenshot.min.js.map
